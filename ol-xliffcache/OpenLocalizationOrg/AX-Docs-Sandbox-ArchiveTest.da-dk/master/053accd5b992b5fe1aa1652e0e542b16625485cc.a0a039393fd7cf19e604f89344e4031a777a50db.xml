{"content":"--- \n# required metadata \n \ntitle: Modify format to generate documents with application data update for electronic reporting (ER)\ndescription: To complete the steps in this procedure, you must first complete the procedure, \"ER Generate documents with application data update (Part 3 - Modify model and mapping)\". \nauthor: NickSelin\nmanager: AnnBe \nms.date: 06/19/2017\nms.topic: business-process \nms.prod:  \nms.service: dynamics-ax-applications \nms.technology:  \n \n# optional metadata \n \n# ms.search.form:   \naudience: Application User \n# ms.devlang:  \nms.reviewer: kfend\nms.search.scope: Operations \n# ms.tgt_pltfrm:  \n# ms.custom:  \nms.search.region: Global\n# ms.search.industry: \nms.author: nselin\nms.search.validFrom: 2016-06-30 \nms.dyn365.ops.version: Version 7.0.0 \n---\n# Modify format to generate documents with application data update for electronic reporting (ER)\n\n[!include[task guide banner](../../includes/task-guide-banner.md)]\n\nTo complete the steps in this procedure, you must first complete the procedure, \"ER Generate documents with application data update (Part 3: Modify model and mapping)\".\n\nThe steps in this procedure explain how to design Electronic reporting (ER) configurations to generate an electronic document and update application data. In this procedure, you will modify the ER configurations to not just use them to generate electronic documents, but also to update application data. This procedure is created for users with the assigned role of system administrator or electronic reporting developer. These steps can be completed using the DEMF dataset.\n\n\n## Modify format to collect details of reporting\n1. Go to Organization administration > Electronic reporting > Configurations.\n2. In the tree, expand 'Intrastat (model)'.\n3. In the tree, select 'Intrastat (model)\\Intrastat (format)'.\n4. Click Designer.\n5. In the tree, expand 'File'.\n6. In the tree, expand 'File\\Declaration'.\n7. In the tree, select 'File\\Declaration\\Data'.\n8. In the Multiplicity field, select 'One many'.\n    * Configure this format element to archive details of the Intrastat reporting process. This item represents the archive’s header record.  \n9. In the tree, expand 'File\\Declaration\\Data'.\n10. In the tree, select 'File\\Declaration\\Data\\Item'.\n11. In the Multiplicity field, select 'Zero many'.\n    * Configure this format element to archive details of the Intrastat reporting process. This item will represent the list of archived lines.  \n12. In the tree, expand 'File\\Declaration\\Data\\Item'.\n13. In the tree, select 'File\\Declaration\\Data\\Item\\Dim1'.\n14. Select Yes in the Excluded field.\n    * You will not archive this data, so you can exclude this format element from the data source of Intrastat reporting details.  \n15. In the tree, expand 'File\\Declaration\\Data\\Item\\Dim1'.\n16. In the tree, select 'File\\Declaration\\Data\\Item\\Dim1\\property'.\n17. Select Yes in the Excluded field.\n18. In the tree, select 'File\\Declaration\\Data\\Item\\Dim1\\date'.\n19. Select Yes in the Excluded field.\n20. In the tree, select 'File\\Declaration\\Data\\Item\\Dim2'.\n21. Select Yes in the Excluded field.\n22. In the tree, expand 'File\\Declaration\\Data\\Item\\Dim2'.\n23. In the tree, select 'File\\Declaration\\Data\\Item\\Dim2\\property'.\n24. Select Yes in the Excluded field.\n25. In the tree, select 'File\\Declaration\\Data\\Item\\Dim2\\code'.\n26. Select Yes in the Excluded field.\n27. In the tree, select 'File\\Declaration\\Data\\Item\\Dim3'.\n    * Several format elements can have the same name. For example, Dim. You cannot explicitly recognize them when you use this format as a data source for archiving Intrastat reporting details, so you need to define the alternative names for these format elements.   \n28. In the Name field, type 'Amount'.\n    * Amount  \n29. In the Multiplicity field, select 'Exactly one'.\n30. In the tree, select 'File\\Declaration\\Data\\Item\\Dim4'.\n31. In the Name field, type 'Item'.\n    * Item  \n32. In the Multiplicity field, select 'Exactly one'.\n    * In addition to the design format elements, the following Intrastat reporting details must be archived: unique record identification of each reported commodity item and name of the generated file. Because this data will not be populated in the Intrastat report, you need to add the format that is related to these detail elements as data source items.  \n33. In the tree, select 'File\\Declaration\\Data'.\n34. Click Add to open the drop dialog.\n35. In the tree, select 'Data source\\Item'.\n36. In the Name field, type 'File name'.\n    * File name  \n37. In the Data type field, select 'String'.\n38. Click OK.\n39. In the tree, select 'File\\Declaration\\Data\\Item'.\n40. Click Add Item.\n41. In the Name field, type 'Commodity rec id'.\n    * Commodity rec id  \n42. In the Data type field, select 'Int64'.\n43. Click OK.\n44. Click the Mapping tab.\n45. In the tree, select 'File\\Declaration\\Data\\File name'.\n46. Click Bind.\n47. In the tree, expand 'model'.\n48. In the tree, expand 'model\\Transactions'.\n49. In the tree, select 'File\\Declaration\\Data\\Item =  model.Transactions\\Commodity rec id'.\n50. In the tree, select 'model\\Transactions\\Commodity rec id'.\n51. Click Bind.\n52. Click Save.\n\n## Modify format to memorize details of reporting\n1. Click Map format to model.\n2. Click New.\n3. In the Definition field, enter or select the ‘For application data update’ root item.\n    * For application data update  \n4. In the Name field, type 'Mapping to update data'.\n    * Mapping to update data  \n5. Click Save.\n    * This mapping defines how the details of the Intrastat report are collected in the data model, the structure of which is specified by the selected root item ‘For application data update’. These details, the model mapping with same root item ‘For application data update’, and the direction ‘To destination’ will be used for the application data update. The application data update starts immediately after the outgoing Intrastat report is generated. Note that the application data update can be skipped at run-time, but the data model must be empty (containing empty record list).   \n6. Click Designer.\n    * Note that the outgoing Intrastat report format is added by default as a data source for this model mapping.  \n    * Bind elements of the designed report (presented as data source) to elements of the data model, which is filtered based on the selected model’s root item.  \n7. In the tree, expand 'Archive header'.\n8. In the tree, expand 'Archive header\\Archive lines'.\n9. In the tree, expand 'format'.\n10. In the tree, expand 'format\\Declaration: XML Element(Declaration)'.\n11. In the tree, expand 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)'.\n12. In the tree, expand 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\Item: XML Element 0..* (Item)'.\n13. In the tree, expand 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\Item: XML Element 0..* (Item)\\Dim3: XML Element 1..1 (Amount)'.\n14. In the tree, expand 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\Item: XML Element 0..* (Item)\\Dim4: XML Element 1..1 (Item)'.\n15. In the tree, select 'Archive header\\Number of lines'.\n16. Click Edit.\n17. In the tree, select 'List\\COUNT'.\n18. Click Add function.\n19. In the tree, expand 'format'.\n20. In the tree, expand 'format\\Declaration: XML Element(Declaration)'.\n21. In the tree, expand 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)'.\n22. In the tree, select 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\Item: XML Element 0..* (Item)'.\n23. Click Add data source.\n24. In the Formula field, enter 'COUNT(format.Declaration.Data.Item)'.\n    * COUNT(format.Declaration.Data.Item)  \n25. Click Save.\n26. Close the page.\n27. In the tree, select 'Archive header\\File name'.\n28. In the tree, select 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\File name: Item String(File name)'.\n29. Click Bind.\n30. In the tree, select 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\Item: XML Element 0..* (Item)\\Dim4: XML Element 1..1 (Item)\\number: String(number)'.\n31. In the tree, select 'Archive header\\Archive lines\\Item number'.\n32. Click Bind.\n33. In the tree, select 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\Item: XML Element 0..* (Item)\\Dim3: XML Element 1..1 (Amount)\\value: Numeric Real(value)'.\n34. In the tree, select 'Archive header\\Archive lines\\Amount'.\n35. Click Bind.\n36. In the tree, select 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\Item: XML Element 0..* (Item)\\Commodity rec id: Item Int64(Commodity rec id)'.\n37. In the tree, select 'Archive header\\Archive lines\\Commodity rec id'.\n38. Click Bind.\n39. In the tree, select 'Archive header\\Archive lines'.\n40. In the tree, select 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\Item: XML Element 0..* (Item)'.\n41. Click Bind.\n42. In the tree, select 'Archive header'.\n43. In the tree, select 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)'.\n44. Click Bind.\n45. Click Save.\n46. Close the page.\n47. Close the page.\n48. Close the page.\n\n","nodes":[{"pos":[5,770],"embed":true,"restype":"x-metadata","content":"# required metadata \n \ntitle: Modify format to generate documents with application data update for electronic reporting (ER)\ndescription: To complete the steps in this procedure, you must first complete the procedure, \"ER Generate documents with application data update (Part 3 - Modify model and mapping)\". \nauthor: NickSelin\nmanager: AnnBe \nms.date: 06/19/2017\nms.topic: business-process \nms.prod:  \nms.service: dynamics-ax-applications \nms.technology:  \n \n# optional metadata \n \n# ms.search.form:   \naudience: Application User \n# ms.devlang:  \nms.reviewer: kfend\nms.search.scope: Operations \n# ms.tgt_pltfrm:  \n# ms.custom:  \nms.search.region: Global\n# ms.search.industry: \nms.author: nselin\nms.search.validFrom: 2016-06-30 \nms.dyn365.ops.version: Version 7.0.0 ","nodes":[{"content":"Modify format to generate documents with application data update for electronic reporting (ER)","nodes":[{"pos":[0,94],"content":"Modify format to generate documents with application data update for electronic reporting (ER)","nodes":[{"content":"Modify format to generate documents with application data update for electronic reporting (ER)","pos":[0,94]}]}],"path":["title"],"extradata":"MT"},{"content":"To complete the steps in this procedure, you must first complete the procedure, \"ER Generate documents with application data update (Part 3 - Modify model and mapping)\".","nodes":[{"pos":[0,169],"content":"To complete the steps in this procedure, you must first complete the procedure, \"ER Generate documents with application data update (Part 3 - Modify model and mapping)\".","nodes":[{"content":"To complete the steps in this procedure, you must first complete the procedure, \"ER Generate documents with application data update (Part 3 - Modify model and mapping)\".","pos":[0,169]}]}],"path":["description"],"extradata":"MT"}],"header":"# required metadata \n","yml":true},{"pos":[777,871],"content":"Modify format to generate documents with application data update for electronic reporting (ER)","linkify":"Modify format to generate documents with application data update for electronic reporting (ER)","nodes":[{"content":"Modify format to generate documents with application data update for electronic reporting (ER)","pos":[0,94]}]},{"content":"To complete the steps in this procedure, you must first complete the procedure, \"ER Generate documents with application data update (Part 3: Modify model and mapping)\".","pos":[941,1109]},{"content":"The steps in this procedure explain how to design Electronic reporting (ER) configurations to generate an electronic document and update application data.","pos":[1111,1265]},{"content":"In this procedure, you will modify the ER configurations to not just use them to generate electronic documents, but also to update application data.","pos":[1266,1414]},{"content":"This procedure is created for users with the assigned role of system administrator or electronic reporting developer.","pos":[1415,1532]},{"content":"These steps can be completed using the DEMF dataset.","pos":[1533,1585]},{"pos":[1591,1636],"content":"Modify format to collect details of reporting","linkify":"Modify format to collect details of reporting","nodes":[{"content":"Modify format to collect details of reporting","pos":[0,45]}]},{"content":"Go to Organization administration &gt; Electronic reporting &gt; Configurations.","pos":[1640,1714],"source":"Go to Organization administration > Electronic reporting > Configurations."},{"content":"In the tree, expand 'Intrastat (model)'.","pos":[1718,1758]},{"content":"In the tree, select 'Intrastat (model)\\Intrastat (format)'.","pos":[1762,1821]},{"content":"Click Designer.","pos":[1825,1840]},{"content":"In the tree, expand 'File'.","pos":[1844,1871]},{"content":"In the tree, expand 'File\\Declaration'.","pos":[1875,1914]},{"content":"In the tree, select 'File\\Declaration\\Data'.","pos":[1918,1962]},{"content":"In the Multiplicity field, select 'One many'.","pos":[1966,2011]},{"content":"Configure this format element to archive details of the Intrastat reporting process.","pos":[2018,2102]},{"content":"This item represents the archive’s header record.","pos":[2103,2152]},{"content":"In the tree, expand 'File\\Declaration\\Data'.","pos":[2158,2202]},{"content":"In the tree, select 'File\\Declaration\\Data\\Item'.","pos":[2207,2256]},{"content":"In the Multiplicity field, select 'Zero many'.","pos":[2261,2307]},{"content":"Configure this format element to archive details of the Intrastat reporting process.","pos":[2314,2398]},{"content":"This item will represent the list of archived lines.","pos":[2399,2451]},{"content":"In the tree, expand 'File\\Declaration\\Data\\Item'.","pos":[2458,2507]},{"content":"In the tree, select 'File\\Declaration\\Data\\Item\\Dim1'.","pos":[2512,2566]},{"content":"Select Yes in the Excluded field.","pos":[2571,2604]},{"content":"You will not archive this data, so you can exclude this format element from the data source of Intrastat reporting details.","pos":[2611,2734]},{"content":"In the tree, expand 'File\\Declaration\\Data\\Item\\Dim1'.","pos":[2741,2795]},{"content":"In the tree, select 'File\\Declaration\\Data\\Item\\Dim1\\property'.","pos":[2800,2863]},{"content":"Select Yes in the Excluded field.","pos":[2868,2901]},{"content":"In the tree, select 'File\\Declaration\\Data\\Item\\Dim1\\date'.","pos":[2906,2965]},{"content":"Select Yes in the Excluded field.","pos":[2970,3003]},{"content":"In the tree, select 'File\\Declaration\\Data\\Item\\Dim2'.","pos":[3008,3062]},{"content":"Select Yes in the Excluded field.","pos":[3067,3100]},{"content":"In the tree, expand 'File\\Declaration\\Data\\Item\\Dim2'.","pos":[3105,3159]},{"content":"In the tree, select 'File\\Declaration\\Data\\Item\\Dim2\\property'.","pos":[3164,3227]},{"content":"Select Yes in the Excluded field.","pos":[3232,3265]},{"content":"In the tree, select 'File\\Declaration\\Data\\Item\\Dim2\\code'.","pos":[3270,3329]},{"content":"Select Yes in the Excluded field.","pos":[3334,3367]},{"content":"In the tree, select 'File\\Declaration\\Data\\Item\\Dim3'.","pos":[3372,3426]},{"content":"Several format elements can have the same name.","pos":[3433,3480]},{"content":"For example, Dim.","pos":[3481,3498]},{"content":"You cannot explicitly recognize them when you use this format as a data source for archiving Intrastat reporting details, so you need to define the alternative names for these format elements.","pos":[3499,3691]},{"content":"In the Name field, type 'Amount'.","pos":[3699,3732]},{"content":"Amount","pos":[3739,3745]},{"content":"In the Multiplicity field, select 'Exactly one'.","pos":[3752,3800]},{"content":"In the tree, select 'File\\Declaration\\Data\\Item\\Dim4'.","pos":[3805,3859]},{"content":"In the Name field, type 'Item'.","pos":[3864,3895]},{"content":"Item","pos":[3902,3906]},{"content":"In the Multiplicity field, select 'Exactly one'.","pos":[3913,3961]},{"content":"In addition to the design format elements, the following Intrastat reporting details must be archived: unique record identification of each reported commodity item and name of the generated file.","pos":[3968,4163]},{"content":"Because this data will not be populated in the Intrastat report, you need to add the format that is related to these detail elements as data source items.","pos":[4164,4318]},{"content":"In the tree, select 'File\\Declaration\\Data'.","pos":[4325,4369]},{"content":"Click Add to open the drop dialog.","pos":[4374,4408]},{"content":"In the tree, select 'Data source\\Item'.","pos":[4413,4452]},{"content":"In the Name field, type 'File name'.","pos":[4457,4493]},{"content":"File name","pos":[4500,4509]},{"content":"In the Data type field, select 'String'.","pos":[4516,4556]},{"content":"Click OK.","pos":[4561,4570]},{"content":"In the tree, select 'File\\Declaration\\Data\\Item'.","pos":[4575,4624]},{"content":"Click Add Item.","pos":[4629,4644]},{"content":"In the Name field, type 'Commodity rec id'.","pos":[4649,4692]},{"content":"Commodity rec id","pos":[4699,4715]},{"content":"In the Data type field, select 'Int64'.","pos":[4722,4761]},{"content":"Click OK.","pos":[4766,4775]},{"content":"Click the Mapping tab.","pos":[4780,4802]},{"content":"In the tree, select 'File\\Declaration\\Data\\File name'.","pos":[4807,4861]},{"content":"Click Bind.","pos":[4866,4877]},{"content":"In the tree, expand 'model'.","pos":[4882,4910]},{"content":"In the tree, expand 'model\\Transactions'.","pos":[4915,4956]},{"content":"In the tree, select 'File\\Declaration\\Data\\Item =  model.Transactions\\Commodity rec id'.","pos":[4961,5049]},{"content":"In the tree, select 'model\\Transactions\\Commodity rec id'.","pos":[5054,5112]},{"content":"Click Bind.","pos":[5117,5128]},{"content":"Click Save.","pos":[5133,5144]},{"pos":[5149,5195],"content":"Modify format to memorize details of reporting","linkify":"Modify format to memorize details of reporting","nodes":[{"content":"Modify format to memorize details of reporting","pos":[0,46]}]},{"content":"Click Map format to model.","pos":[5199,5225]},{"content":"Click New.","pos":[5229,5239]},{"content":"In the Definition field, enter or select the ‘For application data update’ root item.","pos":[5243,5328]},{"content":"For application data update","pos":[5335,5362]},{"content":"In the Name field, type 'Mapping to update data'.","pos":[5368,5417]},{"content":"Mapping to update data","pos":[5424,5446]},{"content":"Click Save.","pos":[5452,5463]},{"content":"This mapping defines how the details of the Intrastat report are collected in the data model, the structure of which is specified by the selected root item ‘For application data update’.","pos":[5470,5656]},{"content":"These details, the model mapping with same root item ‘For application data update’, and the direction ‘To destination’ will be used for the application data update.","pos":[5657,5821]},{"content":"The application data update starts immediately after the outgoing Intrastat report is generated.","pos":[5822,5918]},{"content":"Note that the application data update can be skipped at run-time, but the data model must be empty (containing empty record list).","pos":[5919,6049]},{"content":"Click Designer.","pos":[6056,6071]},{"content":"Note that the outgoing Intrastat report format is added by default as a data source for this model mapping.","pos":[6078,6185]},{"content":"Bind elements of the designed report (presented as data source) to elements of the data model, which is filtered based on the selected model’s root item.","pos":[6194,6347]},{"content":"In the tree, expand 'Archive header'.","pos":[6353,6390]},{"content":"In the tree, expand 'Archive header\\Archive lines'.","pos":[6394,6445]},{"content":"In the tree, expand 'format'.","pos":[6449,6478]},{"content":"In the tree, expand 'format\\Declaration: XML Element(Declaration)'.","pos":[6483,6550]},{"content":"In the tree, expand 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)'.","pos":[6555,6652]},{"content":"In the tree, expand 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\Item: XML Element 0..* (Item)'.","pos":[6657,6784]},{"content":"In the tree, expand 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\Item: XML Element 0..* (Item)\\Dim3: XML Element 1..1 (Amount)'.","pos":[6789,6948]},{"content":"In the tree, expand 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\Item: XML Element 0..* (Item)\\Dim4: XML Element 1..1 (Item)'.","pos":[6953,7110]},{"content":"In the tree, select 'Archive header\\Number of lines'.","pos":[7115,7168]},{"content":"Click Edit.","pos":[7173,7184]},{"content":"In the tree, select 'List\\COUNT'.","pos":[7189,7222]},{"content":"Click Add function.","pos":[7227,7246]},{"content":"In the tree, expand 'format'.","pos":[7251,7280]},{"content":"In the tree, expand 'format\\Declaration: XML Element(Declaration)'.","pos":[7285,7352]},{"content":"In the tree, expand 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)'.","pos":[7357,7454]},{"content":"In the tree, select 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\Item: XML Element 0..* (Item)'.","pos":[7459,7586]},{"content":"Click Add data source.","pos":[7591,7613]},{"content":"In the Formula field, enter 'COUNT(format.Declaration.Data.Item)'.","pos":[7618,7684]},{"content":"COUNT(format.Declaration.Data.Item)","pos":[7691,7726]},{"content":"Click Save.","pos":[7733,7744]},{"content":"Close the page.","pos":[7749,7764]},{"content":"In the tree, select 'Archive header\\File name'.","pos":[7769,7816]},{"content":"In the tree, select 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\File name: Item String(File name)'.","pos":[7821,7952]},{"content":"Click Bind.","pos":[7957,7968]},{"content":"In the tree, select 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\Item: XML Element 0..* (Item)\\Dim4: XML Element 1..1 (Item)\\number: String(number)'.","pos":[7973,8153]},{"content":"In the tree, select 'Archive header\\Archive lines\\Item number'.","pos":[8158,8221]},{"content":"Click Bind.","pos":[8226,8237]},{"content":"In the tree, select 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\Item: XML Element 0..* (Item)\\Dim3: XML Element 1..1 (Amount)\\value: Numeric Real(value)'.","pos":[8242,8428]},{"content":"In the tree, select 'Archive header\\Archive lines\\Amount'.","pos":[8433,8491]},{"content":"Click Bind.","pos":[8496,8507]},{"content":"In the tree, select 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\Item: XML Element 0..* (Item)\\Commodity rec id: Item Int64(Commodity rec id)'.","pos":[8512,8686]},{"content":"In the tree, select 'Archive header\\Archive lines\\Commodity rec id'.","pos":[8691,8759]},{"content":"Click Bind.","pos":[8764,8775]},{"content":"In the tree, select 'Archive header\\Archive lines'.","pos":[8780,8831]},{"content":"In the tree, select 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)\\Item: XML Element 0..* (Item)'.","pos":[8836,8963]},{"content":"Click Bind.","pos":[8968,8979]},{"content":"In the tree, select 'Archive header'.","pos":[8984,9021]},{"content":"In the tree, select 'format\\Declaration: XML Element(Declaration)\\Data: XML Element 1..* (Data)'.","pos":[9026,9123]},{"content":"Click Bind.","pos":[9128,9139]},{"content":"Click Save.","pos":[9144,9155]},{"content":"Close the page.","pos":[9160,9175]},{"content":"Close the page.","pos":[9180,9195]},{"content":"Close the page.","pos":[9200,9215]}]}