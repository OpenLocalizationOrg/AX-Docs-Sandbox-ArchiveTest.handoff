{"content":"--- \n# required metadata \n \ntitle: Use computations to make the output for counting and summing for electronic reporting (ER)\ndescription: The following steps explain how a user assigned to the system administrator or electronic reporting developer role can configure an Electronic reporting (ER) format to do counting and summing based on data of the already generated text output. \nauthor: NickSelin\nmanager: AnnBe \nms.date: 10/28/2016\nms.topic: business-process \nms.prod:  \nms.service: dynamics-ax-applications \nms.technology:  \n \n# optional metadata \n \n# ms.search.form:   \naudience: Application User \n# ms.devlang:  \nms.reviewer: kfend\nms.search.scope: Operations \n# ms.tgt_pltfrm:  \n# ms.custom:  \nms.search.region: Global\n# ms.search.industry: \nms.author: nselin\nms.search.validFrom: 2016-06-30 \nms.dyn365.ops.version: Version 7.0.0 \n---\n# Use computations to make the output for counting and summing for electronic reporting (ER)\n\n[!include[task guide banner](../../includes/task-guide-banner.md)]\n\nThe following steps explain how a user assigned to the system administrator or electronic reporting developer role can configure an Electronic reporting (ER) format to do counting and summing based on data of the already generated text output. These steps can be performed in any company.\n\nTo complete these steps, you must first complete the steps in the “ER Configure format to do counting and summing (Part 2: Configure computations)” procedure.\n\nThis procedure is for a feature that was added in Dynamics 365 for Operations version 1611.\n\n\n## Configure this report to use counting and summing info\n1. Go to Organization administration > Workspaces > Electronic reporting.\n2. Click Reporting configurations.\n3. In the tree, expand 'Intrastat model'.\n4. In the tree, expand 'Intrastat model\\Intrastat (DE)'.\n5. In the tree, select 'Intrastat model\\Intrastat (DE)\\Intrastat (DE) with counting & summing'.\n6. Click Designer.\n7. Click the Mapping tab.\n8. Click Add root to open the drop dialog.\n    * Add a new data source to get the list of memorized blocks.  \n9. In the tree, select 'Functions\\Calculated field'.\n10. In the Name field, type '$BlocksList'.\n    * $BlocksList  \n11. Click Edit formula.\n12. In the tree, select 'Data collection functions\\COLLECTEDLIST'.\n13. Click Add function.\n14. Click Add data source.\n15. In the Formula field, enter 'COLLECTEDLIST('$BlockName', '.\n    * COLLECTEDLIST('$BlockName',  \n16. In the Formula field, enter 'COLLECTEDLIST('$BlockName', \"*\")'.\n    * COLLECTEDLIST('$BlockName', \"*\")  \n17. Click Save.\n    * The pattern “*” means that all blocks will be included to the list for this record.  \n18. Close the page.\n19. Click OK.\n20. Click the Format tab.\n21. In the tree, select 'Intrastat\\Data'.\n22. Click Add to open the drop dialog.\n23. In the tree, select 'Text\\Sequence'.\n24. In the Name field, type 'Totals by blocks'.\n    * Totals by blocks  \n25. In the Special characters field, select 'New line - Windows (CR LF)'.\n26. Click OK.\n27. In the tree, select 'Intrastat\\Data\\Totals by blocks'.\n28. Click Add to open the drop dialog.\n29. In the tree, select 'Text\\String'.\n30. In the Name field, type 'Block code'.\n    * Block code  \n31. Click OK.\n32. Click Add String.\n33. In the Name field, type 'Lines counting'.\n    * Lines counting  \n34. Click OK.\n35. Click Add String.\n36. In the Name field, type 'Total amount'.\n    * Total amount  \n37. Click OK.\n38. Click the Mapping tab.\n39. In the tree, select '$BlocksList'.\n40. Click Bind.\n    * Create a summary line for each memorized block.  \n41. Click the Format tab.\n42. In the tree, select 'Intrastat\\Data\\Totals by blocks\\Block code'.\n43. Click the Mapping tab.\n44. Click Edit formula.\n45. In the Formula field, enter '\"Block id: \" & '.\n    * \"Block id: \" &  \n46. In the tree, expand '$BlocksList'.\n47. In the tree, select '$BlocksList\\Value'.\n48. Click Add data source.\n49. Click Save.\n50. Close the page.\n51. Click the Format tab.\n52. In the tree, select 'Intrastat\\Data\\Totals by blocks\\Lines counting'.\n53. Click the Mapping tab.\n54. Click Edit formula.\n    * Create output for the number of lines for each block presented in this report.  \n55. In the Formula field, enter '\"Number of lines in this block: \" & '.\n    * \"Number of lines in this block: \" &  \n56. In the Formula field, enter '\"Number of lines in this block: \" & TEXT('.\n    * \"Number of lines in this block: \" & TEXT(  \n57. In the tree, select 'Data collection functions\\COUNTIFS'.\n58. Click Add function.\n59. Click Add data source.\n60. In the Formula field, enter '\"Number of lines in this block: \" & TEXT(COUNTIFS('$BlockName', '.\n    * \"Number of lines in this block: \" & TEXT(COUNTIFS('$BlockName',  \n61. In the tree, expand '$BlocksList'.\n62. In the tree, select '$BlocksList\\Value'.\n63. Click Add data source.\n64. In the Formula field, enter '\"Number of lines in this block: \" & TEXT(COUNTIFS('$BlockName', '$BlocksList'.Value, '.\n    * \"Number of lines in this block: \" & TEXT(COUNTIFS('$BlockName', '$BlocksList'.Value,  \n65. In the tree, select '$RecName'.\n66. Click Add data source.\n67. In the Formula field, enter '\"Number of lines in this block: \" & TEXT(COUNTIFS('$BlockName', '$BlocksList'.Value, '$RecName', \"*\"))'.\n    * \"Number of lines in this block: \" & TEXT(COUNTIFS('$BlockName', '$BlocksList'.Value, '$RecName', \"*\"))  \n68. Click Save.\n69. Close the page.\n70. Click the Format tab.\n71. In the tree, select 'Intrastat\\Data\\Totals by blocks\\Total amount'.\n72. Click the Mapping tab.\n73. Click Edit formula.\n    * Create output that will be the total of the invoiced amount for each block presented in this report.  \n74. In the Formula field, enter '\"Sum of invoiced amount: \" & TEXT(SUMIFS('$InvName', '$BlockName', '$BlocksList'.Value, '$RecName', \"*\"))'.\n    * \"Sum of invoiced amount: \" & TEXT(SUMIFS('$InvName', '$BlockName', '$BlocksList'.Value, '$RecName', \"*\"))  \n75. Click Save.\n76. Close the page.\n77. Click Save.\n78. Close the page.\n\n","nodes":[{"pos":[5,840],"embed":true,"restype":"x-metadata","content":"# required metadata \n \ntitle: Use computations to make the output for counting and summing for electronic reporting (ER)\ndescription: The following steps explain how a user assigned to the system administrator or electronic reporting developer role can configure an Electronic reporting (ER) format to do counting and summing based on data of the already generated text output. \nauthor: NickSelin\nmanager: AnnBe \nms.date: 10/28/2016\nms.topic: business-process \nms.prod:  \nms.service: dynamics-ax-applications \nms.technology:  \n \n# optional metadata \n \n# ms.search.form:   \naudience: Application User \n# ms.devlang:  \nms.reviewer: kfend\nms.search.scope: Operations \n# ms.tgt_pltfrm:  \n# ms.custom:  \nms.search.region: Global\n# ms.search.industry: \nms.author: nselin\nms.search.validFrom: 2016-06-30 \nms.dyn365.ops.version: Version 7.0.0 ","nodes":[{"content":"Use computations to make the output for counting and summing for electronic reporting (ER)","nodes":[{"pos":[0,90],"content":"Use computations to make the output for counting and summing for electronic reporting (ER)","nodes":[{"content":"Use computations to make the output for counting and summing for electronic reporting (ER)","pos":[0,90]}]}],"path":["title"],"extradata":"MT"},{"content":"The following steps explain how a user assigned to the system administrator or electronic reporting developer role can configure an Electronic reporting (ER) format to do counting and summing based on data of the already generated text output.","nodes":[{"pos":[0,243],"content":"The following steps explain how a user assigned to the system administrator or electronic reporting developer role can configure an Electronic reporting (ER) format to do counting and summing based on data of the already generated text output.","nodes":[{"content":"The following steps explain how a user assigned to the system administrator or electronic reporting developer role can configure an Electronic reporting (ER) format to do counting and summing based on data of the already generated text output.","pos":[0,243]}]}],"path":["description"],"extradata":"MT"}],"header":"# required metadata \n","yml":true},{"pos":[847,937],"content":"Use computations to make the output for counting and summing for electronic reporting (ER)","linkify":"Use computations to make the output for counting and summing for electronic reporting (ER)","nodes":[{"content":"Use computations to make the output for counting and summing for electronic reporting (ER)","pos":[0,90]}]},{"content":"The following steps explain how a user assigned to the system administrator or electronic reporting developer role can configure an Electronic reporting (ER) format to do counting and summing based on data of the already generated text output.","pos":[1007,1250]},{"content":"These steps can be performed in any company.","pos":[1251,1295]},{"content":"To complete these steps, you must first complete the steps in the “ER Configure format to do counting and summing (Part 2: Configure computations)” procedure.","pos":[1297,1455]},{"content":"This procedure is for a feature that was added in Dynamics 365 for Operations version 1611.","pos":[1457,1548]},{"pos":[1554,1608],"content":"Configure this report to use counting and summing info","linkify":"Configure this report to use counting and summing info","nodes":[{"content":"Configure this report to use counting and summing info","pos":[0,54]}]},{"content":"Go to Organization administration &gt; Workspaces &gt; Electronic reporting.","pos":[1612,1682],"source":"Go to Organization administration > Workspaces > Electronic reporting."},{"content":"Click Reporting configurations.","pos":[1686,1717]},{"content":"In the tree, expand 'Intrastat model'.","pos":[1721,1759]},{"content":"In the tree, expand 'Intrastat model\\Intrastat (DE)'.","pos":[1763,1816]},{"content":"In the tree, select 'Intrastat model\\Intrastat (DE)\\Intrastat (DE) with counting &amp; summing'.","pos":[1820,1912],"source":"In the tree, select 'Intrastat model\\Intrastat (DE)\\Intrastat (DE) with counting & summing'."},{"content":"Click Designer.","pos":[1916,1931]},{"content":"Click the Mapping tab.","pos":[1935,1957]},{"content":"Click Add root to open the drop dialog.","pos":[1961,2000]},{"content":"Add a new data source to get the list of memorized blocks.","pos":[2007,2065]},{"content":"In the tree, select 'Functions\\Calculated field'.","pos":[2071,2120]},{"content":"In the Name field, type '$BlocksList'.","pos":[2125,2163]},{"content":"$BlocksList","pos":[2170,2181]},{"content":"Click Edit formula.","pos":[2188,2207]},{"content":"In the tree, select 'Data collection functions\\COLLECTEDLIST'.","pos":[2212,2274]},{"content":"Click Add function.","pos":[2279,2298]},{"content":"Click Add data source.","pos":[2303,2325]},{"content":"In the Formula field, enter 'COLLECTEDLIST('$BlockName', '.","pos":[2330,2389]},{"content":"COLLECTEDLIST('$BlockName',","pos":[2396,2423]},{"content":"In the Formula field, enter 'COLLECTEDLIST('$BlockName', \"*\")'.","pos":[2430,2493]},{"content":"COLLECTEDLIST('$BlockName', \"*\")","pos":[2500,2532]},{"content":"Click Save.","pos":[2539,2550]},{"content":"The pattern “*” means that all blocks will be included to the list for this record.","pos":[2557,2640]},{"content":"Close the page.","pos":[2647,2662]},{"content":"Click OK.","pos":[2667,2676]},{"content":"Click the Format tab.","pos":[2681,2702]},{"content":"In the tree, select 'Intrastat\\Data'.","pos":[2707,2744]},{"content":"Click Add to open the drop dialog.","pos":[2749,2783]},{"content":"In the tree, select 'Text\\Sequence'.","pos":[2788,2824]},{"content":"In the Name field, type 'Totals by blocks'.","pos":[2829,2872]},{"content":"Totals by blocks","pos":[2879,2895]},{"content":"In the Special characters field, select 'New line - Windows (CR LF)'.","pos":[2902,2971]},{"content":"Click OK.","pos":[2976,2985]},{"content":"In the tree, select 'Intrastat\\Data\\Totals by blocks'.","pos":[2990,3044]},{"content":"Click Add to open the drop dialog.","pos":[3049,3083]},{"content":"In the tree, select 'Text\\String'.","pos":[3088,3122]},{"content":"In the Name field, type 'Block code'.","pos":[3127,3164]},{"content":"Block code","pos":[3171,3181]},{"content":"Click OK.","pos":[3188,3197]},{"content":"Click Add String.","pos":[3202,3219]},{"content":"In the Name field, type 'Lines counting'.","pos":[3224,3265]},{"content":"Lines counting","pos":[3272,3286]},{"content":"Click OK.","pos":[3293,3302]},{"content":"Click Add String.","pos":[3307,3324]},{"content":"In the Name field, type 'Total amount'.","pos":[3329,3368]},{"content":"Total amount","pos":[3375,3387]},{"content":"Click OK.","pos":[3394,3403]},{"content":"Click the Mapping tab.","pos":[3408,3430]},{"content":"In the tree, select '$BlocksList'.","pos":[3435,3469]},{"content":"Click Bind.","pos":[3474,3485]},{"content":"Create a summary line for each memorized block.","pos":[3492,3539]},{"content":"Click the Format tab.","pos":[3546,3567]},{"content":"In the tree, select 'Intrastat\\Data\\Totals by blocks\\Block code'.","pos":[3572,3637]},{"content":"Click the Mapping tab.","pos":[3642,3664]},{"content":"Click Edit formula.","pos":[3669,3688]},{"content":"In the Formula field, enter '\"Block id: \" &amp; '.","pos":[3693,3739],"source":"In the Formula field, enter '\"Block id: \" & '."},{"content":"\"Block id: \" &amp;","pos":[3746,3760],"source":"\"Block id: \" &"},{"content":"In the tree, expand '$BlocksList'.","pos":[3767,3801]},{"content":"In the tree, select '$BlocksList\\Value'.","pos":[3806,3846]},{"content":"Click Add data source.","pos":[3851,3873]},{"content":"Click Save.","pos":[3878,3889]},{"content":"Close the page.","pos":[3894,3909]},{"content":"Click the Format tab.","pos":[3914,3935]},{"content":"In the tree, select 'Intrastat\\Data\\Totals by blocks\\Lines counting'.","pos":[3940,4009]},{"content":"Click the Mapping tab.","pos":[4014,4036]},{"content":"Click Edit formula.","pos":[4041,4060]},{"content":"Create output for the number of lines for each block presented in this report.","pos":[4067,4145]},{"content":"In the Formula field, enter '\"Number of lines in this block: \" &amp; '.","pos":[4152,4219],"source":"In the Formula field, enter '\"Number of lines in this block: \" & '."},{"content":"\"Number of lines in this block: \" &amp;","pos":[4226,4261],"source":"\"Number of lines in this block: \" &"},{"content":"In the Formula field, enter '\"Number of lines in this block: \" &amp; TEXT('.","pos":[4268,4340],"source":"In the Formula field, enter '\"Number of lines in this block: \" & TEXT('."},{"content":"\"Number of lines in this block: \" &amp; TEXT(","pos":[4347,4388],"source":"\"Number of lines in this block: \" & TEXT("},{"content":"In the tree, select 'Data collection functions\\COUNTIFS'.","pos":[4395,4452]},{"content":"Click Add function.","pos":[4457,4476]},{"content":"Click Add data source.","pos":[4481,4503]},{"content":"In the Formula field, enter '\"Number of lines in this block: \" &amp; TEXT(COUNTIFS('$BlockName', '.","pos":[4508,4603],"source":"In the Formula field, enter '\"Number of lines in this block: \" & TEXT(COUNTIFS('$BlockName', '."},{"content":"\"Number of lines in this block: \" &amp; TEXT(COUNTIFS('$BlockName',","pos":[4610,4673],"source":"\"Number of lines in this block: \" & TEXT(COUNTIFS('$BlockName',"},{"content":"In the tree, expand '$BlocksList'.","pos":[4680,4714]},{"content":"In the tree, select '$BlocksList\\Value'.","pos":[4719,4759]},{"content":"Click Add data source.","pos":[4764,4786]},{"content":"In the Formula field, enter '\"Number of lines in this block: \" &amp; TEXT(COUNTIFS('$BlockName', '$BlocksList'.Value, '.","pos":[4791,4907],"source":"In the Formula field, enter '\"Number of lines in this block: \" & TEXT(COUNTIFS('$BlockName', '$BlocksList'.Value, '."},{"content":"\"Number of lines in this block: \" &amp; TEXT(COUNTIFS('$BlockName', '$BlocksList'.Value,","pos":[4914,4998],"source":"\"Number of lines in this block: \" & TEXT(COUNTIFS('$BlockName', '$BlocksList'.Value,"},{"content":"In the tree, select '$RecName'.","pos":[5005,5036]},{"content":"Click Add data source.","pos":[5041,5063]},{"content":"In the Formula field, enter '\"Number of lines in this block: \" &amp; TEXT(COUNTIFS('$BlockName', '$BlocksList'.Value, '$RecName', \"*\"))'.","pos":[5068,5201],"source":"In the Formula field, enter '\"Number of lines in this block: \" & TEXT(COUNTIFS('$BlockName', '$BlocksList'.Value, '$RecName', \"*\"))'."},{"content":"\"Number of lines in this block: \" &amp; TEXT(COUNTIFS('$BlockName', '$BlocksList'.Value, '$RecName', \"*\"))","pos":[5208,5310],"source":"\"Number of lines in this block: \" & TEXT(COUNTIFS('$BlockName', '$BlocksList'.Value, '$RecName', \"*\"))"},{"content":"Click Save.","pos":[5317,5328]},{"content":"Close the page.","pos":[5333,5348]},{"content":"Click the Format tab.","pos":[5353,5374]},{"content":"In the tree, select 'Intrastat\\Data\\Totals by blocks\\Total amount'.","pos":[5379,5446]},{"content":"Click the Mapping tab.","pos":[5451,5473]},{"content":"Click Edit formula.","pos":[5478,5497]},{"content":"Create output that will be the total of the invoiced amount for each block presented in this report.","pos":[5504,5604]},{"content":"In the Formula field, enter '\"Sum of invoiced amount: \" &amp; TEXT(SUMIFS('$InvName', '$BlockName', '$BlocksList'.Value, '$RecName', \"*\"))'.","pos":[5611,5747],"source":"In the Formula field, enter '\"Sum of invoiced amount: \" & TEXT(SUMIFS('$InvName', '$BlockName', '$BlocksList'.Value, '$RecName', \"*\"))'."},{"content":"\"Sum of invoiced amount: \" &amp; TEXT(SUMIFS('$InvName', '$BlockName', '$BlocksList'.Value, '$RecName', \"*\"))","pos":[5754,5859],"source":"\"Sum of invoiced amount: \" & TEXT(SUMIFS('$InvName', '$BlockName', '$BlocksList'.Value, '$RecName', \"*\"))"},{"content":"Click Save.","pos":[5866,5877]},{"content":"Close the page.","pos":[5882,5897]},{"content":"Click Save.","pos":[5902,5913]},{"content":"Close the page.","pos":[5918,5933]}]}