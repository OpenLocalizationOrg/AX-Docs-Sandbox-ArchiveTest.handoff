{"content":"---\n# required metadata\n\ntitle: Message center, message bar, and message details FAQ\ndescription: This topic describes the rich, powerful messaging system replaces the Infolog window that was used Microsoft Dynamics AX 2012.\nauthor: RobinARH\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: robinr\nms.search.scope: AX 7.0.0, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 50401\nms.assetid: ce9d2312-c02e-4649-a7e4-33c3a06dfbd4\nms.search.region: Global\n# ms.search.industry: \nms.author: tlefor\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Message center, message bar, and message details FAQ\n\n[!include[banner](../includes/banner.md)]\n\nThis topic describes the rich, powerful messaging system replaces the Infolog window that was used Microsoft Dynamics AX 2012.\n\nMicrosoft Dynamics AX 2012 uses an all-purpose window that opens to display a list of the most recently reported informational messages, warnings, or errors. This window is appropriately and generically named the Information Log or Infolog. Although the Infolog is a beneficial tool in some cases, its “one size fits all” approach was judged to be ineffective for differentiating the severity of messages and the need to interrupt the user. The richer, more powerful messaging system:\n\n-   Improved association of a message with its context\n-   Improved level of interruption (none, subtle, and interrupting)\n-   Improved clarity between types of messages\n-   A deterministic means of displaying the message\n\n## Should I show the user a notification, a warning, or an error?\nHistorically, the **info**, **warning** (**checkfailed**), and **error** statuses weren't always used consistently across scenarios. A message might be reported as a warning in one scenario but as an error in another scenario. When you're deciding which status to express, use these definitions:\n\n-   **Notification** – A notification informs the user about events that might or might not be related to the current user activity. A notification can be caused by a user action or a system event, or it can provide information from the program that might be useful. Typically, a notification doesn't require immediate user action. You notify the user by using the **info()** application programming interface (API).\n-   **Warning** – A warning alerts the user about a condition that might cause an issue in the future. Specifically, a warning is used for data that is in an incorrect state. Although any attempt to use this invalid data might produce an error, the fact that the current state of the data is incorrect isn’t an error condition. *Therefore, the user should be warned about the incorrect state of the data*. You express data validation issues by using the **warning()** or **checkfailed()** API.\n-   **Error** – An error alerts the user about a problem that has already occurred. A user action that has failed is an error condition. Errors can be *non-interrupting* (*passive*) or *interrupting*. In a non-interrupting error, users can perform other activities before they try to correct the issue. In an interrupting error, users can't proceed or complete the task until they correct the error condition. You express a passive (non-interrupting) error by using the **error()** API. You express an interrupting error by using the **box::** API.\n\n## How do I determine where my messages are shown?\nThe messaging system is *deterministic*. In other words, the messaging system uses the context of the call to determine the best way to show the message to the user. Messages are shown either in a message bar that appears at the top of pages or in the Message Center, which appears in the navigation bar. The location of the message depends on where in code the message is sent from.\n\n-   If the message is caused by a page action that is synchronous (that is, the user must wait for the result), the result is shown in a message bar on the current page. (The exception is a slider dialog that was closed immediately after the action was started. Messages for slider dialogs \"bubble up\" to the parent page.)\n-   If the message is caused by an action that is asynchronous (disconnected), and the user can continue to perform other tasks or even navigate to another page while that action is being processed, the result is shown in the Message Center.\n\n## How do I change my existing code to use the new messaging system?\n*In many cases, no changes are required.* The messaging framework was designed to innovate and maintain backward compatibility for many common scenarios. In some cases, the program might improve the wording of messages. Alternatively, the program might use **error()** instead of **warning()**, or **warning()** instead of **error()**, to better align with the usage guidance (warnings are for data that isn't valid, whereas errors are for failed actions). In other cases, you might decide that messages that appear on a slider dialog are more appropriate for the parent page.\n\n### Messaging that is used in validation\n\nIn Dynamics AX 2012, when a user enters data that is determined to be invalid or isn't found, the previous valid value is returned to the field, and focus moves off the page to a different window, the Infolog. If the user is doing \"heads-down\" data entry, he or she must then stop, move focus back to the field that had the invalid value, and type a correcting entry. Additionally, because the invalid value is cleared, even if the user transposed a single number or mistyped a single character, he or she must retype the whole value. The \"invalid value\" message remains on the screen, and the user must manually clear it. However, in the current version of Dynamics, the validation message (which uses the same API) appears in a message bar on the page itself. The invalid value remains but is flagged as invalid. The user can continue to enter data and can correct the validation issue at any point before the data is saved. When the validation issue is corrected, so that the message in the message bar is no longer valid, the messaging system removes the message.\n\n### Legacy API support: info(), warning()/checkfailed(), and error()\n\nThe legacy **info()**, **warning()**, and **error()** APIs are still supported. However, these APIs now sit on the framework's new messaging system, and their destination is deterministic. In summary, if the use of the API originates from a page, the message appears in a message bar on that same page. (Drop dialogs and slider dialogs are both considered pages.) The following illustration shows **info**, **warning**/**checkfailed**, and **error** message bars that correspond to page actions, or synchronous-authored messages that come from **info()**, **warning()**, and **error()**. \n\n[![Messaging\\_MessageBarTypes](./media/messaging_messagebartypes.jpg)](./media/messaging_messagebartypes.jpg) \n\n**Note:** If the messaging API is called from a slider dialog, but that slider dialog is closed before the message appears, the message is shown in a message bar on the slider dialog's parent page. If that slider dialog is closed before the message appears, and there is no parent page (that is, the parent is a workspace), the message is routed to the Message Center. The messaging API never fails to show a message. If an appropriate host page isn't found, the message is sent to the Message Center.\n\n## The Message() API for explicit add and remove messages\nThe messaging system supports the legacy validation message APIs (**info()**, **warning()**/**checkfailed()**, and **error()**), and deterministically routes messages either to a message bar or to the Message Center. The messaging system also clears message bar messages that are related to data validation when the validation is rerun. Additionally, the messaging system includes a new **Message()** API that lets developers explicitly add and remove messages. This API is useful for displaying informational messages about aspects of the user's experience that aren't necessarily related to data validation. In this case, the message should be shown when the current record is displayed. ![Messaging\\_SingleMessageBarInfo](./media/messaging_singlemessagebarinfo.jpg)\n\n    messageId = Message::Add(MessageSeverity::Info, \"The customer is marked as inactive\");\n\nThe message can then be cleared when a new record is shown on the page.\n\n    Message::Remove(messageId);\n\nThe following messaging types are supported: **MessageSeverity::Info**, **MessageSeverity::Warning**, and **MessageSeverity::Error**. Messages that use the **Message()** API are also deterministic. They can be routed to a message bar or the Message Center.\n\n## The messaging API and batch jobs(asynchronous/longrunning background tasks)\nIf **info()**, **warning()**/**checkfailed()**, or **error()** is called from an asynchronous process (for example, a batch job that uses SysOp), there is no page context to consider. Therefore, the message is routed to the Message Center. \n\n![Messaging\\_EmptyMessageCenter](./media/messaging_emptymessagecenter.jpg)\n\n### The Message Center\n\nThe Message Center can hold up to 500 messages. Messages are then cycled on a first in, first out basis.\n\n#### Why are asynchronous tasks messages sent to the Message Center?\n\nA (potentially) long-running task should not present a message bar to the user, because message bars at the top of a page are used to present information about the current page, not some background task that might have started hours earlier. In some cases, a user who has many background tasks running continues to navigate between pages while the tasks are being completed. Therefore, messages that are presented on the current page to notify the user about background tasks are easily overlooked or ignored. Therefore, by design, background tasks send their messages to the Message Center. When a new message appears in the Message Center, a notification informs the user, who might be waiting for the results of an asynchronous task.\n\n## Error: Should I interrupt the user?\nIf a task (batch job or other operation) fails, it's often appropriate to notify the user passively. Because the user can correct the issue and retry the operation at any time, he or she doesn't have to be notified immediately. In these cases, the **error()** API is appropriate, and the user doesn't receive an interrupting dialog. However, in other cases, the user can't proceed until the issue is corrected. For example, if the user tries to save a page that still has invalid data, the client interrupts the user by presenting an error dialog. In these cases, where it's more appropriate to interrupt the user by presenting a dialog, the **box::** API should be used. \n\n![Messaging\\_BoxAPI](./media/messaging_boxapi.jpg)\n\n## The Message Center – Messages from asynchronous tasks\nThe Message Center appears in the navigation pane. It contains messages that don't require any immediate action by the user and aren't required for the current task to continue. Typical examples include feedback from background processes such as a batch job or report completion. The Message Center can express **info**, **warning**, and **error** statuses. Before it's opened, the Message Center indicates the number of messages that have been received since last time that it was opened.\n\n## Message bars – Messages for synchronous tasks on the current page\nMessage bars are available on primary pages, and in drop dialogs and slider dialogs. Message bars are used primarily for data validation. They can also be used to communicate messages about the state of a page or data, such as messages that are used for date effectivity. Message bars can express **info**, **warning**, and **error** statuses. Message bars should not be used for messages that require the users’ immediate attention. A message bar appears when a message is first received, and must be used to communicate messages only about the current page. Messages that are sent to message bars are associated with the current page. Therefore, when the user navigates away from a page that includes message bars, those messages won't appear on the new page. However, if the user navigates back to the original page, the page's messages will once again appear. Include the following information in messages:\n\n-   The condition that generated the message.\n-   The result if the user continues without resolving the condition that generated the message.\n\n**Examples**\n\n-   This customer is marked as inactive.\n-   Customer validation has failed.\n-   The transaction on voucher do not balance.\n\n**Presentation** \n\n![Messaging\\_MessageBarTypes](./media/messaging_messagebartypes.jpg)\n\n## Message boxes – Errors and immediate notification (completed synchronous operations)\nUse message boxes to alert users about issues that require immediate attention. Because message boxes prevent the user from continuing until the message is read and dismissed, they should be used only for messages that the user can't handle later. Include the following information in error messages that appear in message boxes:\n\n-   The error that occurred.\n-   The cause of the error.\n-   Information about how to resolve the error.\n\nAn error message should include the following two components:\n\n-   **The main instruction** – This text appears in bold.\n-   **The message details** – This text appears below the main instruction.\n\n**Examples**\n\n-   You can’t delete the reference number because the reference number is used in version %1.\n-   You have insufficient rights to perform this export.\n-   The root folder for catalog import processing is not configured. Configure the root folder using the Vendor catalog import parameters form.\n\n**Presentation** \n\n![Messaging\\_BoxAPI](./media/messaging_boxapi.jpg) \n\nMessages of the **error** type block the user’s interaction by overlaying the current page with a modal “light box” that contains the message.\n\n## Messaging from dialogs and slider dialogs\nThe deterministic messaging system tries to send messages to the current page. However, not every call from a dialog or slider dialog is routed to that dialog or slider. In some cases, the messaging system sends the message to the parent page instead. This behavior can occur when the messaging system is called while the dialog or slider is being closed. In some cases, the messaging system can be called when the close process for the dialog or slider is started, but the client interrupts the close process for valid reasons. Therefore, there is a \"point of no return,\" after which the messaging system no longer tries to send a message to the dialog or slider, and instead sends the message to the parent page. When the user clicks the **OK** button on the form is entering its closing sequence, shown in the code example that follows.\n\n    closeOK()\n    {\n        // current form\n        super(); // calls close()\n        // parent or message center\n    }\n    Close()\n    {\n        // current form\n        super();// point of no return\n        // parent or message center\n    }\n\nIf the client calls **closeOK()** or **close()** directly, then the final result might be the page or the parent page.\n\n## Detailed, multiresult messaging that uses SetPrefix() and the Message details pane\nThe results of **SetPrefix()** don't actively interrupt the user. Instead, the results are collected and stored, and a message bar or a Message Center notification is presented to the user. This message bar or Message Center notification indicates that the related task has been completed, and that there might be messages for the user to review. The *notification of results* message uses the task's first call to **SetPrefix()** to frame the message. (This behavior resembles the behavior in Dynamics AX 2012, where the first call is the “title” of the results). In the following example, the text “Posting Results” comes from the first call to **SetPrefix()**. \n\n![Messaging\\_MessageDetailsMessageBar](./media/messaging_messagedetailsmessagebar.jpg) \n\nThe user can then click the **Message Details** link in the message bar to open the **Message details** pane. \n\n![Messaging\\_MessageDetailsPane](./media/messaging_messagedetailspane.jpg)\n\n## SetPrefix() – Creating a collection of related messages\nYou use **SetPrefix()** to create collections of related messages. This API is largely backward compatible but is presented in a non-interrupting manner. A results window isn't opened directly. Instead, the user is passively interrupted by the appearance of a message bar on the page that started the task that used the **SetPrefix()** API to group the result messages into a collection. The message bar that notifies the user about the existence of the message collection reflects the severity of the most critical message in the collection. For example, if the collection contains no errors or warnings, the message bar is of the **info** type. \n\n![Messaging\\_MessageDetailsMessageBar](./media/messaging_messagedetailsmessagebar.jpg) \n\nIf the collection contains one or more calls to **warning()**, the message bar is of the **warning** type. \n\n![Messaging\\_MessageDetailsWarningMessageBar](./media/messaging_messagedetailswarningmessagebar.jpg) \n\nIf the collection contains one or more calls to **error()**, the message bar is of the **error** type. \n\n![Messaging\\_MessageDetailsErrorMessageBar](./media/messaging_messagedetailserrormessagebar.jpg) \n\n**Example**\n\n    myMethod()\n    {\n        Setprefix(\"Posting Results\");\n        Setprefix(\"Invoice Account: DE-001);\n        Info(\"Invoice FTI-000002 has been posted);\n    }\n\n**Note:** If a collection contains only a parent and a single message, that single message is sent to a message bar, and no SetPrefix window is used.\n\n## SetPrefix() and asynchronous processes\nThe use of **SetPrefix()** is also deterministic. In other words, if you use **SetPrefix()**, and there is no page context (for example, an asynchronous batch operation), the notification of results is sent to the Message Center, which isn't associated with any page.\n\n\n\n","nodes":[{"pos":[4,732],"embed":true,"restype":"x-metadata","content":"# required metadata\n\ntitle: Message center, message bar, and message details FAQ\ndescription: This topic describes the rich, powerful messaging system replaces the Infolog window that was used Microsoft Dynamics AX 2012.\nauthor: RobinARH\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: robinr\nms.search.scope: AX 7.0.0, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 50401\nms.assetid: ce9d2312-c02e-4649-a7e4-33c3a06dfbd4\nms.search.region: Global\n# ms.search.industry: \nms.author: tlefor\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n","nodes":[{"content":"Message center, message bar, and message details FAQ","nodes":[{"pos":[0,52],"content":"Message center, message bar, and message details FAQ","nodes":[{"content":"Message center, message bar, and message details FAQ","pos":[0,52]}]}],"path":["title"],"extradata":"MT"},{"content":"This topic describes the rich, powerful messaging system replaces the Infolog window that was used Microsoft Dynamics AX 2012.","nodes":[{"pos":[0,126],"content":"This topic describes the rich, powerful messaging system replaces the Infolog window that was used Microsoft Dynamics AX 2012.","nodes":[{"content":"This topic describes the rich, powerful messaging system replaces the Infolog window that was used Microsoft Dynamics AX 2012.","pos":[0,126]}]}],"path":["description"],"extradata":"MT"}],"header":"# required metadata\n","yml":true},{"pos":[740,792],"content":"Message center, message bar, and message details FAQ","linkify":"Message center, message bar, and message details FAQ","nodes":[{"content":"Message center, message bar, and message details FAQ","pos":[0,52]}]},{"content":"This topic describes the rich, powerful messaging system replaces the Infolog window that was used Microsoft Dynamics AX 2012.","pos":[837,963]},{"content":"Microsoft Dynamics AX 2012 uses an all-purpose window that opens to display a list of the most recently reported informational messages, warnings, or errors.","pos":[965,1122]},{"content":"This window is appropriately and generically named the Information Log or Infolog.","pos":[1123,1205]},{"content":"Although the Infolog is a beneficial tool in some cases, its “one size fits all” approach was judged to be ineffective for differentiating the severity of messages and the need to interrupt the user.","pos":[1206,1405]},{"content":"The richer, more powerful messaging system:","pos":[1406,1449]},{"content":"Improved association of a message with its context","pos":[1455,1505]},{"content":"Improved level of interruption (none, subtle, and interrupting)","pos":[1510,1573]},{"content":"Improved clarity between types of messages","pos":[1578,1620]},{"content":"A deterministic means of displaying the message","pos":[1625,1672]},{"pos":[1677,1739],"content":"Should I show the user a notification, a warning, or an error?","linkify":"Should I show the user a notification, a warning, or an error?","nodes":[{"content":"Should I show the user a notification, a warning, or an error?","pos":[0,62]}]},{"content":"Historically, the <bpt id=\"p1\">**</bpt>info<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>warning<ept id=\"p2\">**</ept> (<bpt id=\"p3\">**</bpt>checkfailed<ept id=\"p3\">**</ept>), and <bpt id=\"p4\">**</bpt>error<ept id=\"p4\">**</ept> statuses weren't always used consistently across scenarios.","pos":[1740,1872],"source":"Historically, the **info**, **warning** (**checkfailed**), and **error** statuses weren't always used consistently across scenarios."},{"content":"A message might be reported as a warning in one scenario but as an error in another scenario.","pos":[1873,1966]},{"content":"When you're deciding which status to express, use these definitions:","pos":[1967,2035]},{"content":"<bpt id=\"p1\">**</bpt>Notification<ept id=\"p1\">**</ept> – A notification informs the user about events that might or might not be related to the current user activity.","pos":[2041,2169],"source":"**Notification** – A notification informs the user about events that might or might not be related to the current user activity."},{"content":"A notification can be caused by a user action or a system event, or it can provide information from the program that might be useful.","pos":[2170,2303]},{"content":"Typically, a notification doesn't require immediate user action.","pos":[2304,2368]},{"content":"You notify the user by using the <bpt id=\"p1\">**</bpt>info()<ept id=\"p1\">**</ept> application programming interface (API).","pos":[2369,2453],"source":" You notify the user by using the **info()** application programming interface (API)."},{"content":"<bpt id=\"p1\">**</bpt>Warning<ept id=\"p1\">**</ept> – A warning alerts the user about a condition that might cause an issue in the future.","pos":[2458,2556],"source":"**Warning** – A warning alerts the user about a condition that might cause an issue in the future."},{"content":"Specifically, a warning is used for data that is in an incorrect state.","pos":[2557,2628]},{"content":"Although any attempt to use this invalid data might produce an error, the fact that the current state of the data is incorrect isn’t an error condition.","pos":[2629,2781]},{"content":"<bpt id=\"p1\">*</bpt>Therefore, the user should be warned about the incorrect state of the data<ept id=\"p1\">*</ept>.","pos":[2782,2859],"source":"*Therefore, the user should be warned about the incorrect state of the data*."},{"content":"You express data validation issues by using the <bpt id=\"p1\">**</bpt>warning()<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>checkfailed()<ept id=\"p2\">**</ept> API.","pos":[2860,2947],"source":" You express data validation issues by using the **warning()** or **checkfailed()** API."},{"content":"<bpt id=\"p1\">**</bpt>Error<ept id=\"p1\">**</ept> – An error alerts the user about a problem that has already occurred.","pos":[2952,3031],"source":"**Error** – An error alerts the user about a problem that has already occurred."},{"content":"A user action that has failed is an error condition.","pos":[3032,3084]},{"content":"Errors can be <bpt id=\"p1\">*</bpt>non-interrupting<ept id=\"p1\">*</ept> (<bpt id=\"p2\">*</bpt>passive<ept id=\"p2\">*</ept>) or <bpt id=\"p3\">*</bpt>interrupting<ept id=\"p3\">*</ept>.","pos":[3085,3148],"source":" Errors can be *non-interrupting* (*passive*) or *interrupting*."},{"content":"In a non-interrupting error, users can perform other activities before they try to correct the issue.","pos":[3149,3250]},{"content":"In an interrupting error, users can't proceed or complete the task until they correct the error condition.","pos":[3251,3357]},{"content":"You express a passive (non-interrupting) error by using the <bpt id=\"p1\">**</bpt>error()<ept id=\"p1\">**</ept> API.","pos":[3358,3434],"source":" You express a passive (non-interrupting) error by using the **error()** API."},{"content":"You express an interrupting error by using the <bpt id=\"p1\">**</bpt>box::<ept id=\"p1\">**</ept> API.","pos":[3435,3496],"source":" You express an interrupting error by using the **box::** API."},{"pos":[3501,3548],"content":"How do I determine where my messages are shown?","linkify":"How do I determine where my messages are shown?","nodes":[{"content":"How do I determine where my messages are shown?","pos":[0,47]}]},{"content":"The messaging system is <bpt id=\"p1\">*</bpt>deterministic<ept id=\"p1\">*</ept>.","pos":[3549,3589],"source":"The messaging system is *deterministic*."},{"content":"In other words, the messaging system uses the context of the call to determine the best way to show the message to the user.","pos":[3590,3714]},{"content":"Messages are shown either in a message bar that appears at the top of pages or in the Message Center, which appears in the navigation bar.","pos":[3715,3853]},{"content":"The location of the message depends on where in code the message is sent from.","pos":[3854,3932]},{"content":"If the message is caused by a page action that is synchronous (that is, the user must wait for the result), the result is shown in a message bar on the current page.","pos":[3938,4103]},{"content":"(The exception is a slider dialog that was closed immediately after the action was started.","pos":[4104,4195]},{"content":"Messages for slider dialogs \"bubble up\" to the parent page.)","pos":[4196,4256]},{"content":"If the message is caused by an action that is asynchronous (disconnected), and the user can continue to perform other tasks or even navigate to another page while that action is being processed, the result is shown in the Message Center.","pos":[4261,4498]},{"pos":[4503,4568],"content":"How do I change my existing code to use the new messaging system?","linkify":"How do I change my existing code to use the new messaging system?","nodes":[{"content":"How do I change my existing code to use the new messaging system?","pos":[0,65]}]},{"content":"<bpt id=\"p1\">*</bpt>In many cases, no changes are required.<ept id=\"p1\">*</ept>","pos":[4569,4610],"source":"*In many cases, no changes are required.*"},{"content":"The messaging framework was designed to innovate and maintain backward compatibility for many common scenarios.","pos":[4611,4722]},{"content":"In some cases, the program might improve the wording of messages.","pos":[4723,4788]},{"content":"Alternatively, the program might use <bpt id=\"p1\">**</bpt>error()<ept id=\"p1\">**</ept> instead of <bpt id=\"p2\">**</bpt>warning()<ept id=\"p2\">**</ept>, or <bpt id=\"p3\">**</bpt>warning()<ept id=\"p3\">**</ept> instead of <bpt id=\"p4\">**</bpt>error()<ept id=\"p4\">**</ept>, to better align with the usage guidance (warnings are for data that isn't valid, whereas errors are for failed actions).","pos":[4789,5025],"source":" Alternatively, the program might use **error()** instead of **warning()**, or **warning()** instead of **error()**, to better align with the usage guidance (warnings are for data that isn't valid, whereas errors are for failed actions)."},{"content":"In other cases, you might decide that messages that appear on a slider dialog are more appropriate for the parent page.","pos":[5026,5145]},{"pos":[5151,5187],"content":"Messaging that is used in validation","linkify":"Messaging that is used in validation","nodes":[{"content":"Messaging that is used in validation","pos":[0,36]}]},{"content":"In Dynamics AX 2012, when a user enters data that is determined to be invalid or isn't found, the previous valid value is returned to the field, and focus moves off the page to a different window, the Infolog.","pos":[5189,5398]},{"content":"If the user is doing \"heads-down\" data entry, he or she must then stop, move focus back to the field that had the invalid value, and type a correcting entry.","pos":[5399,5556]},{"content":"Additionally, because the invalid value is cleared, even if the user transposed a single number or mistyped a single character, he or she must retype the whole value.","pos":[5557,5723]},{"content":"The \"invalid value\" message remains on the screen, and the user must manually clear it.","pos":[5724,5811]},{"content":"However, in the current version of Dynamics, the validation message (which uses the same API) appears in a message bar on the page itself.","pos":[5812,5950]},{"content":"The invalid value remains but is flagged as invalid.","pos":[5951,6003]},{"content":"The user can continue to enter data and can correct the validation issue at any point before the data is saved.","pos":[6004,6115]},{"content":"When the validation issue is corrected, so that the message in the message bar is no longer valid, the messaging system removes the message.","pos":[6116,6256]},{"pos":[6262,6326],"content":"Legacy API support: info(), warning()/checkfailed(), and error()","linkify":"Legacy API support: info(), warning()/checkfailed(), and error()","nodes":[{"content":"Legacy API support: info(), warning()/checkfailed(), and error()","pos":[0,64]}]},{"content":"The legacy <bpt id=\"p1\">**</bpt>info()<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>warning()<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>error()<ept id=\"p3\">**</ept> APIs are still supported.","pos":[6328,6407],"source":"The legacy **info()**, **warning()**, and **error()** APIs are still supported."},{"content":"However, these APIs now sit on the framework's new messaging system, and their destination is deterministic.","pos":[6408,6516]},{"content":"In summary, if the use of the API originates from a page, the message appears in a message bar on that same page.","pos":[6517,6630]},{"content":"(Drop dialogs and slider dialogs are both considered pages.) The following illustration shows <bpt id=\"p1\">**</bpt>info<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>warning<ept id=\"p2\">**</ept><ph id=\"ph1\">/</ph><bpt id=\"p3\">**</bpt>checkfailed<ept id=\"p3\">**</ept>, and <bpt id=\"p4\">**</bpt>error<ept id=\"p4\">**</ept> message bars that correspond to page actions, or synchronous-authored messages that come from <bpt id=\"p5\">**</bpt>info()<ept id=\"p5\">**</ept>, <bpt id=\"p6\">**</bpt>warning()<ept id=\"p6\">**</ept>, and <bpt id=\"p7\">**</bpt>error()<ept id=\"p7\">**</ept>.","pos":[6631,6915],"source":" (Drop dialogs and slider dialogs are both considered pages.) The following illustration shows **info**, **warning**/**checkfailed**, and **error** message bars that correspond to page actions, or synchronous-authored messages that come from **info()**, **warning()**, and **error()**."},{"pos":[6918,7027],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Messaging<ph id=\"ph2\">\\_</ph>MessageBarTypes<ept id=\"p1\">](./media/messaging_messagebartypes.jpg)](./media/messaging_messagebartypes.jpg)</ept>","source":"[![Messaging\\_MessageBarTypes](./media/messaging_messagebartypes.jpg)](./media/messaging_messagebartypes.jpg)"},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> If the messaging API is called from a slider dialog, but that slider dialog is closed before the message appears, the message is shown in a message bar on the slider dialog's parent page.","pos":[7030,7227],"source":"**Note:** If the messaging API is called from a slider dialog, but that slider dialog is closed before the message appears, the message is shown in a message bar on the slider dialog's parent page."},{"content":"If that slider dialog is closed before the message appears, and there is no parent page (that is, the parent is a workspace), the message is routed to the Message Center.","pos":[7228,7398]},{"content":"The messaging API never fails to show a message.","pos":[7399,7447]},{"content":"If an appropriate host page isn't found, the message is sent to the Message Center.","pos":[7448,7531]},{"pos":[7536,7590],"content":"The Message() API for explicit add and remove messages","linkify":"The Message() API for explicit add and remove messages","nodes":[{"content":"The Message() API for explicit add and remove messages","pos":[0,54]}]},{"content":"The messaging system supports the legacy validation message APIs (<bpt id=\"p1\">**</bpt>info()<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>warning()<ept id=\"p2\">**</ept><ph id=\"ph1\">/</ph><bpt id=\"p3\">**</bpt>checkfailed()<ept id=\"p3\">**</ept>, and <bpt id=\"p4\">**</bpt>error()<ept id=\"p4\">**</ept>), and deterministically routes messages either to a message bar or to the Message Center.","pos":[7591,7807],"source":"The messaging system supports the legacy validation message APIs (**info()**, **warning()**/**checkfailed()**, and **error()**), and deterministically routes messages either to a message bar or to the Message Center."},{"content":"The messaging system also clears message bar messages that are related to data validation when the validation is rerun.","pos":[7808,7927]},{"content":"Additionally, the messaging system includes a new <bpt id=\"p1\">**</bpt>Message()<ept id=\"p1\">**</ept> API that lets developers explicitly add and remove messages.","pos":[7928,8052],"source":" Additionally, the messaging system includes a new **Message()** API that lets developers explicitly add and remove messages."},{"content":"This API is useful for displaying informational messages about aspects of the user's experience that aren't necessarily related to data validation.","pos":[8053,8200]},{"content":"In this case, the message should be shown when the current record is displayed.","pos":[8201,8280]},{"content":"<ph id=\"ph1\">![</ph>Messaging<ph id=\"ph2\">\\_</ph>SingleMessageBarInfo<ph id=\"ph3\">](./media/messaging_singlemessagebarinfo.jpg)</ph>","pos":[8281,8359],"source":"![Messaging\\_SingleMessageBarInfo](./media/messaging_singlemessagebarinfo.jpg)"},{"content":"The message can then be cleared when a new record is shown on the page.","pos":[8453,8524]},{"content":"The following messaging types are supported: <bpt id=\"p1\">**</bpt>MessageSeverity::Info<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>MessageSeverity::Warning<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>MessageSeverity::Error<ept id=\"p3\">**</ept>.","pos":[8559,8692],"source":"The following messaging types are supported: **MessageSeverity::Info**, **MessageSeverity::Warning**, and **MessageSeverity::Error**."},{"content":"Messages that use the <bpt id=\"p1\">**</bpt>Message()<ept id=\"p1\">**</ept> API are also deterministic.","pos":[8693,8756],"source":" Messages that use the **Message()** API are also deterministic."},{"content":"They can be routed to a message bar or the Message Center.","pos":[8757,8815]},{"pos":[8820,8895],"content":"The messaging API and batch jobs(asynchronous/longrunning background tasks)","linkify":"The messaging API and batch jobs(asynchronous/longrunning background tasks)","nodes":[{"content":"The messaging API and batch jobs(asynchronous/longrunning background tasks)","pos":[0,75]}]},{"content":"If <bpt id=\"p1\">**</bpt>info()<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>warning()<ept id=\"p2\">**</ept><ph id=\"ph1\">/</ph><bpt id=\"p3\">**</bpt>checkfailed()<ept id=\"p3\">**</ept>, or <bpt id=\"p4\">**</bpt>error()<ept id=\"p4\">**</ept> is called from an asynchronous process (for example, a batch job that uses SysOp), there is no page context to consider.","pos":[8896,9079],"source":"If **info()**, **warning()**/**checkfailed()**, or **error()** is called from an asynchronous process (for example, a batch job that uses SysOp), there is no page context to consider."},{"content":"Therefore, the message is routed to the Message Center.","pos":[9080,9135]},{"content":"Messaging<ph id=\"ph1\">\\_</ph>EmptyMessageCenter","pos":[9140,9169],"source":"Messaging\\_EmptyMessageCenter"},{"pos":[9218,9236],"content":"The Message Center","linkify":"The Message Center","nodes":[{"content":"The Message Center","pos":[0,18]}]},{"content":"The Message Center can hold up to 500 messages.","pos":[9238,9285]},{"content":"Messages are then cycled on a first in, first out basis.","pos":[9286,9342]},{"pos":[9349,9412],"content":"Why are asynchronous tasks messages sent to the Message Center?","linkify":"Why are asynchronous tasks messages sent to the Message Center?","nodes":[{"content":"Why are asynchronous tasks messages sent to the Message Center?","pos":[0,63]}]},{"content":"A (potentially) long-running task should not present a message bar to the user, because message bars at the top of a page are used to present information about the current page, not some background task that might have started hours earlier.","pos":[9414,9655]},{"content":"In some cases, a user who has many background tasks running continues to navigate between pages while the tasks are being completed.","pos":[9656,9788]},{"content":"Therefore, messages that are presented on the current page to notify the user about background tasks are easily overlooked or ignored.","pos":[9789,9923]},{"content":"Therefore, by design, background tasks send their messages to the Message Center.","pos":[9924,10005]},{"content":"When a new message appears in the Message Center, a notification informs the user, who might be waiting for the results of an asynchronous task.","pos":[10006,10150]},{"pos":[10155,10190],"content":"Error: Should I interrupt the user?","linkify":"Error: Should I interrupt the user?","nodes":[{"content":"Error: Should I interrupt the user?","pos":[0,35]}]},{"content":"If a task (batch job or other operation) fails, it's often appropriate to notify the user passively.","pos":[10191,10291]},{"content":"Because the user can correct the issue and retry the operation at any time, he or she doesn't have to be notified immediately.","pos":[10292,10418]},{"content":"In these cases, the <bpt id=\"p1\">**</bpt>error()<ept id=\"p1\">**</ept> API is appropriate, and the user doesn't receive an interrupting dialog.","pos":[10419,10523],"source":" In these cases, the **error()** API is appropriate, and the user doesn't receive an interrupting dialog."},{"content":"However, in other cases, the user can't proceed until the issue is corrected.","pos":[10524,10601]},{"content":"For example, if the user tries to save a page that still has invalid data, the client interrupts the user by presenting an error dialog.","pos":[10602,10738]},{"content":"In these cases, where it's more appropriate to interrupt the user by presenting a dialog, the <bpt id=\"p1\">**</bpt>box::<ept id=\"p1\">**</ept> API should be used.","pos":[10739,10862],"source":" In these cases, where it's more appropriate to interrupt the user by presenting a dialog, the **box::** API should be used."},{"content":"Messaging<ph id=\"ph1\">\\_</ph>BoxAPI","pos":[10867,10884],"source":"Messaging\\_BoxAPI"},{"pos":[10920,10973],"content":"The Message Center – Messages from asynchronous tasks","linkify":"The Message Center – Messages from asynchronous tasks","nodes":[{"content":"The Message Center – Messages from asynchronous tasks","pos":[0,53]}]},{"content":"The Message Center appears in the navigation pane.","pos":[10974,11024]},{"content":"It contains messages that don't require any immediate action by the user and aren't required for the current task to continue.","pos":[11025,11151]},{"content":"Typical examples include feedback from background processes such as a batch job or report completion.","pos":[11152,11253]},{"content":"The Message Center can express <bpt id=\"p1\">**</bpt>info<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>warning<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>error<ept id=\"p3\">**</ept> statuses.","pos":[11254,11331],"source":" The Message Center can express **info**, **warning**, and **error** statuses."},{"content":"Before it's opened, the Message Center indicates the number of messages that have been received since last time that it was opened.","pos":[11332,11463]},{"pos":[11468,11533],"content":"Message bars – Messages for synchronous tasks on the current page","linkify":"Message bars – Messages for synchronous tasks on the current page","nodes":[{"content":"Message bars – Messages for synchronous tasks on the current page","pos":[0,65]}]},{"content":"Message bars are available on primary pages, and in drop dialogs and slider dialogs.","pos":[11534,11618]},{"content":"Message bars are used primarily for data validation.","pos":[11619,11671]},{"content":"They can also be used to communicate messages about the state of a page or data, such as messages that are used for date effectivity.","pos":[11672,11805]},{"content":"Message bars can express <bpt id=\"p1\">**</bpt>info<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>warning<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>error<ept id=\"p3\">**</ept> statuses.","pos":[11806,11877],"source":" Message bars can express **info**, **warning**, and **error** statuses."},{"content":"Message bars should not be used for messages that require the users’ immediate attention.","pos":[11878,11967]},{"content":"A message bar appears when a message is first received, and must be used to communicate messages only about the current page.","pos":[11968,12093]},{"content":"Messages that are sent to message bars are associated with the current page.","pos":[12094,12170]},{"content":"Therefore, when the user navigates away from a page that includes message bars, those messages won't appear on the new page.","pos":[12171,12295]},{"content":"However, if the user navigates back to the original page, the page's messages will once again appear.","pos":[12296,12397]},{"content":"Include the following information in messages:","pos":[12398,12444]},{"content":"The condition that generated the message.","pos":[12450,12491]},{"content":"The result if the user continues without resolving the condition that generated the message.","pos":[12496,12588]},{"pos":[12590,12602],"content":"<bpt id=\"p1\">**</bpt>Examples<ept id=\"p1\">**</ept>","source":"**Examples**"},{"content":"This customer is marked as inactive.","pos":[12608,12644]},{"content":"Customer validation has failed.","pos":[12649,12680]},{"content":"The transaction on voucher do not balance.","pos":[12685,12727]},{"pos":[12729,12745],"content":"<bpt id=\"p1\">**</bpt>Presentation<ept id=\"p1\">**</ept>","source":"**Presentation**"},{"content":"Messaging<ph id=\"ph1\">\\_</ph>MessageBarTypes","pos":[12750,12776],"source":"Messaging\\_MessageBarTypes"},{"pos":[12821,12905],"content":"Message boxes – Errors and immediate notification (completed synchronous operations)","linkify":"Message boxes – Errors and immediate notification (completed synchronous operations)","nodes":[{"content":"Message boxes – Errors and immediate notification (completed synchronous operations)","pos":[0,84]}]},{"content":"Use message boxes to alert users about issues that require immediate attention.","pos":[12906,12985]},{"content":"Because message boxes prevent the user from continuing until the message is read and dismissed, they should be used only for messages that the user can't handle later.","pos":[12986,13153]},{"content":"Include the following information in error messages that appear in message boxes:","pos":[13154,13235]},{"content":"The error that occurred.","pos":[13241,13265]},{"content":"The cause of the error.","pos":[13270,13293]},{"content":"Information about how to resolve the error.","pos":[13298,13341]},{"content":"An error message should include the following two components:","pos":[13343,13404]},{"pos":[13410,13463],"content":"<bpt id=\"p1\">**</bpt>The main instruction<ept id=\"p1\">**</ept> – This text appears in bold.","source":"**The main instruction** – This text appears in bold."},{"pos":[13468,13539],"content":"<bpt id=\"p1\">**</bpt>The message details<ept id=\"p1\">**</ept> – This text appears below the main instruction.","source":"**The message details** – This text appears below the main instruction."},{"pos":[13541,13553],"content":"<bpt id=\"p1\">**</bpt>Examples<ept id=\"p1\">**</ept>","source":"**Examples**"},{"content":"You can’t delete the reference number because the reference number is used in version %1.","pos":[13559,13648]},{"content":"You have insufficient rights to perform this export.","pos":[13653,13705]},{"content":"The root folder for catalog import processing is not configured.","pos":[13710,13774]},{"content":"Configure the root folder using the Vendor catalog import parameters form.","pos":[13775,13849]},{"pos":[13851,13867],"content":"<bpt id=\"p1\">**</bpt>Presentation<ept id=\"p1\">**</ept>","source":"**Presentation**"},{"content":"Messaging<ph id=\"ph1\">\\_</ph>BoxAPI","pos":[13872,13889],"source":"Messaging\\_BoxAPI"},{"pos":[13923,14065],"content":"Messages of the <bpt id=\"p1\">**</bpt>error<ept id=\"p1\">**</ept> type block the user’s interaction by overlaying the current page with a modal “light box” that contains the message.","source":"Messages of the **error** type block the user’s interaction by overlaying the current page with a modal “light box” that contains the message."},{"pos":[14070,14111],"content":"Messaging from dialogs and slider dialogs","linkify":"Messaging from dialogs and slider dialogs","nodes":[{"content":"Messaging from dialogs and slider dialogs","pos":[0,41]}]},{"content":"The deterministic messaging system tries to send messages to the current page.","pos":[14112,14190]},{"content":"However, not every call from a dialog or slider dialog is routed to that dialog or slider.","pos":[14191,14281]},{"content":"In some cases, the messaging system sends the message to the parent page instead.","pos":[14282,14363]},{"content":"This behavior can occur when the messaging system is called while the dialog or slider is being closed.","pos":[14364,14467]},{"content":"In some cases, the messaging system can be called when the close process for the dialog or slider is started, but the client interrupts the close process for valid reasons.","pos":[14468,14640]},{"content":"Therefore, there is a \"point of no return,\" after which the messaging system no longer tries to send a message to the dialog or slider, and instead sends the message to the parent page.","pos":[14641,14826]},{"content":"When the user clicks the <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> button on the form is entering its closing sequence, shown in the code example that follows.","pos":[14827,14951],"source":" When the user clicks the **OK** button on the form is entering its closing sequence, shown in the code example that follows."},{"pos":[15196,15314],"content":"If the client calls <bpt id=\"p1\">**</bpt>closeOK()<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>close()<ept id=\"p2\">**</ept> directly, then the final result might be the page or the parent page.","source":"If the client calls **closeOK()** or **close()** directly, then the final result might be the page or the parent page."},{"pos":[15319,15401],"content":"Detailed, multiresult messaging that uses SetPrefix() and the Message details pane","linkify":"Detailed, multiresult messaging that uses SetPrefix() and the Message details pane","nodes":[{"content":"Detailed, multiresult messaging that uses SetPrefix() and the Message details pane","pos":[0,82]}]},{"content":"The results of <bpt id=\"p1\">**</bpt>SetPrefix()<ept id=\"p1\">**</ept> don't actively interrupt the user.","pos":[15402,15467],"source":"The results of **SetPrefix()** don't actively interrupt the user."},{"content":"Instead, the results are collected and stored, and a message bar or a Message Center notification is presented to the user.","pos":[15468,15591]},{"content":"This message bar or Message Center notification indicates that the related task has been completed, and that there might be messages for the user to review.","pos":[15592,15748]},{"content":"The <bpt id=\"p1\">*</bpt>notification of results<ept id=\"p1\">*</ept> message uses the task's first call to <bpt id=\"p2\">**</bpt>SetPrefix()<ept id=\"p2\">**</ept> to frame the message.","pos":[15749,15854],"source":" The *notification of results* message uses the task's first call to **SetPrefix()** to frame the message."},{"content":"(This behavior resembles the behavior in Dynamics AX 2012, where the first call is the “title” of the results).","pos":[15855,15966]},{"content":"In the following example, the text “Posting Results” comes from the first call to <bpt id=\"p1\">**</bpt>SetPrefix()<ept id=\"p1\">**</ept>.","pos":[15967,16065],"source":" In the following example, the text “Posting Results” comes from the first call to **SetPrefix()**."},{"content":"Messaging<ph id=\"ph1\">\\_</ph>MessageDetailsMessageBar","pos":[16070,16105],"source":"Messaging\\_MessageDetailsMessageBar"},{"pos":[16157,16266],"content":"The user can then click the <bpt id=\"p1\">**</bpt>Message Details<ept id=\"p1\">**</ept> link in the message bar to open the <bpt id=\"p2\">**</bpt>Message details<ept id=\"p2\">**</ept> pane.","source":"The user can then click the **Message Details** link in the message bar to open the **Message details** pane."},{"content":"Messaging<ph id=\"ph1\">\\_</ph>MessageDetailsPane","pos":[16271,16300],"source":"Messaging\\_MessageDetailsPane"},{"pos":[16348,16403],"content":"SetPrefix() – Creating a collection of related messages","linkify":"SetPrefix() – Creating a collection of related messages","nodes":[{"content":"SetPrefix() – Creating a collection of related messages","pos":[0,55]}]},{"content":"You use <bpt id=\"p1\">**</bpt>SetPrefix()<ept id=\"p1\">**</ept> to create collections of related messages.","pos":[16404,16470],"source":"You use **SetPrefix()** to create collections of related messages."},{"content":"This API is largely backward compatible but is presented in a non-interrupting manner.","pos":[16471,16557]},{"content":"A results window isn't opened directly.","pos":[16558,16597]},{"content":"Instead, the user is passively interrupted by the appearance of a message bar on the page that started the task that used the <bpt id=\"p1\">**</bpt>SetPrefix()<ept id=\"p1\">**</ept> API to group the result messages into a collection.","pos":[16598,16791],"source":" Instead, the user is passively interrupted by the appearance of a message bar on the page that started the task that used the **SetPrefix()** API to group the result messages into a collection."},{"content":"The message bar that notifies the user about the existence of the message collection reflects the severity of the most critical message in the collection.","pos":[16792,16946]},{"content":"For example, if the collection contains no errors or warnings, the message bar is of the <bpt id=\"p1\">**</bpt>info<ept id=\"p1\">**</ept> type.","pos":[16947,17050],"source":" For example, if the collection contains no errors or warnings, the message bar is of the **info** type."},{"content":"Messaging<ph id=\"ph1\">\\_</ph>MessageDetailsMessageBar","pos":[17055,17090],"source":"Messaging\\_MessageDetailsMessageBar"},{"pos":[17142,17248],"content":"If the collection contains one or more calls to <bpt id=\"p1\">**</bpt>warning()<ept id=\"p1\">**</ept>, the message bar is of the <bpt id=\"p2\">**</bpt>warning<ept id=\"p2\">**</ept> type.","source":"If the collection contains one or more calls to **warning()**, the message bar is of the **warning** type."},{"content":"Messaging<ph id=\"ph1\">\\_</ph>MessageDetailsWarningMessageBar","pos":[17253,17295],"source":"Messaging\\_MessageDetailsWarningMessageBar"},{"pos":[17354,17456],"content":"If the collection contains one or more calls to <bpt id=\"p1\">**</bpt>error()<ept id=\"p1\">**</ept>, the message bar is of the <bpt id=\"p2\">**</bpt>error<ept id=\"p2\">**</ept> type.","source":"If the collection contains one or more calls to **error()**, the message bar is of the **error** type."},{"content":"Messaging<ph id=\"ph1\">\\_</ph>MessageDetailsErrorMessageBar","pos":[17461,17501],"source":"Messaging\\_MessageDetailsErrorMessageBar"},{"pos":[17558,17569],"content":"<bpt id=\"p1\">**</bpt>Example<ept id=\"p1\">**</ept>","source":"**Example**"},{"pos":[17733,17882],"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> If a collection contains only a parent and a single message, that single message is sent to a message bar, and no SetPrefix window is used.","source":"**Note:** If a collection contains only a parent and a single message, that single message is sent to a message bar, and no SetPrefix window is used."},{"pos":[17887,17925],"content":"SetPrefix() and asynchronous processes","linkify":"SetPrefix() and asynchronous processes","nodes":[{"content":"SetPrefix() and asynchronous processes","pos":[0,38]}]},{"content":"The use of <bpt id=\"p1\">**</bpt>SetPrefix()<ept id=\"p1\">**</ept> is also deterministic.","pos":[17926,17975],"source":"The use of **SetPrefix()** is also deterministic."},{"content":"In other words, if you use <bpt id=\"p1\">**</bpt>SetPrefix()<ept id=\"p1\">**</ept>, and there is no page context (for example, an asynchronous batch operation), the notification of results is sent to the Message Center, which isn't associated with any page.","pos":[17976,18193],"source":" In other words, if you use **SetPrefix()**, and there is no page context (for example, an asynchronous batch operation), the notification of results is sent to the Message Center, which isn't associated with any page."}]}