{"content":"---\n# required metadata\n\ntitle: Custom designs for business documents\ndescription: This topic shows how to create a custom report design for an existing application business document by using a pure extension model. \nauthor: sericks007\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: robinr\nms.search.scope: Operations, Platform, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 266574\nms.assetid: fba7faa3-716b-4adf-ab3e-8573f3614894\nms.search.region: Global\n# ms.search.industry: \nms.author: tjvass\nms.search.validFrom: 2016-11-30\nms.dyn365.ops.version: Platform update 3\n\n---\n\n# Custom designs for business documents\n\n[!include[banner](../includes/banner.md)]\n\n\nThis topic shows how to create a custom report design for an existing application business document by using a pure extension model. \n\nMicrosoft Dynamics 365 for Finance and Operations includes an expanded set of tools to support custom solutions. This topic focuses on the steps for creating a custom report design for an existing application business document by using a pure extension model. Follow the steps later in this topic to associate a custom report design with an instance of an application document. When you've finished, users can configure Print management settings to select the custom design whenever it's appropriate, based on transaction details. The following illustration shows a typical application customization.[![extendingprintmgt](./media/extendingprintmgt1.png)](./media/extendingprintmgt1.png)  \n\n## What's important to know?\nHere are some important points that you should be aware of before you apply this solution:\n\n-   Print management settings are scoped to the active legal entity. Custom designs can be associated with one or more Print management settings.\n-   Standard report designs continue to be available alongside custom solutions. Use Print management settings to select the appropriate design, based on transaction details.\n-   If you introduce a business document for a custom business process, more work is required. For more information about how to create a custom business document solution, see the [Print Management Integration Guide](https://www.microsoft.com/en-us/download/details.aspx?id=36049).\n\n## Customize a business document\nThe following walkthrough shows the process of introducing a custom report design for an existing application business document and then using Print management to select the new design. The solution includes a custom design definition for the **Sales confirmation** report that is provided in the standard application as part of the Application Suite model. The application customizations will be defined in an extension model.\n\n1.  **Create a new model for your application customizations.** For more information about extension models, see [Customization: Overlayering and extensions](..\\extensibility\\customization-overlayering-extensions.md). For this example, you add a model that is named **Application Suite Extensions**, and that references the Application Suite, Application Platform, and Application Foundation packages.\n2.  **Create a new project in Microsoft Visual Studio.** Make sure that the project is associated with your extension model. The following illustration shows the project settings. [![Project settings in Visual Studio](./media/app-extension-vs-project-settings.png)](./media/app-extension-vs-project-settings.png)\n3.  **Create a custom report design for the business document.** You must make sure that your custom solution consumes the correct report data contract. Find the existing Application Suite report in Application Explorer. This report is named **SalesConfirm**. Right-click it, and then click **Duplicate in project** to create the custom solution.\n4.  **Rename the report so that it has a meaningful name.** For this example, name the custom report **SalesConfirmExt** to distinguish it from the standard solution. Compile the project, and deploy the report to verify that the changes have no errors.\n5.  **Use the free-form designer to customize the report design.** Select the report design that is named **Report**, right-click it, and open the precision designer. Customize the design to satisfy the organization’s business requirements. The following illustration shows a custom design definition for the **Sales confirmation** report. [![Custom design definition for the Sales confirmation report](./media/app-extension-report-designer-1024x613.png)](./media/app-extension-report-designer.png)\n6.  **Add a new X++ class that extends the standard report controller.** Give the class a name that appropriately describes that it's a handler for an existing application report. For this example, rename the class **SalesConfirmControllerExt** to distinguish it from other report controllers.\n7.  **Use the extended class to load the custom design.** Add a **main** method that refers to the custom report design. (You can just copy the **main** method from the standard solution and add references to the new **Controller** class.) Here is the code that extends the standard solution.\n\n        class SalesConfirmControllerExt extends SalesConfirmController\n        {\n            public static SalesConfirmControllerExt construct()\n            {\n                return new SalesConfirmControllerExt();\n            }\n            public static void main(Args _args)\n            {\n                SrsReportRunController formLetterController = SalesConfirmControllerExt::construct();\n                SalesConfirmControllerExt controller = formLetterController;controller.initArgs(_args, ssrsReportStr(SalesConfirmExt, Report));\n                if (classIdGet(_args.caller()) == classNum(SalesConfirmJournalPrint))\n                {\n                    formLetterController.renderingCompleted += eventhandler(SalesConfirmJournalPrint::renderingCompleted);\n                }\n                formLetterController.startOperation();\n            }\n        }\n\n8.  **Add a new report handler (X++) class to the project.** Give the class a name that appropriately describes that it's a handler for Print management–based documents. For this example, rename the class **PrintMgtDocTypeHandlerExt** to distinguish it from other object handlers.\n9.  **Add a delegate handler method to start to use your custom report.** In this example, extend the **getDefaultReportFormatDelegate** method in the **PrintMgtDocTypeHandlerExt** class by using the following code.\n\n        class PrintMgtDocTypeHandlersExt\n        {\n            [SubscribesTo(classstr(PrintMgmtDocType), delegatestr(PrintMgmtDocType, getDefaultReportFormatDelegate))]\n            public static void getDefaultReportFormatDelegate(PrintMgmtDocumentType _docType, EventHandlerResult _result)\n            {\n                switch (_docType)\n                {\n                    case PrintMgmtDocumentType::SalesOrderConfirmation:\n                        _result.result(ssrsReportStr(SalesConfirmExt, Report));\n                        break;\n                }\n            }\n        }\n\n10. **Extend the menu item for the application report.** Find the existing Application Suite menu item in Application Explorer. This menu item is named **SalesConfirmation**. Right-click it, and then click **Create extension**. Open the new extension object in the designer, and set the value of the **Object** property to **SalesConfirmControllerExt** to redirect user navigations to the extended solution.\n11. **Update the Print management settings to use the custom business document.** For this example, go to **Accounts receivable** &gt; **Setup** &gt; **Forms** &gt; **Form setup**. Click **Print Management**, find the document configuration settings, and then select the custom design. The following illustration shows the Print management settings after the changes have been compiled. [![Print Management settings after compilation](./media/app-extension-print-mgt-after-1024x608.png)](./media/app-extension-print-mgt-after.png)\n\nYou’ve now finished customizing the business document. Users will now be presented with the custom report design for the business document when they process transactions in the application.\n\n\n\n","nodes":[{"pos":[4,736],"embed":true,"restype":"x-metadata","content":"# required metadata\n\ntitle: Custom designs for business documents\ndescription: This topic shows how to create a custom report design for an existing application business document by using a pure extension model. \nauthor: sericks007\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: robinr\nms.search.scope: Operations, Platform, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 266574\nms.assetid: fba7faa3-716b-4adf-ab3e-8573f3614894\nms.search.region: Global\n# ms.search.industry: \nms.author: tjvass\nms.search.validFrom: 2016-11-30\nms.dyn365.ops.version: Platform update 3\n","nodes":[{"content":"Custom designs for business documents","nodes":[{"pos":[0,37],"content":"Custom designs for business documents","nodes":[{"content":"Custom designs for business documents","pos":[0,37]}]}],"path":["title"],"extradata":"MT"},{"content":"This topic shows how to create a custom report design for an existing application business document by using a pure extension model.","nodes":[{"pos":[0,132],"content":"This topic shows how to create a custom report design for an existing application business document by using a pure extension model.","nodes":[{"content":"This topic shows how to create a custom report design for an existing application business document by using a pure extension model.","pos":[0,132]}]}],"path":["description"],"extradata":"MT"}],"header":"# required metadata\n","yml":true},{"pos":[744,781],"content":"Custom designs for business documents","linkify":"Custom designs for business documents","nodes":[{"content":"Custom designs for business documents","pos":[0,37]}]},{"content":"This topic shows how to create a custom report design for an existing application business document by using a pure extension model.","pos":[827,959]},{"content":"Microsoft Dynamics 365 for Finance and Operations includes an expanded set of tools to support custom solutions.","pos":[962,1074]},{"content":"This topic focuses on the steps for creating a custom report design for an existing application business document by using a pure extension model.","pos":[1075,1221]},{"content":"Follow the steps later in this topic to associate a custom report design with an instance of an application document.","pos":[1222,1339]},{"content":"When you've finished, users can configure Print management settings to select the custom design whenever it's appropriate, based on transaction details.","pos":[1340,1492]},{"content":"The following illustration shows a typical application customization.<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>extendingprintmgt<ept id=\"p1\">](./media/extendingprintmgt1.png)](./media/extendingprintmgt1.png)</ept>","pos":[1493,1648],"source":" The following illustration shows a typical application customization.[![extendingprintmgt](./media/extendingprintmgt1.png)](./media/extendingprintmgt1.png)"},{"pos":[1655,1680],"content":"What's important to know?","linkify":"What's important to know?","nodes":[{"content":"What's important to know?","pos":[0,25]}]},{"content":"Here are some important points that you should be aware of before you apply this solution:","pos":[1681,1771]},{"content":"Print management settings are scoped to the active legal entity.","pos":[1777,1841]},{"content":"Custom designs can be associated with one or more Print management settings.","pos":[1842,1918]},{"content":"Standard report designs continue to be available alongside custom solutions.","pos":[1923,1999]},{"content":"Use Print management settings to select the appropriate design, based on transaction details.","pos":[2000,2093]},{"content":"If you introduce a business document for a custom business process, more work is required.","pos":[2098,2188]},{"content":"For more information about how to create a custom business document solution, see the <bpt id=\"p1\">[</bpt>Print Management Integration Guide<ept id=\"p1\">](https://www.microsoft.com/en-us/download/details.aspx?id=36049)</ept>.","pos":[2189,2376],"source":" For more information about how to create a custom business document solution, see the [Print Management Integration Guide](https://www.microsoft.com/en-us/download/details.aspx?id=36049)."},{"pos":[2381,2410],"content":"Customize a business document","linkify":"Customize a business document","nodes":[{"content":"Customize a business document","pos":[0,29]}]},{"content":"The following walkthrough shows the process of introducing a custom report design for an existing application business document and then using Print management to select the new design.","pos":[2411,2596]},{"content":"The solution includes a custom design definition for the <bpt id=\"p1\">**</bpt>Sales confirmation<ept id=\"p1\">**</ept> report that is provided in the standard application as part of the Application Suite model.","pos":[2597,2768],"source":" The solution includes a custom design definition for the **Sales confirmation** report that is provided in the standard application as part of the Application Suite model."},{"content":"The application customizations will be defined in an extension model.","pos":[2769,2838]},{"content":"<bpt id=\"p1\">**</bpt>Create a new model for your application customizations.<ept id=\"p1\">**</ept>","pos":[2844,2903],"source":"**Create a new model for your application customizations.**"},{"content":"For more information about extension models, see <bpt id=\"p1\">[</bpt>Customization: Overlayering and extensions<ept id=\"p1\">](..\\extensibility\\customization-overlayering-extensions.md)</ept>.","pos":[2904,3057],"source":" For more information about extension models, see [Customization: Overlayering and extensions](..\\extensibility\\customization-overlayering-extensions.md)."},{"content":"For this example, you add a model that is named <bpt id=\"p1\">**</bpt>Application Suite Extensions<ept id=\"p1\">**</ept>, and that references the Application Suite, Application Platform, and Application Foundation packages.","pos":[3058,3241],"source":" For this example, you add a model that is named **Application Suite Extensions**, and that references the Application Suite, Application Platform, and Application Foundation packages."},{"content":"<bpt id=\"p1\">**</bpt>Create a new project in Microsoft Visual Studio.<ept id=\"p1\">**</ept>","pos":[3246,3298],"source":"**Create a new project in Microsoft Visual Studio.**"},{"content":"Make sure that the project is associated with your extension model.","pos":[3299,3366]},{"content":"The following illustration shows the project settings.","pos":[3367,3421]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Project settings in Visual Studio<ept id=\"p1\">](./media/app-extension-vs-project-settings.png)](./media/app-extension-vs-project-settings.png)</ept>","pos":[3422,3554],"source":"[![Project settings in Visual Studio](./media/app-extension-vs-project-settings.png)](./media/app-extension-vs-project-settings.png)"},{"content":"<bpt id=\"p1\">**</bpt>Create a custom report design for the business document.<ept id=\"p1\">**</ept>","pos":[3559,3619],"source":"**Create a custom report design for the business document.**"},{"content":"You must make sure that your custom solution consumes the correct report data contract.","pos":[3620,3707]},{"content":"Find the existing Application Suite report in Application Explorer.","pos":[3708,3775]},{"content":"This report is named <bpt id=\"p1\">**</bpt>SalesConfirm<ept id=\"p1\">**</ept>.","pos":[3776,3814],"source":" This report is named **SalesConfirm**."},{"content":"Right-click it, and then click <bpt id=\"p1\">**</bpt>Duplicate in project<ept id=\"p1\">**</ept> to create the custom solution.","pos":[3815,3901],"source":" Right-click it, and then click **Duplicate in project** to create the custom solution."},{"content":"<bpt id=\"p1\">**</bpt>Rename the report so that it has a meaningful name.<ept id=\"p1\">**</ept>","pos":[3906,3961],"source":"**Rename the report so that it has a meaningful name.**"},{"content":"For this example, name the custom report <bpt id=\"p1\">**</bpt>SalesConfirmExt<ept id=\"p1\">**</ept> to distinguish it from the standard solution.","pos":[3962,4068],"source":" For this example, name the custom report **SalesConfirmExt** to distinguish it from the standard solution."},{"content":"Compile the project, and deploy the report to verify that the changes have no errors.","pos":[4069,4154]},{"content":"<bpt id=\"p1\">**</bpt>Use the free-form designer to customize the report design.<ept id=\"p1\">**</ept>","pos":[4159,4221],"source":"**Use the free-form designer to customize the report design.**"},{"content":"Select the report design that is named <bpt id=\"p1\">**</bpt>Report<ept id=\"p1\">**</ept>, right-click it, and open the precision designer.","pos":[4222,4321],"source":" Select the report design that is named **Report**, right-click it, and open the precision designer."},{"content":"Customize the design to satisfy the organization’s business requirements.","pos":[4322,4395]},{"content":"The following illustration shows a custom design definition for the <bpt id=\"p1\">**</bpt>Sales confirmation<ept id=\"p1\">**</ept> report.","pos":[4396,4494],"source":" The following illustration shows a custom design definition for the **Sales confirmation** report."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Custom design definition for the Sales confirmation report<ept id=\"p1\">](./media/app-extension-report-designer-1024x613.png)](./media/app-extension-report-designer.png)</ept>","pos":[4495,4653],"source":"[![Custom design definition for the Sales confirmation report](./media/app-extension-report-designer-1024x613.png)](./media/app-extension-report-designer.png)"},{"content":"<bpt id=\"p1\">**</bpt>Add a new X++ class that extends the standard report controller.<ept id=\"p1\">**</ept>","pos":[4658,4726],"source":"**Add a new X++ class that extends the standard report controller.**"},{"content":"Give the class a name that appropriately describes that it's a handler for an existing application report.","pos":[4727,4833]},{"content":"For this example, rename the class <bpt id=\"p1\">**</bpt>SalesConfirmControllerExt<ept id=\"p1\">**</ept> to distinguish it from other report controllers.","pos":[4834,4947],"source":" For this example, rename the class **SalesConfirmControllerExt** to distinguish it from other report controllers."},{"content":"<bpt id=\"p1\">**</bpt>Use the extended class to load the custom design.<ept id=\"p1\">**</ept>","pos":[4952,5005],"source":"**Use the extended class to load the custom design.**"},{"content":"Add a <bpt id=\"p1\">**</bpt>main<ept id=\"p1\">**</ept> method that refers to the custom report design.","pos":[5006,5068],"source":" Add a **main** method that refers to the custom report design."},{"content":"(You can just copy the <bpt id=\"p1\">**</bpt>main<ept id=\"p1\">**</ept> method from the standard solution and add references to the new <bpt id=\"p2\">**</bpt>Controller<ept id=\"p2\">**</ept> class.) Here is the code that extends the standard solution.","pos":[5069,5240],"source":" (You can just copy the **main** method from the standard solution and add references to the new **Controller** class.) Here is the code that extends the standard solution."},{"content":"<bpt id=\"p1\">**</bpt>Add a new report handler (X++) class to the project.<ept id=\"p1\">**</ept>","pos":[6108,6164],"source":"**Add a new report handler (X++) class to the project.**"},{"content":"Give the class a name that appropriately describes that it's a handler for Print management–based documents.","pos":[6165,6273]},{"content":"For this example, rename the class <bpt id=\"p1\">**</bpt>PrintMgtDocTypeHandlerExt<ept id=\"p1\">**</ept> to distinguish it from other object handlers.","pos":[6274,6384],"source":" For this example, rename the class **PrintMgtDocTypeHandlerExt** to distinguish it from other object handlers."},{"content":"<bpt id=\"p1\">**</bpt>Add a delegate handler method to start to use your custom report.<ept id=\"p1\">**</ept>","pos":[6389,6458],"source":"**Add a delegate handler method to start to use your custom report.**"},{"content":"In this example, extend the <bpt id=\"p1\">**</bpt>getDefaultReportFormatDelegate<ept id=\"p1\">**</ept> method in the <bpt id=\"p2\">**</bpt>PrintMgtDocTypeHandlerExt<ept id=\"p2\">**</ept> class by using the following code.","pos":[6459,6600],"source":" In this example, extend the **getDefaultReportFormatDelegate** method in the **PrintMgtDocTypeHandlerExt** class by using the following code."},{"content":"<bpt id=\"p1\">**</bpt>Extend the menu item for the application report.<ept id=\"p1\">**</ept>","pos":[7189,7241],"source":"**Extend the menu item for the application report.**"},{"content":"Find the existing Application Suite menu item in Application Explorer.","pos":[7242,7312]},{"content":"This menu item is named <bpt id=\"p1\">**</bpt>SalesConfirmation<ept id=\"p1\">**</ept>.","pos":[7313,7359],"source":" This menu item is named **SalesConfirmation**."},{"content":"Right-click it, and then click <bpt id=\"p1\">**</bpt>Create extension<ept id=\"p1\">**</ept>.","pos":[7360,7412],"source":" Right-click it, and then click **Create extension**."},{"content":"Open the new extension object in the designer, and set the value of the <bpt id=\"p1\">**</bpt>Object<ept id=\"p1\">**</ept> property to <bpt id=\"p2\">**</bpt>SalesConfirmControllerExt<ept id=\"p2\">**</ept> to redirect user navigations to the extended solution.","pos":[7413,7592],"source":" Open the new extension object in the designer, and set the value of the **Object** property to **SalesConfirmControllerExt** to redirect user navigations to the extended solution."},{"content":"<bpt id=\"p1\">**</bpt>Update the Print management settings to use the custom business document.<ept id=\"p1\">**</ept>","pos":[7597,7674],"source":"**Update the Print management settings to use the custom business document.**"},{"content":"For this example, go to <bpt id=\"p1\">**</bpt>Accounts receivable<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Setup<ept id=\"p2\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Forms<ept id=\"p3\">**</ept> <ph id=\"ph3\">&amp;gt;</ph> <bpt id=\"p4\">**</bpt>Form setup<ept id=\"p4\">**</ept>.","pos":[7675,7773],"source":" For this example, go to **Accounts receivable** &gt; **Setup** &gt; **Forms** &gt; **Form setup**."},{"content":"Click <bpt id=\"p1\">**</bpt>Print Management<ept id=\"p1\">**</ept>, find the document configuration settings, and then select the custom design.","pos":[7774,7878],"source":" Click **Print Management**, find the document configuration settings, and then select the custom design."},{"content":"The following illustration shows the Print management settings after the changes have been compiled.","pos":[7879,7979]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Print Management settings after compilation<ept id=\"p1\">](./media/app-extension-print-mgt-after-1024x608.png)](./media/app-extension-print-mgt-after.png)</ept>","pos":[7980,8123],"source":"[![Print Management settings after compilation](./media/app-extension-print-mgt-after-1024x608.png)](./media/app-extension-print-mgt-after.png)"},{"content":"You’ve now finished customizing the business document.","pos":[8125,8179]},{"content":"Users will now be presented with the custom report design for the business document when they process transactions in the application.","pos":[8180,8314]}]}