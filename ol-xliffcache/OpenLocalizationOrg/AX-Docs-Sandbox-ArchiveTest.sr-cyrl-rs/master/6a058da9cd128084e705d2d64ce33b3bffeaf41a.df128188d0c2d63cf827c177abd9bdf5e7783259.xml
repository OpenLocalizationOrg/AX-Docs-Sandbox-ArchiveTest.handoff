{"content":"---\n# required metadata\n\ntitle: Commerce runtime overview\ndescription: This article provides information about the architecture and configuration of the Commerce Runtime (CRT). The CRT is a collection of portable .NET libraries that encapsulate business logic. It serves as the engine for the retail channel. \nauthor: MargoC\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-365-retail\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \nms.reviewer: robinr\nms.search.scope: AX 7.0.0, Operations, Retail, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 218654\nms.assetid: ac422f7e-bc71-4b42-b8c1-4702c6c18421\nms.search.region: Global\n# ms.search.industry: \nms.author: yabinl\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update\n\n---\n\n# Commerce runtime overview\n\n[!include[banner](../includes/banner.md)]\n\n\nThis article provides information about the architecture and configuration of Commerce Runtime (CRT). The CRT is a collection of portable .NET libraries that encapsulate business logic. It serves as the engine for the retail channel. \n\nCommerce Runtime architecture\n-----------------------------\n\nThe following diagram shows the components of the Microsoft Dynamics 365 for Retail Commerce Runtime (CRT). \n\n[![Commerce Runtime components](./media/crt-architecture-1024x793.jpg)](./media/crt-architecture.jpg)\n\n### Data access\n\nOn top of the database is a data access layer. In the data access layer, raw data is translated into objects in memory. For example, an object might be a product. Products have attributes, such as price and color. The data access layer has functions that you can use to manipulate the objects. Stored procedures pass packets of data from the database to data entities that can be used in services and workflows. You can update the packets of data to include new fields that you add in Dynamics 365 for Retail.\n\n### Services\n\nOn top of the data access layer is a services layer. Services query for real-time data. You can use these services to customize existing functionality, or you can add your own services that include new functionality.\n\n### Workflows\n\nOn top of the services layer is the workflow layer. A workflow is a collection of services and business logic that, together, define business processes. For example, when a customer adds an item to the cart, you can use a workflow to get the price, perform validation, check the inventory quantity, calculate shipping charges, calculate tax, and calculate discounts. You can use the workflows that are included in Dynamics 365 for Retail, or you can create new workflows. You can even use a workflow to connect to a third-party system as part of your business processes.\n\n### API\n\nOn top of the workflow layer is the application programming interface (API) layer. You can use the API for tasks such as getting information about items, calculating prices, calculating shipping charges, and placing orders. You can extend the API to fit your business processes.\n\n## Commerce Runtime configuration\nServices are enumerated as types in the CRT configuration file. You can add types in the CRT configuration file to control which services are loaded in the CRT. Services are loaded in the order in which they are listed in the configuration file. All the default services are loaded automatically. However, if you add a new service above one of the default services, the new service replaces the default service.\n\n\n\n","nodes":[{"pos":[4,856],"embed":true,"restype":"x-metadata","content":"# required metadata\n\ntitle: Commerce runtime overview\ndescription: This article provides information about the architecture and configuration of the Commerce Runtime (CRT). The CRT is a collection of portable .NET libraries that encapsulate business logic. It serves as the engine for the retail channel. \nauthor: MargoC\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-365-retail\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \nms.reviewer: robinr\nms.search.scope: AX 7.0.0, Operations, Retail, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 218654\nms.assetid: ac422f7e-bc71-4b42-b8c1-4702c6c18421\nms.search.region: Global\n# ms.search.industry: \nms.author: yabinl\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update\n","nodes":[{"content":"Commerce runtime overview","nodes":[{"pos":[0,25],"content":"Commerce runtime overview","nodes":[{"content":"Commerce runtime overview","pos":[0,25]}]}],"path":["title"],"extradata":"MT"},{"content":"This article provides information about the architecture and configuration of the Commerce Runtime (CRT). The CRT is a collection of portable .NET libraries that encapsulate business logic. It serves as the engine for the retail channel.","nodes":[{"pos":[0,237],"content":"This article provides information about the architecture and configuration of the Commerce Runtime (CRT). The CRT is a collection of portable .NET libraries that encapsulate business logic. It serves as the engine for the retail channel.","nodes":[{"content":"This article provides information about the architecture and configuration of the Commerce Runtime (CRT). The CRT is a collection of portable .NET libraries that encapsulate business logic. It serves as the engine for the retail channel.","pos":[0,237],"nodes":[{"content":"This article provides information about the architecture and configuration of the Commerce Runtime (CRT).","pos":[0,105]},{"content":"The CRT is a collection of portable .NET libraries that encapsulate business logic.","pos":[106,189]},{"content":"It serves as the engine for the retail channel.","pos":[190,237]}]}]}],"path":["description"],"extradata":"MT"}],"header":"# required metadata\n","yml":true},{"pos":[864,889],"content":"Commerce runtime overview","linkify":"Commerce runtime overview","nodes":[{"content":"Commerce runtime overview","pos":[0,25]}]},{"content":"This article provides information about the architecture and configuration of Commerce Runtime (CRT).","pos":[935,1036]},{"content":"The CRT is a collection of portable .NET libraries that encapsulate business logic.","pos":[1037,1120]},{"content":"It serves as the engine for the retail channel.","pos":[1121,1168]},{"pos":[1171,1200],"content":"Commerce Runtime architecture","linkify":"Commerce Runtime architecture","nodes":[{"content":"Commerce Runtime architecture","pos":[0,29]}]},{"content":"The following diagram shows the components of the Microsoft Dynamics 365 for Retail Commerce Runtime (CRT).","pos":[1232,1339]},{"pos":[1342,1443],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Commerce Runtime components<ept id=\"p1\">](./media/crt-architecture-1024x793.jpg)](./media/crt-architecture.jpg)</ept>","source":"[![Commerce Runtime components](./media/crt-architecture-1024x793.jpg)](./media/crt-architecture.jpg)"},{"pos":[1449,1460],"content":"Data access","linkify":"Data access","nodes":[{"content":"Data access","pos":[0,11]}]},{"content":"On top of the database is a data access layer.","pos":[1462,1508]},{"content":"In the data access layer, raw data is translated into objects in memory.","pos":[1509,1581]},{"content":"For example, an object might be a product.","pos":[1582,1624]},{"content":"Products have attributes, such as price and color.","pos":[1625,1675]},{"content":"The data access layer has functions that you can use to manipulate the objects.","pos":[1676,1755]},{"content":"Stored procedures pass packets of data from the database to data entities that can be used in services and workflows.","pos":[1756,1873]},{"content":"You can update the packets of data to include new fields that you add in Dynamics 365 for Retail.","pos":[1874,1971]},{"pos":[1977,1985],"content":"Services","linkify":"Services","nodes":[{"content":"Services","pos":[0,8]}]},{"content":"On top of the data access layer is a services layer.","pos":[1987,2039]},{"content":"Services query for real-time data.","pos":[2040,2074]},{"content":"You can use these services to customize existing functionality, or you can add your own services that include new functionality.","pos":[2075,2203]},{"pos":[2209,2218],"content":"Workflows","linkify":"Workflows","nodes":[{"content":"Workflows","pos":[0,9]}]},{"content":"On top of the services layer is the workflow layer.","pos":[2220,2271]},{"content":"A workflow is a collection of services and business logic that, together, define business processes.","pos":[2272,2372]},{"content":"For example, when a customer adds an item to the cart, you can use a workflow to get the price, perform validation, check the inventory quantity, calculate shipping charges, calculate tax, and calculate discounts.","pos":[2373,2586]},{"content":"You can use the workflows that are included in Dynamics 365 for Retail, or you can create new workflows.","pos":[2587,2691]},{"content":"You can even use a workflow to connect to a third-party system as part of your business processes.","pos":[2692,2790]},{"pos":[2796,2799],"content":"API","linkify":"API","nodes":[{"content":"API","pos":[0,3]}]},{"content":"On top of the workflow layer is the application programming interface (API) layer.","pos":[2801,2883]},{"content":"You can use the API for tasks such as getting information about items, calculating prices, calculating shipping charges, and placing orders.","pos":[2884,3024]},{"content":"You can extend the API to fit your business processes.","pos":[3025,3079]},{"pos":[3084,3114],"content":"Commerce Runtime configuration","linkify":"Commerce Runtime configuration","nodes":[{"content":"Commerce Runtime configuration","pos":[0,30]}]},{"content":"Services are enumerated as types in the CRT configuration file.","pos":[3115,3178]},{"content":"You can add types in the CRT configuration file to control which services are loaded in the CRT.","pos":[3179,3275]},{"content":"Services are loaded in the order in which they are listed in the configuration file.","pos":[3276,3360]},{"content":"All the default services are loaded automatically.","pos":[3361,3411]},{"content":"However, if you add a new service above one of the default services, the new service replaces the default service.","pos":[3412,3526]}]}