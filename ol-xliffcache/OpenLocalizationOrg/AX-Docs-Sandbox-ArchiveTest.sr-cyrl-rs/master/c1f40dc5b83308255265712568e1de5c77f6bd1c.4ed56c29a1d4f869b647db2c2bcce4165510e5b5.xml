{"content":"---\n# required metadata\n\ntitle: Debug X++ against a copy of a production database\ndescription: This topic explains how to configure X++ debugging so that you can investigate issues in the production environment. For this procedure, you make a copy of the production database and then configure a developer environment to connect to the copied database.\nauthor: MargoC\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \nms.reviewer: annbe\nms.search.scope: AX 7.0.0, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 199063\nms.assetid: 3c0551f3-6c96-4518-8acd-82d4638f9323\nms.search.region: Global\n# ms.search.industry: \nms.author: tabell\nms.search.validFrom: 2016-05-31\nms.dyn365.ops.version: AX 7.0.1\n\n---\n\n# Debug X++ against a copy of a production database\n\n[!include[banner](../includes/banner.md)]\n\n\nThis topic explains how to configure X++ debugging so that you can investigate issues in the production environment. For this procedure, you make a copy of the production database and then configure a developer environment to connect to the copied database.\n\nSolution overview\n-----------------\n\nWhen an issue that requires X++ debugging occurs in a production environment, the system administrator and developer work together to configure debugging and then debug the issue. The following illustration shows an overview of the process. [![Debug X+=](./media/debugxpp.jpg)](./media/debugxpp.jpg)\n\n1.  In Microsoft Dynamics Lifecycle Services (LCS), the system administrator requests that a copy of the database be added to the sandbox environment.\n2.  In Microsoft Visual Studio Team Services (VSTS), the developer synchronizes the local code to the same build that is running in the production environment.\n3.  In the sandbox Azure SQL Database instance, the system administrator creates a temporary SQL sign-in for the developer. The developer then configures the environment to connect to the sandbox database.\n4.  A firewall exception is added so that the developer environment can connect to the sandbox database.\n5.  The developer debugs the issue.\n\n**Note:** When debugging is completed, the system administrator can remove the temporary sign-in from the sandbox Azure SQL Database instance.\n\n## Before you begin\nBefore you begin to configure X++ debugging in a production environment, note the following points:\n\n-   You can't debug directly against the production environment, because debugging might cause data corruption. However, developers can manipulate values at run time. Alternatively, in their own instance, developers can make a code change that changes data.\n-   The developer environment that is used for debugging must exist in the same Microsoft Azure subscription as the sandbox environment. This requirement helps strengthen the security of the sandbox database. By default, there is a firewall restriction on both the sandbox and production Azure SQL Database instances. This restriction allows only servers that are in those environments to connect to the databases. To enable debugging, a firewall exception is added to allow a developer environment to connect to the sandbox database.\n-   A one-time manual change to the developer environment is required, to allow the IP address of the environment to connect to the sandbox database. Submit a request to the Microsoft Support Team to allow the IP address.\n-   We recommend that you not use a build environment for debugging. Otherwise, there is a risk that the developer’s activities on the computer might break the automated build process.\n\n## Solution details\nWhen an issue occurs in the production environment, the system administrator can sign in to LCS and request that a database copy be added to a sandbox environment. While the database copy is running, the system administrator can notify the developer of the issue. The developer can then sync to the correct build of the code to match the production environment.\n\n1.  In Microsoft Visual Studio, in Source Control Explorer, right-click the root node of the branch to sync, and then click **Advanced** &gt; **Get specific version**.\n2.  In the dialog box, select **Type=Label**, and then click the ellipsis (**...**).\n3.  In the dialog box, click **Find**. All the builds from the build server are listed.\n4.  Select the build that is currently deployed to the production environment, and then select to run a full build. When the database is copied, only the system administrator will be able to access the sandbox database. The system administrator must complete the following tasks:\n    -   Remove any data that you don't want in the sandbox database, such as employee salaries.\n    -   Enable or add the developer as a user.\n    -   Create a new SQL sign-in for the developer to use. This step lets the system administrator maintain the security of the sandbox environment. The developer will only have access to one database for a time. The following code can be used to create the new SQL sign-in.\n\n            CREATE USER devtempuser WITH PASSWORD = ''\n            EXEC sp_addrolemember 'db_owner', 'devtempuser'\n\nNext, the developer edits the web.config file for Application Object Server (AOS).\n\n1.  Go to J:\\\\AosService\\\\WebRoot\\\\web.config.\n2.  Save a copy of the original web.config file, so that you can switch back later.\n3.  Edit the following section in the web.config file. **Before your changes**\n\n        <add key=\"DataAccess.Database\" value=\"sandboxDatabaseName\" />\n        <add key=\"DataAccess.DbServer\" value=\"sandboxDbServerName.database.windows.net\" />\n        <add key=\"DataAccess.SqlPwd\" value=\"password\" />\n        <add key=\"DataAccess.SqlUser\" value=\"devtempuser\" />\n\n    **After your changes**\n\n        <add key=\"DataAccess.Database\" value=\"TariqRTW_axdb_dd78f8aadbc6c481\" />\n        <add key=\"DataAccess.DbServer\" value=\"vyxx2dflyo.database.windows.net\" />\n        <add key=\"DataAccess.SqlPwd\" value=\"P@ssw0rd\" />\n        <add key=\"DataAccess.SqlUser\" value=\"devtempuser\" />\n\n4.  Debug the issue.\n\nAfter the developer has finished, the system administrator can remove \"devtempuser\" from the sandbox database. This step prevents the developer from having permanent access to the sandbox database.\n\n\n\n","nodes":[{"pos":[4,866],"embed":true,"restype":"x-metadata","content":"# required metadata\n\ntitle: Debug X++ against a copy of a production database\ndescription: This topic explains how to configure X++ debugging so that you can investigate issues in the production environment. For this procedure, you make a copy of the production database and then configure a developer environment to connect to the copied database.\nauthor: MargoC\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \nms.reviewer: annbe\nms.search.scope: AX 7.0.0, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 199063\nms.assetid: 3c0551f3-6c96-4518-8acd-82d4638f9323\nms.search.region: Global\n# ms.search.industry: \nms.author: tabell\nms.search.validFrom: 2016-05-31\nms.dyn365.ops.version: AX 7.0.1\n","nodes":[{"content":"Debug X++ against a copy of a production database","nodes":[{"pos":[0,49],"content":"Debug X++ against a copy of a production database","nodes":[{"content":"Debug X++ against a copy of a production database","pos":[0,49]}]}],"path":["title"],"extradata":"MT"},{"content":"This topic explains how to configure X++ debugging so that you can investigate issues in the production environment. For this procedure, you make a copy of the production database and then configure a developer environment to connect to the copied database.","nodes":[{"pos":[0,257],"content":"This topic explains how to configure X++ debugging so that you can investigate issues in the production environment. For this procedure, you make a copy of the production database and then configure a developer environment to connect to the copied database.","nodes":[{"content":"This topic explains how to configure X++ debugging so that you can investigate issues in the production environment. For this procedure, you make a copy of the production database and then configure a developer environment to connect to the copied database.","pos":[0,257],"nodes":[{"content":"This topic explains how to configure X++ debugging so that you can investigate issues in the production environment.","pos":[0,116]},{"content":"For this procedure, you make a copy of the production database and then configure a developer environment to connect to the copied database.","pos":[117,257]}]}]}],"path":["description"],"extradata":"MT"}],"header":"# required metadata\n","yml":true},{"pos":[874,923],"content":"Debug X++ against a copy of a production database","linkify":"Debug X++ against a copy of a production database","nodes":[{"content":"Debug X++ against a copy of a production database","pos":[0,49]}]},{"content":"This topic explains how to configure X++ debugging so that you can investigate issues in the production environment.","pos":[969,1085]},{"content":"For this procedure, you make a copy of the production database and then configure a developer environment to connect to the copied database.","pos":[1086,1226]},{"pos":[1228,1245],"content":"Solution overview","linkify":"Solution overview","nodes":[{"content":"Solution overview","pos":[0,17]}]},{"content":"When an issue that requires X++ debugging occurs in a production environment, the system administrator and developer work together to configure debugging and then debug the issue.","pos":[1265,1444]},{"content":"The following illustration shows an overview of the process.","pos":[1445,1505]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Debug X+=<ept id=\"p1\">](./media/debugxpp.jpg)](./media/debugxpp.jpg)</ept>","pos":[1506,1564],"source":"[![Debug X+=](./media/debugxpp.jpg)](./media/debugxpp.jpg)"},{"content":"In Microsoft Dynamics Lifecycle Services (LCS), the system administrator requests that a copy of the database be added to the sandbox environment.","pos":[1570,1716]},{"content":"In Microsoft Visual Studio Team Services (VSTS), the developer synchronizes the local code to the same build that is running in the production environment.","pos":[1721,1876]},{"content":"In the sandbox Azure SQL Database instance, the system administrator creates a temporary SQL sign-in for the developer.","pos":[1881,2000]},{"content":"The developer then configures the environment to connect to the sandbox database.","pos":[2001,2082]},{"content":"A firewall exception is added so that the developer environment can connect to the sandbox database.","pos":[2087,2187]},{"content":"The developer debugs the issue.","pos":[2192,2223]},{"pos":[2225,2367],"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> When debugging is completed, the system administrator can remove the temporary sign-in from the sandbox Azure SQL Database instance.","source":"**Note:** When debugging is completed, the system administrator can remove the temporary sign-in from the sandbox Azure SQL Database instance."},{"pos":[2372,2388],"content":"Before you begin","linkify":"Before you begin","nodes":[{"content":"Before you begin","pos":[0,16]}]},{"content":"Before you begin to configure X++ debugging in a production environment, note the following points:","pos":[2389,2488]},{"content":"You can't debug directly against the production environment, because debugging might cause data corruption.","pos":[2494,2601]},{"content":"However, developers can manipulate values at run time.","pos":[2602,2656]},{"content":"Alternatively, in their own instance, developers can make a code change that changes data.","pos":[2657,2747]},{"content":"The developer environment that is used for debugging must exist in the same Microsoft Azure subscription as the sandbox environment.","pos":[2752,2884]},{"content":"This requirement helps strengthen the security of the sandbox database.","pos":[2885,2956]},{"content":"By default, there is a firewall restriction on both the sandbox and production Azure SQL Database instances.","pos":[2957,3065]},{"content":"This restriction allows only servers that are in those environments to connect to the databases.","pos":[3066,3162]},{"content":"To enable debugging, a firewall exception is added to allow a developer environment to connect to the sandbox database.","pos":[3163,3282]},{"content":"A one-time manual change to the developer environment is required, to allow the IP address of the environment to connect to the sandbox database.","pos":[3287,3432]},{"content":"Submit a request to the Microsoft Support Team to allow the IP address.","pos":[3433,3504]},{"content":"We recommend that you not use a build environment for debugging.","pos":[3509,3573]},{"content":"Otherwise, there is a risk that the developer’s activities on the computer might break the automated build process.","pos":[3574,3689]},{"pos":[3694,3710],"content":"Solution details","linkify":"Solution details","nodes":[{"content":"Solution details","pos":[0,16]}]},{"content":"When an issue occurs in the production environment, the system administrator can sign in to LCS and request that a database copy be added to a sandbox environment.","pos":[3711,3874]},{"content":"While the database copy is running, the system administrator can notify the developer of the issue.","pos":[3875,3974]},{"content":"The developer can then sync to the correct build of the code to match the production environment.","pos":[3975,4072]},{"pos":[4078,4241],"content":"In Microsoft Visual Studio, in Source Control Explorer, right-click the root node of the branch to sync, and then click <bpt id=\"p1\">**</bpt>Advanced<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Get specific version<ept id=\"p2\">**</ept>.","source":"In Microsoft Visual Studio, in Source Control Explorer, right-click the root node of the branch to sync, and then click **Advanced** &gt; **Get specific version**."},{"pos":[4246,4326],"content":"In the dialog box, select <bpt id=\"p1\">**</bpt>Type=Label<ept id=\"p1\">**</ept>, and then click the ellipsis (<bpt id=\"p2\">**</bpt>...<ept id=\"p2\">**</ept>).","source":"In the dialog box, select **Type=Label**, and then click the ellipsis (**...**)."},{"content":"In the dialog box, click <bpt id=\"p1\">**</bpt>Find<ept id=\"p1\">**</ept>.","pos":[4331,4365],"source":"In the dialog box, click **Find**."},{"content":"All the builds from the build server are listed.","pos":[4366,4414]},{"content":"Select the build that is currently deployed to the production environment, and then select to run a full build.","pos":[4419,4530]},{"content":"When the database is copied, only the system administrator will be able to access the sandbox database.","pos":[4531,4634]},{"content":"The system administrator must complete the following tasks:","pos":[4635,4694]},{"content":"Remove any data that you don't want in the sandbox database, such as employee salaries.","pos":[4703,4790]},{"content":"Enable or add the developer as a user.","pos":[4799,4837]},{"content":"Create a new SQL sign-in for the developer to use.","pos":[4846,4896]},{"content":"This step lets the system administrator maintain the security of the sandbox environment.","pos":[4897,4986]},{"content":"The developer will only have access to one database for a time.","pos":[4987,5050]},{"content":"The following code can be used to create the new SQL sign-in.","pos":[5051,5112]},{"content":"Next, the developer edits the web.config file for Application Object Server (AOS).","pos":[5230,5312]},{"content":"Go to J:<ph id=\"ph1\">\\\\</ph>AosService<ph id=\"ph2\">\\\\</ph>WebRoot<ph id=\"ph3\">\\\\</ph>web.config.","pos":[5318,5360],"source":"Go to J:\\\\AosService\\\\WebRoot\\\\web.config."},{"content":"Save a copy of the original web.config file, so that you can switch back later.","pos":[5365,5444]},{"content":"Edit the following section in the web.config file.","pos":[5449,5499]},{"content":"<bpt id=\"p1\">**</bpt>Before your changes<ept id=\"p1\">**</ept>","pos":[5500,5523],"source":"**Before your changes**"},{"pos":[5809,5831],"content":"<bpt id=\"p1\">**</bpt>After your changes<ept id=\"p1\">**</ept>","source":"**After your changes**"},{"content":"Debug the issue.","pos":[6119,6135]},{"content":"After the developer has finished, the system administrator can remove \"devtempuser\" from the sandbox database.","pos":[6137,6247]},{"content":"This step prevents the developer from having permanent access to the sandbox database.","pos":[6248,6334]}]}