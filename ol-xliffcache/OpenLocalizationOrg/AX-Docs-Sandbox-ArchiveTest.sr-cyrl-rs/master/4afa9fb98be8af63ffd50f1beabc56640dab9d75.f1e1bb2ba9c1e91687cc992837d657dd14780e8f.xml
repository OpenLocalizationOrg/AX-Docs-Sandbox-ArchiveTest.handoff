{"content":"---\n\n# required metadata\n\ntitle: Register a subclass for factory methods\ndescription: This topic describes how to register your own variations for the factories.\nauthor: MichaelFruergaardPontoppidan\nmanager: AnnBe\nms.date: 07/10/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: robinr\nms.search.scope: Operations, Platform, AX Platform\n# ms.tgt_pltfrm: \nms.custom: 89563\nms.assetid: \nms.search.region: Global\n# ms.search.industry: \nms.author: mfp\nms.search.validFrom: 2017-07-01\nms.dyn365.ops.version: Platform update 9\n\n---\n\n# Register a subclass for factory methods\n\nClass inheritance is a central concept in X++, as in other object-oriented languages. The object-oriented strategy pattern is used throughout the X++ business logic. In this pattern, variations in behavior can be encapsulated by subclasses, and the business process uses an abstract base class or interface. A factory method determines the variation that is used, by creating an instance of a specific subclass.\n\nThis topic describes how to register your own variations for the factories.\n\nIn X++, the factories use reflection to perform the following tasks:\n\n+ Find the correct subclass. The factory uses an extension framework to search all subclasses in a hierarchy for a specific set of attributes. If the attributes that decorate a subclass match the parameters that were passed to the factory, that specific class is used.\n+ Create an instance. After the right type is identified, reflection is used to create an instance of the class.\n\nThe following illustrations shows a typical decorated hierarchy.\n\n![Class hierarchy that has three subclasses, each of which is decorated with an attribute](media/hierarchy.png)\n\nIn X++, two extension frameworks serve the same purpose. The implementer of the factory method determines which extension framework should be used:\n\n+ [SysExtension](https://blogs.msdn.microsoft.com/mfp/2013/06/12/sysextension-framework-to-the-rescue/)\n\n  - This extension framework uses custom attributes that make it easier to consume.\n  - It supports singletons that save a little performance when the same instance is created repeatedly. This extension framework is especially useful for stateless subclasses.\n  - It seamlessly supports extensible enums that are often used to determine the variant.\n\n+ SysPlugin\n\n  - This extension framework is based on the Managed Extension Framework. The Managed Extension Framework makes the SysPlugin extension framework available to non-X++ code.\n  - It uses the **ExportMetadataAttribute** attribute to decorate the variants and is string-based.\n  - It uses the **ExportAttribute** attribute to make the variant discoverable.\n\n## Introduce a new variant\n\n1. Identify the base class (or interface) of the variant that you must implement.\n2. Create a new subclass of the base class, and implement your variation.\n3. Identify which attribute is required in order to register your class. There are two approaches:\n\n    + Look for attributes that are defined on other subclasses in the hierarchy.\n    + Look at the implementation of the factory method. That implementation will contain the attributes that the factory method is searching for.\n\n4. Decorate your subclass with the attribute that was used to match your variation.\n\n**SysExtension example**\n\n    [WHSWorkExecuteMode(WHSWorkExecuteMode::About)]\n    class WHSWorkExecuteDisplayAbout extends WHSWorkExecuteDisplay\n    {\n        // Your code here.\n    }\n\n**SysPlugin example**\n\n    [ExportMetadataAttribute('CaseIAssociation', 'Lead'),\n    ExportAttribute('Dynamics.AX.Application.CaseIAssociation')]\n    class smmLeadCaseAssociationProvider implements CaseIAssociation\n    {\n        // Your code here.\n    }\n","nodes":[{"pos":[4,653],"embed":true,"restype":"x-metadata","content":"\n# required metadata\n\ntitle: Register a subclass for factory methods\ndescription: This topic describes how to register your own variations for the factories.\nauthor: MichaelFruergaardPontoppidan\nmanager: AnnBe\nms.date: 07/10/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: robinr\nms.search.scope: Operations, Platform, AX Platform\n# ms.tgt_pltfrm: \nms.custom: 89563\nms.assetid: \nms.search.region: Global\n# ms.search.industry: \nms.author: mfp\nms.search.validFrom: 2017-07-01\nms.dyn365.ops.version: Platform update 9\n","nodes":[{"content":"Register a subclass for factory methods","nodes":[{"pos":[0,39],"content":"Register a subclass for factory methods","nodes":[{"content":"Register a subclass for factory methods","pos":[0,39]}]}],"path":["title"],"extradata":"MT"},{"content":"This topic describes how to register your own variations for the factories.","nodes":[{"pos":[0,75],"content":"This topic describes how to register your own variations for the factories.","nodes":[{"content":"This topic describes how to register your own variations for the factories.","pos":[0,75]}]}],"path":["description"],"extradata":"MT"}],"yml":true},{"pos":[661,700],"content":"Register a subclass for factory methods","linkify":"Register a subclass for factory methods","nodes":[{"content":"Register a subclass for factory methods","pos":[0,39]}]},{"content":"Class inheritance is a central concept in X++, as in other object-oriented languages.","pos":[702,787]},{"content":"The object-oriented strategy pattern is used throughout the X++ business logic.","pos":[788,867]},{"content":"In this pattern, variations in behavior can be encapsulated by subclasses, and the business process uses an abstract base class or interface.","pos":[868,1009]},{"content":"A factory method determines the variation that is used, by creating an instance of a specific subclass.","pos":[1010,1113]},{"content":"This topic describes how to register your own variations for the factories.","pos":[1115,1190]},{"content":"In X++, the factories use reflection to perform the following tasks:","pos":[1192,1260]},{"content":"Find the correct subclass.","pos":[1264,1290]},{"content":"The factory uses an extension framework to search all subclasses in a hierarchy for a specific set of attributes.","pos":[1291,1404]},{"content":"If the attributes that decorate a subclass match the parameters that were passed to the factory, that specific class is used.","pos":[1405,1530]},{"content":"Create an instance.","pos":[1533,1552]},{"content":"After the right type is identified, reflection is used to create an instance of the class.","pos":[1553,1643]},{"content":"The following illustrations shows a typical decorated hierarchy.","pos":[1645,1709]},{"content":"Class hierarchy that has three subclasses, each of which is decorated with an attribute","pos":[1713,1800]},{"content":"In X++, two extension frameworks serve the same purpose.","pos":[1824,1880]},{"content":"The implementer of the factory method determines which extension framework should be used:","pos":[1881,1971]},{"pos":[1975,2076],"content":"<bpt id=\"p1\">[</bpt>SysExtension<ept id=\"p1\">](https://blogs.msdn.microsoft.com/mfp/2013/06/12/sysextension-framework-to-the-rescue/)</ept>","source":"[SysExtension](https://blogs.msdn.microsoft.com/mfp/2013/06/12/sysextension-framework-to-the-rescue/)"},{"content":"This extension framework uses custom attributes that make it easier to consume.","pos":[2082,2161]},{"content":"It supports singletons that save a little performance when the same instance is created repeatedly.","pos":[2166,2265]},{"content":"This extension framework is especially useful for stateless subclasses.","pos":[2266,2337]},{"content":"It seamlessly supports extensible enums that are often used to determine the variant.","pos":[2342,2427]},{"content":"SysPlugin","pos":[2431,2440]},{"content":"This extension framework is based on the Managed Extension Framework.","pos":[2446,2515]},{"content":"The Managed Extension Framework makes the SysPlugin extension framework available to non-X++ code.","pos":[2516,2614]},{"pos":[2619,2714],"content":"It uses the <bpt id=\"p1\">**</bpt>ExportMetadataAttribute<ept id=\"p1\">**</ept> attribute to decorate the variants and is string-based.","source":"It uses the **ExportMetadataAttribute** attribute to decorate the variants and is string-based."},{"pos":[2719,2794],"content":"It uses the <bpt id=\"p1\">**</bpt>ExportAttribute<ept id=\"p1\">**</ept> attribute to make the variant discoverable.","source":"It uses the **ExportAttribute** attribute to make the variant discoverable."},{"pos":[2799,2822],"content":"Introduce a new variant","linkify":"Introduce a new variant","nodes":[{"content":"Introduce a new variant","pos":[0,23]}]},{"content":"Identify the base class (or interface) of the variant that you must implement.","pos":[2827,2905]},{"content":"Create a new subclass of the base class, and implement your variation.","pos":[2909,2979]},{"content":"Identify which attribute is required in order to register your class.","pos":[2983,3052]},{"content":"There are two approaches:","pos":[3053,3078]},{"content":"Look for attributes that are defined on other subclasses in the hierarchy.","pos":[3086,3160]},{"content":"Look at the implementation of the factory method.","pos":[3167,3216]},{"content":"That implementation will contain the attributes that the factory method is searching for.","pos":[3217,3306]},{"content":"Decorate your subclass with the attribute that was used to match your variation.","pos":[3311,3391]},{"pos":[3393,3417],"content":"<bpt id=\"p1\">**</bpt>SysExtension example<ept id=\"p1\">**</ept>","source":"**SysExtension example**"},{"pos":[3578,3599],"content":"<bpt id=\"p1\">**</bpt>SysPlugin example<ept id=\"p1\">**</ept>","source":"**SysPlugin example**"}]}