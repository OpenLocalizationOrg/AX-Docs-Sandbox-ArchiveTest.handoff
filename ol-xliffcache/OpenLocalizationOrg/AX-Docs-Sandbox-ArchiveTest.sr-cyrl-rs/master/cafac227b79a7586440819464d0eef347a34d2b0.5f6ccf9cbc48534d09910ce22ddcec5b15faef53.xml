{"content":"---\n# required metadata\n\ntitle: Retail SDK packaging\ndescription: This topic explains how to create a Retail deployable package for Microsoft Dynamics 365 for Finance and Operations.\nauthor: mugunthanm\nmanager: AnnBe\nms.date: 07/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-365-retail\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: josaw\nms.search.scope: AX 7.0.0, Operations, Retail, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 28021\nms.assetid: 0fa3c8e7-49e4-417d-afe9-fa2055f6546f\nms.search.region: Global\n# ms.search.industry: \nms.author: sijoshi\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update\n\n---\n\n# Retail SDK packaging\n\n[!include[banner](../../includes/banner.md)]\n\nThis topic explains how to create a retail deployable package for Microsoft Dynamics 365 for Finance and Operations manually.\n\nThe Retail deployable package is a bundle package which includes all the below retail componetst:\n\n-   Commerce runtime (CRT)\n-   Retail Server\n-   Modern POS\n-   Cloud POS\n-   Hardware station\n-   Channel database scripts\n\nFor detailed information about the Retail software development kit (SDK), see [Retail SDK overview](retail-sdk-overview.md). \n\n## Retail Deployable Package\nRetail deployable package is an asset that can be consumed by the LCS deployment service or it can be deployed manually to service or install a customization. The Retail SDK generates the same package that is developed for Microsoft hotfixes or updates, so that there is one way to install or deploy updates and customizations to the existing solution.\n\n### Steps to create a Retail deployable package\n\nThere are two ways to generate the Retail deployable package. One is using the Retail build automation or manually using the build tools in Retail SDK. In this topic we will focus on the manual way.\n1. Customize or add functionality to the Retail stack.\n2. Use the build tools to give an identity to the customized installation package, code-sign it, and specify the customized CRT, Retail Server, customized Hardware station assemblies, and customized database scripts.\n3. After all the settings have been specified on Customization.settings file under Retail SDK\\BuildTools folder, run **msbuild /t:rebuild** on the root of the Retail SDK folde using the VS dev command prompt tool to generate the retail deployable packages. Before building the package place all the customized assemblies to Retail SDK\\Refernces folder and also place the modified config files like commerceruntime.config, CommerceRuntime.MPOSOffline.config, dllhost.exe.config to the Retail SDk\\Assets folder.\n\n## Retail SDK build tools – Customization settings\nBuildTools\\Customization.setting files is where most of the configuration values for the Retail SDK are set for build and packaging. These values control how binaries, components, and packages are named, versioned, and code-signed. After you define this metadata, The Retail SDK build system uses it to give an identity to the assets, and to package the customization assets for all the Retail components.\n\nBelow are the list fo configurations available in Customization.Settings file:\n-   **AssemblyNamePrefix** – Specify the prefix name for the assembly. When you build the Retail SDK, all the assemblies are prefixed with this name.\n-   **CustomAssemblyVersion** – Specify the custom assembly version for all assemblies that are built by using the Retail SDK.\n-   **CustomVersion** – Specify the custom file version for all assemblies that are built by using the Retail SDK.\n-   **CustomName** – Specify the custom name for the assembly.\n-   **CustomDescription** – Specify the description for the assembly.\n-   **CustomDescription** – Specify the publisher for the assembly.\n-   **CustomDescription** – Specify the copyright for the assembly.\n-   **SignAssembly** – Specify **True** if you want to sign the assembly during the build.\n-   **DelaySign** – Specify **True** if you want to delay signing of the assets during the build.\n-   **AssemblyOriginatorKeyFile** – Specify the strong name key to use to sign the assembly.\n-   **ModernPOSPackageCertificateKeyFile** – Specify the PFX file to use to sign Modern POS and Hardware station.\n-   **RetailServerLibraryPathForProxyGeneration** – Specify the customized Retail Server assembly to use for proxy generation (both TypeScript and C\\# proxy).\n-   In the **ItemGroup** section:\n    -   **ISV\\_CommerceRuntime\\_CustomizableFile** – Specify all the customized CRT assembly. You can have multiple entries, one for each customized CRT assembly.\n    -   **ISV\\_RetailServer\\_CustomizableFile** – Specify all the customized Retail Server assembly. You can have multiple entries, one for each customized Retail Server assembly.\n    -   **ISV\\_HardwareStation\\_CustomizableFile** – Specify all the customized Hardware station assembly. You can have multiple entries, one for each customized Hardware station assembly.\n    -   **ISV\\_CustomDatabaseFile\\_Upgrade\\_Custom** – Specify all the customized database scripts.\n\n\n#### Retail Deployable package\n\n### CRT extension assemblies\nBy default, there is no separate package for invidual retail componetst, because CRT isn't deployed individually, instead, CRT assets are packaged together with other application components, such as Modern POS, Retail Server, and Microsoft Dynamics 365 for Operations HQ. In order for the Retail SDK build tools to package CRT in all the components where it's used, you must make the following configuration entries:\n\n1.  **CRT extension assemblies** – These will be the new assemblies where you've written CRT extensions. Specify an entry for CRT extension assemblies in Retail SDK\\\\BuildTools\\\\Customization.settings. \n\n    [![crt-customization settings](./media/crt-customization-settings.png)](./media/crt-customization-settings.png)\n    \n2.  **CRT commerceruntime.config file** – If you have a new CRT assembly, you must add it to the CRT configuration file so that the runtime can load it. Specify an entry for CRT extension assemblies in Retail SDK\\\\References\\\\commerceruntime.config. \n\n    [![crt-config](./media/crt-config.png)](./media/crt-config.png)\n\n#### Retail Server extension assemblies\n1.  **Retail Server extension assemblies **– These will be the new assemblies where you've written Retail Server customizations. Specify an entry for CRT extension assemblies in Retail SDK\\\\BuildTools\\\\Customization.settings. \n\n    [![retail server customization setting](./media/retail-server-customization-setting.png)](./media/retail-server-customization-setting.png)\n    \n2.  **Retail Server web.config file** – You must add an entry for Retail Server extension assemblies to the Retail Server web.config file, so that they are loaded and used. Specify an entry for Retail Server Extension assemblies in Retail SDK\\\\Packages\\\\RetailServer\\\\Code\\\\web.config. \n\n    [![retail server web config](./media/retail-server-web-config.png)](./media/retail-server-web-config.png)\n\n##### Database scripts\nAs a part of a customization, you might have to upgrade a channel database in addition to a Modern POS offline database. Currently, you use upgrade SQL scripts to upgrade the channel and Modern POS offline databases. You can write an upgrade SQL script and put it at Retail SDK\\Database\\Upgrade\\Custom, so that packaging tools can pick it up and include it in the deployable package for the correct components (Retail Server and Modern POS Offline). \n\n[![custom db script](./media/custom-db-script.png)](./media/custom-db-script.png) \nYou must also update Retail SDK\\\\BuildTools\\\\Customization.settings to instruct the build tools which files to package for the database. \n\n[![database upgrade customization setting](./media/database-upgrade-customization-setting-1024x311.png)](./media/database-upgrade-customization-setting.png)\nDatabase scripts are packaged together with the Retail Server and Modern POS Offline packages, and are run when Retail Server and Modern POS are installed. If there are multiple custom database scripts, they are run in alphabetical order. Therefore, if you want to run the scripts in a specific order, you must name them accordingly. The CRT.RETAILUPGRADEHISTORY table keeps track of which scripts are already applied to the database. Therefore, the next database upgrade will run only those upgrade scripts that don't have an entry in the CRT.RETAILUPGRADEHISTORY table.\n\n## Generate a retail deployable package\n\nThe Retail SDK fully supports msbuild. To build the Retail SDK and , open a **Visual studio 2015 developer Command Prompt tool** window as an administrator, and run **msbuild** (or, for a non-debug version, run **msbuild /p:Configuration=Release**). \n\n### Packages\n\nAfter the build is completed, retail deployable packages(RetailDeployablePackage.zip) is generated in the Retail SDK\\Packages\\RetailDeployablePackage folder. Note: There will not be any seperate packages for retail, all will be combined and created as one bundle package called RetailDeployablePackage\n      \n ## Deploy the Retail Deployable packages:\n \nTo deploy the packages either manually or using the LCS automated flow, please follow the below link:\n[Apply a deployable package](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/deployment/apply-deployable-package-system)\n\n[Install a deployable package](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/deployment/install-deployable-package)\n","nodes":[{"pos":[4,724],"embed":true,"restype":"x-metadata","content":"# required metadata\n\ntitle: Retail SDK packaging\ndescription: This topic explains how to create a Retail deployable package for Microsoft Dynamics 365 for Finance and Operations.\nauthor: mugunthanm\nmanager: AnnBe\nms.date: 07/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-365-retail\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: josaw\nms.search.scope: AX 7.0.0, Operations, Retail, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 28021\nms.assetid: 0fa3c8e7-49e4-417d-afe9-fa2055f6546f\nms.search.region: Global\n# ms.search.industry: \nms.author: sijoshi\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update\n","nodes":[{"content":"Retail SDK packaging","nodes":[{"pos":[0,20],"content":"Retail SDK packaging","nodes":[{"content":"Retail SDK packaging","pos":[0,20]}]}],"path":["title"],"extradata":"MT"},{"content":"This topic explains how to create a Retail deployable package for Microsoft Dynamics 365 for Finance and Operations.","nodes":[{"pos":[0,116],"content":"This topic explains how to create a Retail deployable package for Microsoft Dynamics 365 for Finance and Operations.","nodes":[{"content":"This topic explains how to create a Retail deployable package for Microsoft Dynamics 365 for Finance and Operations.","pos":[0,116]}]}],"path":["description"],"extradata":"MT"}],"header":"# required metadata\n","yml":true},{"pos":[732,752],"content":"Retail SDK packaging","linkify":"Retail SDK packaging","nodes":[{"content":"Retail SDK packaging","pos":[0,20]}]},{"content":"This topic explains how to create a retail deployable package for Microsoft Dynamics 365 for Finance and Operations manually.","pos":[800,925]},{"content":"The Retail deployable package is a bundle package which includes all the below retail componetst:","pos":[927,1024]},{"content":"Commerce runtime (CRT)","pos":[1030,1052]},{"content":"Retail Server","pos":[1057,1070]},{"content":"Modern POS","pos":[1075,1085]},{"content":"Cloud POS","pos":[1090,1099]},{"content":"Hardware station","pos":[1104,1120]},{"content":"Channel database scripts","pos":[1125,1149]},{"pos":[1151,1275],"content":"For detailed information about the Retail software development kit (SDK), see <bpt id=\"p1\">[</bpt>Retail SDK overview<ept id=\"p1\">](retail-sdk-overview.md)</ept>.","source":"For detailed information about the Retail software development kit (SDK), see [Retail SDK overview](retail-sdk-overview.md)."},{"pos":[1281,1306],"content":"Retail Deployable Package","linkify":"Retail Deployable Package","nodes":[{"content":"Retail Deployable Package","pos":[0,25]}]},{"content":"Retail deployable package is an asset that can be consumed by the LCS deployment service or it can be deployed manually to service or install a customization.","pos":[1307,1465]},{"content":"The Retail SDK generates the same package that is developed for Microsoft hotfixes or updates, so that there is one way to install or deploy updates and customizations to the existing solution.","pos":[1466,1659]},{"pos":[1665,1708],"content":"Steps to create a Retail deployable package","linkify":"Steps to create a Retail deployable package","nodes":[{"content":"Steps to create a Retail deployable package","pos":[0,43]}]},{"content":"There are two ways to generate the Retail deployable package.","pos":[1710,1771]},{"content":"One is using the Retail build automation or manually using the build tools in Retail SDK.","pos":[1772,1861]},{"content":"In this topic we will focus on the manual way.","pos":[1862,1908]},{"content":"Customize or add functionality to the Retail stack.","pos":[1912,1963]},{"content":"Use the build tools to give an identity to the customized installation package, code-sign it, and specify the customized CRT, Retail Server, customized Hardware station assemblies, and customized database scripts.","pos":[1967,2180]},{"content":"After all the settings have been specified on Customization.settings file under Retail SDK\\BuildTools folder, run <bpt id=\"p1\">**</bpt>msbuild /t:rebuild<ept id=\"p1\">**</ept> on the root of the Retail SDK folde using the VS dev command prompt tool to generate the retail deployable packages.","pos":[2184,2437],"source":"After all the settings have been specified on Customization.settings file under Retail SDK\\BuildTools folder, run **msbuild /t:rebuild** on the root of the Retail SDK folde using the VS dev command prompt tool to generate the retail deployable packages."},{"content":"Before building the package place all the customized assemblies to Retail SDK\\Refernces folder and also place the modified config files like commerceruntime.config, CommerceRuntime.MPOSOffline.config, dllhost.exe.config to the Retail SDk\\Assets folder.","pos":[2438,2690]},{"pos":[2695,2742],"content":"Retail SDK build tools – Customization settings","linkify":"Retail SDK build tools – Customization settings","nodes":[{"content":"Retail SDK build tools – Customization settings","pos":[0,47]}]},{"content":"BuildTools\\Customization.setting files is where most of the configuration values for the Retail SDK are set for build and packaging.","pos":[2743,2875]},{"content":"These values control how binaries, components, and packages are named, versioned, and code-signed.","pos":[2876,2974]},{"content":"After you define this metadata, The Retail SDK build system uses it to give an identity to the assets, and to package the customization assets for all the Retail components.","pos":[2975,3148]},{"content":"Below are the list fo configurations available in Customization.Settings file:","pos":[3150,3228]},{"content":"<bpt id=\"p1\">**</bpt>AssemblyNamePrefix<ept id=\"p1\">**</ept> – Specify the prefix name for the assembly.","pos":[3233,3299],"source":"**AssemblyNamePrefix** – Specify the prefix name for the assembly."},{"content":"When you build the Retail SDK, all the assemblies are prefixed with this name.","pos":[3300,3378]},{"pos":[3383,3505],"content":"<bpt id=\"p1\">**</bpt>CustomAssemblyVersion<ept id=\"p1\">**</ept> – Specify the custom assembly version for all assemblies that are built by using the Retail SDK.","source":"**CustomAssemblyVersion** – Specify the custom assembly version for all assemblies that are built by using the Retail SDK."},{"pos":[3510,3620],"content":"<bpt id=\"p1\">**</bpt>CustomVersion<ept id=\"p1\">**</ept> – Specify the custom file version for all assemblies that are built by using the Retail SDK.","source":"**CustomVersion** – Specify the custom file version for all assemblies that are built by using the Retail SDK."},{"pos":[3625,3683],"content":"<bpt id=\"p1\">**</bpt>CustomName<ept id=\"p1\">**</ept> – Specify the custom name for the assembly.","source":"**CustomName** – Specify the custom name for the assembly."},{"pos":[3688,3753],"content":"<bpt id=\"p1\">**</bpt>CustomDescription<ept id=\"p1\">**</ept> – Specify the description for the assembly.","source":"**CustomDescription** – Specify the description for the assembly."},{"pos":[3758,3821],"content":"<bpt id=\"p1\">**</bpt>CustomDescription<ept id=\"p1\">**</ept> – Specify the publisher for the assembly.","source":"**CustomDescription** – Specify the publisher for the assembly."},{"pos":[3826,3889],"content":"<bpt id=\"p1\">**</bpt>CustomDescription<ept id=\"p1\">**</ept> – Specify the copyright for the assembly.","source":"**CustomDescription** – Specify the copyright for the assembly."},{"pos":[3894,3980],"content":"<bpt id=\"p1\">**</bpt>SignAssembly<ept id=\"p1\">**</ept> – Specify <bpt id=\"p2\">**</bpt>True<ept id=\"p2\">**</ept> if you want to sign the assembly during the build.","source":"**SignAssembly** – Specify **True** if you want to sign the assembly during the build."},{"pos":[3985,4078],"content":"<bpt id=\"p1\">**</bpt>DelaySign<ept id=\"p1\">**</ept> – Specify <bpt id=\"p2\">**</bpt>True<ept id=\"p2\">**</ept> if you want to delay signing of the assets during the build.","source":"**DelaySign** – Specify **True** if you want to delay signing of the assets during the build."},{"pos":[4083,4171],"content":"<bpt id=\"p1\">**</bpt>AssemblyOriginatorKeyFile<ept id=\"p1\">**</ept> – Specify the strong name key to use to sign the assembly.","source":"**AssemblyOriginatorKeyFile** – Specify the strong name key to use to sign the assembly."},{"pos":[4176,4285],"content":"<bpt id=\"p1\">**</bpt>ModernPOSPackageCertificateKeyFile<ept id=\"p1\">**</ept> – Specify the PFX file to use to sign Modern POS and Hardware station.","source":"**ModernPOSPackageCertificateKeyFile** – Specify the PFX file to use to sign Modern POS and Hardware station."},{"pos":[4290,4444],"content":"<bpt id=\"p1\">**</bpt>RetailServerLibraryPathForProxyGeneration<ept id=\"p1\">**</ept> – Specify the customized Retail Server assembly to use for proxy generation (both TypeScript and C<ph id=\"ph1\">\\#</ph> proxy).","source":"**RetailServerLibraryPathForProxyGeneration** – Specify the customized Retail Server assembly to use for proxy generation (both TypeScript and C\\# proxy)."},{"pos":[4449,4478],"content":"In the <bpt id=\"p1\">**</bpt>ItemGroup<ept id=\"p1\">**</ept> section:","source":"In the **ItemGroup** section:"},{"content":"<bpt id=\"p1\">**</bpt>ISV<ph id=\"ph1\">\\_</ph>CommerceRuntime<ph id=\"ph2\">\\_</ph>CustomizableFile<ept id=\"p1\">**</ept> – Specify all the customized CRT assembly.","pos":[4487,4572],"source":"**ISV\\_CommerceRuntime\\_CustomizableFile** – Specify all the customized CRT assembly."},{"content":"You can have multiple entries, one for each customized CRT assembly.","pos":[4573,4641]},{"content":"<bpt id=\"p1\">**</bpt>ISV<ph id=\"ph1\">\\_</ph>RetailServer<ph id=\"ph2\">\\_</ph>CustomizableFile<ept id=\"p1\">**</ept> – Specify all the customized Retail Server assembly.","pos":[4650,4742],"source":"**ISV\\_RetailServer\\_CustomizableFile** – Specify all the customized Retail Server assembly."},{"content":"You can have multiple entries, one for each customized Retail Server assembly.","pos":[4743,4821]},{"content":"<bpt id=\"p1\">**</bpt>ISV<ph id=\"ph1\">\\_</ph>HardwareStation<ph id=\"ph2\">\\_</ph>CustomizableFile<ept id=\"p1\">**</ept> – Specify all the customized Hardware station assembly.","pos":[4830,4928],"source":"**ISV\\_HardwareStation\\_CustomizableFile** – Specify all the customized Hardware station assembly."},{"content":"You can have multiple entries, one for each customized Hardware station assembly.","pos":[4929,5010]},{"pos":[5019,5110],"content":"<bpt id=\"p1\">**</bpt>ISV<ph id=\"ph1\">\\_</ph>CustomDatabaseFile<ph id=\"ph2\">\\_</ph>Upgrade<ph id=\"ph3\">\\_</ph>Custom<ept id=\"p1\">**</ept> – Specify all the customized database scripts.","source":"**ISV\\_CustomDatabaseFile\\_Upgrade\\_Custom** – Specify all the customized database scripts."},{"pos":[5118,5143],"content":"Retail Deployable package","linkify":"Retail Deployable package","nodes":[{"content":"Retail Deployable package","pos":[0,25]}]},{"pos":[5149,5173],"content":"CRT extension assemblies","linkify":"CRT extension assemblies","nodes":[{"content":"CRT extension assemblies","pos":[0,24]}]},{"content":"By default, there is no separate package for invidual retail componetst, because CRT isn't deployed individually, instead, CRT assets are packaged together with other application components, such as Modern POS, Retail Server, and Microsoft Dynamics 365 for Operations HQ.","pos":[5174,5445]},{"content":"In order for the Retail SDK build tools to package CRT in all the components where it's used, you must make the following configuration entries:","pos":[5446,5590]},{"content":"<bpt id=\"p1\">**</bpt>CRT extension assemblies<ept id=\"p1\">**</ept> – These will be the new assemblies where you've written CRT extensions.","pos":[5596,5696],"source":"**CRT extension assemblies** – These will be the new assemblies where you've written CRT extensions."},{"content":"Specify an entry for CRT extension assemblies in Retail SDK<ph id=\"ph1\">\\\\</ph>BuildTools<ph id=\"ph2\">\\\\</ph>Customization.settings.","pos":[5697,5793],"source":" Specify an entry for CRT extension assemblies in Retail SDK\\\\BuildTools\\\\Customization.settings."},{"pos":[5800,5911],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>crt-customization settings<ept id=\"p1\">](./media/crt-customization-settings.png)](./media/crt-customization-settings.png)</ept>","source":"[![crt-customization settings](./media/crt-customization-settings.png)](./media/crt-customization-settings.png)"},{"content":"<bpt id=\"p1\">**</bpt>CRT commerceruntime.config file<ept id=\"p1\">**</ept> – If you have a new CRT assembly, you must add it to the CRT configuration file so that the runtime can load it.","pos":[5921,6069],"source":"**CRT commerceruntime.config file** – If you have a new CRT assembly, you must add it to the CRT configuration file so that the runtime can load it."},{"content":"Specify an entry for CRT extension assemblies in Retail SDK<ph id=\"ph1\">\\\\</ph>References<ph id=\"ph2\">\\\\</ph>commerceruntime.config.","pos":[6070,6166],"source":" Specify an entry for CRT extension assemblies in Retail SDK\\\\References\\\\commerceruntime.config."},{"pos":[6173,6236],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>crt-config<ept id=\"p1\">](./media/crt-config.png)](./media/crt-config.png)</ept>","source":"[![crt-config](./media/crt-config.png)](./media/crt-config.png)"},{"pos":[6243,6277],"content":"Retail Server extension assemblies","linkify":"Retail Server extension assemblies","nodes":[{"content":"Retail Server extension assemblies","pos":[0,34]}]},{"content":"**Retail Server extension assemblies **– These will be the new assemblies where you've written Retail Server customizations.","pos":[6282,6406]},{"content":"Specify an entry for CRT extension assemblies in Retail SDK<ph id=\"ph1\">\\\\</ph>BuildTools<ph id=\"ph2\">\\\\</ph>Customization.settings.","pos":[6407,6503],"source":" Specify an entry for CRT extension assemblies in Retail SDK\\\\BuildTools\\\\Customization.settings."},{"pos":[6510,6648],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>retail server customization setting<ept id=\"p1\">](./media/retail-server-customization-setting.png)](./media/retail-server-customization-setting.png)</ept>","source":"[![retail server customization setting](./media/retail-server-customization-setting.png)](./media/retail-server-customization-setting.png)"},{"content":"<bpt id=\"p1\">**</bpt>Retail Server web.config file<ept id=\"p1\">**</ept> – You must add an entry for Retail Server extension assemblies to the Retail Server web.config file, so that they are loaded and used.","pos":[6658,6826],"source":"**Retail Server web.config file** – You must add an entry for Retail Server extension assemblies to the Retail Server web.config file, so that they are loaded and used."},{"content":"Specify an entry for Retail Server Extension assemblies in Retail SDK<ph id=\"ph1\">\\\\</ph>Packages<ph id=\"ph2\">\\\\</ph>RetailServer<ph id=\"ph3\">\\\\</ph>Code<ph id=\"ph4\">\\\\</ph>web.config.","pos":[6827,6939],"source":" Specify an entry for Retail Server Extension assemblies in Retail SDK\\\\Packages\\\\RetailServer\\\\Code\\\\web.config."},{"pos":[6946,7051],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>retail server web config<ept id=\"p1\">](./media/retail-server-web-config.png)](./media/retail-server-web-config.png)</ept>","source":"[![retail server web config](./media/retail-server-web-config.png)](./media/retail-server-web-config.png)"},{"pos":[7059,7075],"content":"Database scripts","linkify":"Database scripts","nodes":[{"content":"Database scripts","pos":[0,16]}]},{"content":"As a part of a customization, you might have to upgrade a channel database in addition to a Modern POS offline database.","pos":[7076,7196]},{"content":"Currently, you use upgrade SQL scripts to upgrade the channel and Modern POS offline databases.","pos":[7197,7292]},{"content":"You can write an upgrade SQL script and put it at Retail SDK\\Database\\Upgrade\\Custom, so that packaging tools can pick it up and include it in the deployable package for the correct components (Retail Server and Modern POS Offline).","pos":[7293,7525]},{"pos":[7528,7747],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>custom db script<ept id=\"p1\">](./media/custom-db-script.png)](./media/custom-db-script.png)</ept> You must also update Retail SDK<ph id=\"ph2\">\\\\</ph>BuildTools<ph id=\"ph3\">\\\\</ph>Customization.settings to instruct the build tools which files to package for the database.","source":"[![custom db script](./media/custom-db-script.png)](./media/custom-db-script.png) \nYou must also update Retail SDK\\\\BuildTools\\\\Customization.settings to instruct the build tools which files to package for the database."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>database upgrade customization setting<ept id=\"p1\">](./media/database-upgrade-customization-setting-1024x311.png)](./media/database-upgrade-customization-setting.png)</ept> Database scripts are packaged together with the Retail Server and Modern POS Offline packages, and are run when Retail Server and Modern POS are installed.","pos":[7750,8062],"source":"[![database upgrade customization setting](./media/database-upgrade-customization-setting-1024x311.png)](./media/database-upgrade-customization-setting.png)\nDatabase scripts are packaged together with the Retail Server and Modern POS Offline packages, and are run when Retail Server and Modern POS are installed."},{"content":"If there are multiple custom database scripts, they are run in alphabetical order.","pos":[8063,8145]},{"content":"Therefore, if you want to run the scripts in a specific order, you must name them accordingly.","pos":[8146,8240]},{"content":"The CRT.RETAILUPGRADEHISTORY table keeps track of which scripts are already applied to the database.","pos":[8241,8341]},{"content":"Therefore, the next database upgrade will run only those upgrade scripts that don't have an entry in the CRT.RETAILUPGRADEHISTORY table.","pos":[8342,8478]},{"pos":[8483,8519],"content":"Generate a retail deployable package","linkify":"Generate a retail deployable package","nodes":[{"content":"Generate a retail deployable package","pos":[0,36]}]},{"content":"The Retail SDK fully supports msbuild.","pos":[8521,8559]},{"content":"To build the Retail SDK and , open a <bpt id=\"p1\">**</bpt>Visual studio 2015 developer Command Prompt tool<ept id=\"p1\">**</ept> window as an administrator, and run <bpt id=\"p2\">**</bpt>msbuild<ept id=\"p2\">**</ept> (or, for a non-debug version, run <bpt id=\"p3\">**</bpt>msbuild /p:Configuration=Release<ept id=\"p3\">**</ept>).","pos":[8560,8770],"source":" To build the Retail SDK and , open a **Visual studio 2015 developer Command Prompt tool** window as an administrator, and run **msbuild** (or, for a non-debug version, run **msbuild /p:Configuration=Release**)."},{"pos":[8777,8785],"content":"Packages","linkify":"Packages","nodes":[{"content":"Packages","pos":[0,8]}]},{"content":"After the build is completed, retail deployable packages(RetailDeployablePackage.zip) is generated in the Retail SDK\\Packages\\RetailDeployablePackage folder.","pos":[8787,8944]},{"content":"Note: There will not be any seperate packages for retail, all will be combined and created as one bundle package called RetailDeployablePackage","pos":[8945,9088]},{"pos":[9100,9138],"content":"Deploy the Retail Deployable packages:","linkify":"Deploy the Retail Deployable packages:","nodes":[{"content":"Deploy the Retail Deployable packages:","pos":[0,38]}]},{"pos":[9141,9381],"content":"To deploy the packages either manually or using the LCS automated flow, please follow the below link: <bpt id=\"p1\">[</bpt>Apply a deployable package<ept id=\"p1\">](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/deployment/apply-deployable-package-system)</ept>","source":"To deploy the packages either manually or using the LCS automated flow, please follow the below link:\n[Apply a deployable package](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/deployment/apply-deployable-package-system)"},{"pos":[9383,9518],"content":"<bpt id=\"p1\">[</bpt>Install a deployable package<ept id=\"p1\">](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/deployment/install-deployable-package)</ept>","source":"[Install a deployable package](https://docs.microsoft.com/en-us/dynamics365/operations/dev-itpro/deployment/install-deployable-package)"}]}