{"content":"---\n# required metadata\n\ntitle: Develop and deploy custom models to on-premises environments\ndescription: This topic describes the process of developing customizations and extensions, and deploying them to an on-premises environment. \nauthor: kfend\nmanager: AnnBe\nms.date: 06/09/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \nms.reviewer: kfend\nms.search.scope: Operations, Platform, UnifiedOperations, AX Platform\n# ms.tgt_pltfrm: \nms.custom: 107013\nms.assetid: \nms.search.region: Global\n# ms.search.industry: \nms.author: robadawy\nms.search.validFrom: 2016-05-31\nms.dyn365.ops.version: Platform update 8\n\n---\n\n# Develop and deploy custom models to on-premises environments\nThis topic describes how to develop customizations and extensions, and deploy them to an on-premises environment. On-premises environments are also referred to as local business data (LBD) environments. This topic focuses on the ways that this process differs from the process in a run-time cloud environment.\n\nThe process has the following main steps:\n\n1. Deploy your development and build environments.\n2. Create a deployable package of your code and customizations.\n3. Upload the deployable package to your project in Microsoft Dynamics Lifecycle Services (LCS).\n4. Configure and deploy an on-premises runtime environment that includes your deployable package. This environment can be either a sandbox environment or a production environment.\n\nThe following sections provide more information about this process.\n\n## Development tools and platform\nWhether you're developing, extending, or customizing cloud applications or on-premises applications, the development platform, tools, and environments (virtual machines [VMs]) are the same. Your custom code is developed on the same development VMs, regardless of whether your target runtime environments are in a cloud environment or an on-premises environment.\n\nFor detailed information about development, see the [Developer home page](../dev-tools/developer-home-page.md). For information about extensibility and customization, see the [Extensibility home page](../extensibility/extensibility-home-page.md). For information about building, testing, and continuous delivery, see the [Continuous delivery homepage](../dev-tools/continuous-delivery-home-page.md).\n\n## Deploy development and build environments\nYou can use an on-premises LCS project to deploy build and development environments on Microsoft Azure by using your own Azure subscription. Alternatively, you can download a virtual hard disk (VHD) for local development.\n\nTo deploy a development or build environment in your Azure subscription, or to download a development VHD, open the **Cloud-hosted environments** page in LCS.\n\n[![Cloud-hosted environment menu item](./media/alm-flow-01.png)](./media/alm-flow-01.png)\n\nThen follow these steps.\n    \n1. Click **Add**. \n\n    [![Cloud-hosted environment Add button](./media/alm-flow-02.png)](./media/alm-flow-02.png)\n  \n2. Select **Azure** or **Locally**. If you select **Locally**, find and download a development VHD. If you select **Azure**, you're prompted to select one of three topologies: **Build and Test**, **Demo**, or **Development**.\n3. Complete the deployment steps, and deploy a VM in your Azure subscription.\n\nFor more information about how to configure a local development VHD, see [Access instances](../dev-tools/access-instances.md#vm-that-is-running-onpremises).\n\n> [!NOTE]\n> To deploy environments in your own Azure subscription, you must set up at least one Azure Connector. To set up an Azure Connector, in LCS, open the **Project settings** page, and then click the **Azure connectors** tab. Then follow the instructions to add an Azure Connector. To complete the steps, you must be the tenant administrator of the organization.  \n> [![Project settings menu item](./media/alm-flow-03.png)](./media/alm-flow-03.png)\n\n## Create and upload a deployable package to the LCS Asset library\nWhen you complete a phase of development, and are ready to deploy your code to a sandbox or production on-premises environment, you must create an application deployable package from your models. This process doesn't differ from the process for cloud environments.\n\nIf you're using automated builds (a build environment), the build process creates an application deployable package for you. You can also create an application deployable package from Microsoft Visual Studio in your development environment. For more information on how to create an application deployable package in your development environment, see [Create and apply a deployable package](../deployment/create-apply-deployable-package.md).\n\nWhen your deployable package is ready, follow these steps to upload it to your LCS projectâ€™s Asset library.\n\n1. Open the **Asset library** page.\n\n    [![Asset library menu item](./media/alm-flow-04.png)](./media/alm-flow-04.png)\n\n2. Click the **Software deployable package** tab.\n\n    [![Software deployable package files](./media/alm-flow-05.png)](./media/alm-flow-05.png)\n\n3. Click the plus sign (**+**) to upload the deployable package. \n\n## Configure an on-premises runtime environment that uses your code\nAs of the July 2017 release of Microsoft Dynamics 365 for Finance and Operations, Enterprise edition (on-premises), you can apply your customizations and extensions only during the deployment of a sandbox or production environment.\n\n1. In your LCS project, click **Configure** to deploy your environment.\n\n    [![Sandbox Configure button](./media/alm-flow-06.png)](./media/alm-flow-06.png)\n\n2. In the deployment tool, when you must enter the environment name, click **Advanced settings**.\n\n    [![On premise topology Advanced settings button](./media/alm-flow-07.png)](./media/alm-flow-07.png)\n\n3. Click the **Customize solution assets** tab. \n\n    [![Deployment settings Customize solution assets tab](./media/alm-flow-08.png)](./media/alm-flow-08.png)\n\n4. In the **Select the AOT packages to be deployed** field, select the application (AOT) deployable package that contains your customizations. This field lists all the AOT packages in your Asset library.\n5. Click **Done** to close the **Deployment settings** page, and then continue with the environment deployment process.\n","nodes":[{"pos":[4,735],"embed":true,"restype":"x-metadata","content":"# required metadata\n\ntitle: Develop and deploy custom models to on-premises environments\ndescription: This topic describes the process of developing customizations and extensions, and deploying them to an on-premises environment. \nauthor: kfend\nmanager: AnnBe\nms.date: 06/09/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \nms.reviewer: kfend\nms.search.scope: Operations, Platform, UnifiedOperations, AX Platform\n# ms.tgt_pltfrm: \nms.custom: 107013\nms.assetid: \nms.search.region: Global\n# ms.search.industry: \nms.author: robadawy\nms.search.validFrom: 2016-05-31\nms.dyn365.ops.version: Platform update 8\n","nodes":[{"content":"Develop and deploy custom models to on-premises environments","nodes":[{"pos":[0,60],"content":"Develop and deploy custom models to on-premises environments","nodes":[{"content":"Develop and deploy custom models to on-premises environments","pos":[0,60]}]}],"path":["title"],"extradata":"MT"},{"content":"This topic describes the process of developing customizations and extensions, and deploying them to an on-premises environment.","nodes":[{"pos":[0,127],"content":"This topic describes the process of developing customizations and extensions, and deploying them to an on-premises environment.","nodes":[{"content":"This topic describes the process of developing customizations and extensions, and deploying them to an on-premises environment.","pos":[0,127]}]}],"path":["description"],"extradata":"MT"}],"header":"# required metadata\n","yml":true},{"pos":[743,803],"content":"Develop and deploy custom models to on-premises environments","linkify":"Develop and deploy custom models to on-premises environments","nodes":[{"content":"Develop and deploy custom models to on-premises environments","pos":[0,60]}]},{"content":"This topic describes how to develop customizations and extensions, and deploy them to an on-premises environment.","pos":[804,917]},{"content":"On-premises environments are also referred to as local business data (LBD) environments.","pos":[918,1006]},{"content":"This topic focuses on the ways that this process differs from the process in a run-time cloud environment.","pos":[1007,1113]},{"content":"The process has the following main steps:","pos":[1115,1156]},{"content":"Deploy your development and build environments.","pos":[1161,1208]},{"content":"Create a deployable package of your code and customizations.","pos":[1212,1272]},{"content":"Upload the deployable package to your project in Microsoft Dynamics Lifecycle Services (LCS).","pos":[1276,1369]},{"content":"Configure and deploy an on-premises runtime environment that includes your deployable package.","pos":[1373,1467]},{"content":"This environment can be either a sandbox environment or a production environment.","pos":[1468,1549]},{"content":"The following sections provide more information about this process.","pos":[1551,1618]},{"pos":[1623,1653],"content":"Development tools and platform","linkify":"Development tools and platform","nodes":[{"content":"Development tools and platform","pos":[0,30]}]},{"content":"Whether you're developing, extending, or customizing cloud applications or on-premises applications, the development platform, tools, and environments (virtual machines [VMs]) are the same.","pos":[1654,1843]},{"content":"Your custom code is developed on the same development VMs, regardless of whether your target runtime environments are in a cloud environment or an on-premises environment.","pos":[1844,2015]},{"content":"For detailed information about development, see the <bpt id=\"p1\">[</bpt>Developer home page<ept id=\"p1\">](../dev-tools/developer-home-page.md)</ept>.","pos":[2017,2128],"source":"For detailed information about development, see the [Developer home page](../dev-tools/developer-home-page.md)."},{"content":"For information about extensibility and customization, see the <bpt id=\"p1\">[</bpt>Extensibility home page<ept id=\"p1\">](../extensibility/extensibility-home-page.md)</ept>.","pos":[2129,2263],"source":" For information about extensibility and customization, see the [Extensibility home page](../extensibility/extensibility-home-page.md)."},{"content":"For information about building, testing, and continuous delivery, see the <bpt id=\"p1\">[</bpt>Continuous delivery homepage<ept id=\"p1\">](../dev-tools/continuous-delivery-home-page.md)</ept>.","pos":[2264,2416],"source":" For information about building, testing, and continuous delivery, see the [Continuous delivery homepage](../dev-tools/continuous-delivery-home-page.md)."},{"pos":[2421,2462],"content":"Deploy development and build environments","linkify":"Deploy development and build environments","nodes":[{"content":"Deploy development and build environments","pos":[0,41]}]},{"content":"You can use an on-premises LCS project to deploy build and development environments on Microsoft Azure by using your own Azure subscription.","pos":[2463,2603]},{"content":"Alternatively, you can download a virtual hard disk (VHD) for local development.","pos":[2604,2684]},{"pos":[2686,2844],"content":"To deploy a development or build environment in your Azure subscription, or to download a development VHD, open the <bpt id=\"p1\">**</bpt>Cloud-hosted environments<ept id=\"p1\">**</ept> page in LCS.","source":"To deploy a development or build environment in your Azure subscription, or to download a development VHD, open the **Cloud-hosted environments** page in LCS."},{"pos":[2846,2935],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Cloud-hosted environment menu item<ept id=\"p1\">](./media/alm-flow-01.png)](./media/alm-flow-01.png)</ept>","source":"[![Cloud-hosted environment menu item](./media/alm-flow-01.png)](./media/alm-flow-01.png)"},{"content":"Then follow these steps.","pos":[2937,2961]},{"pos":[2970,2984],"content":"Click <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept>.","source":"Click **Add**."},{"pos":[2991,3081],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Cloud-hosted environment Add button<ept id=\"p1\">](./media/alm-flow-02.png)](./media/alm-flow-02.png)</ept>","source":"[![Cloud-hosted environment Add button](./media/alm-flow-02.png)](./media/alm-flow-02.png)"},{"content":"Select <bpt id=\"p1\">**</bpt>Azure<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Locally<ept id=\"p2\">**</ept>.","pos":[3088,3120],"source":"Select **Azure** or **Locally**."},{"content":"If you select <bpt id=\"p1\">**</bpt>Locally<ept id=\"p1\">**</ept>, find and download a development VHD.","pos":[3121,3184],"source":" If you select **Locally**, find and download a development VHD."},{"content":"If you select <bpt id=\"p1\">**</bpt>Azure<ept id=\"p1\">**</ept>, you're prompted to select one of three topologies: <bpt id=\"p2\">**</bpt>Build and Test<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>Demo<ept id=\"p3\">**</ept>, or <bpt id=\"p4\">**</bpt>Development<ept id=\"p4\">**</ept>.","pos":[3185,3310],"source":" If you select **Azure**, you're prompted to select one of three topologies: **Build and Test**, **Demo**, or **Development**."},{"content":"Complete the deployment steps, and deploy a VM in your Azure subscription.","pos":[3314,3388]},{"pos":[3390,3546],"content":"For more information about how to configure a local development VHD, see <bpt id=\"p1\">[</bpt>Access instances<ept id=\"p1\">](../dev-tools/access-instances.md#vm-that-is-running-onpremises)</ept>.","source":"For more information about how to configure a local development VHD, see [Access instances](../dev-tools/access-instances.md#vm-that-is-running-onpremises)."},{"pos":[3550,4002],"content":"[!NOTE]\nTo deploy environments in your own Azure subscription, you must set up at least one Azure Connector. To set up an Azure Connector, in LCS, open the **Project settings** page, and then click the **Azure connectors** tab. Then follow the instructions to add an Azure Connector. To complete the steps, you must be the tenant administrator of the organization.  \n[![Project settings menu item](./media/alm-flow-03.png)](./media/alm-flow-03.png)","leadings":["","> ","> "],"nodes":[{"content":"To deploy environments in your own Azure subscription, you must set up at least one Azure Connector. To set up an Azure Connector, in LCS, open the **Project settings** page, and then click the **Azure connectors** tab. Then follow the instructions to add an Azure Connector. To complete the steps, you must be the tenant administrator of the organization.","pos":[8,364],"nodes":[{"content":"To deploy environments in your own Azure subscription, you must set up at least one Azure Connector.","pos":[0,100]},{"content":"To set up an Azure Connector, in LCS, open the <bpt id=\"p1\">**</bpt>Project settings<ept id=\"p1\">**</ept> page, and then click the <bpt id=\"p2\">**</bpt>Azure connectors<ept id=\"p2\">**</ept> tab.","pos":[101,219],"source":" To set up an Azure Connector, in LCS, open the **Project settings** page, and then click the **Azure connectors** tab."},{"content":"Then follow the instructions to add an Azure Connector.","pos":[220,275]},{"content":"To complete the steps, you must be the tenant administrator of the organization.","pos":[276,356]}]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Project settings menu item<ept id=\"p1\">](./media/alm-flow-03.png)](./media/alm-flow-03.png)</ept>","pos":[367,448],"source":"[![Project settings menu item](./media/alm-flow-03.png)](./media/alm-flow-03.png)"}]},{"pos":[4007,4070],"content":"Create and upload a deployable package to the LCS Asset library","linkify":"Create and upload a deployable package to the LCS Asset library","nodes":[{"content":"Create and upload a deployable package to the LCS Asset library","pos":[0,63]}]},{"content":"When you complete a phase of development, and are ready to deploy your code to a sandbox or production on-premises environment, you must create an application deployable package from your models.","pos":[4071,4266]},{"content":"This process doesn't differ from the process for cloud environments.","pos":[4267,4335]},{"content":"If you're using automated builds (a build environment), the build process creates an application deployable package for you.","pos":[4337,4461]},{"content":"You can also create an application deployable package from Microsoft Visual Studio in your development environment.","pos":[4462,4577]},{"content":"For more information on how to create an application deployable package in your development environment, see <bpt id=\"p1\">[</bpt>Create and apply a deployable package<ept id=\"p1\">](../deployment/create-apply-deployable-package.md)</ept>.","pos":[4578,4777],"source":" For more information on how to create an application deployable package in your development environment, see [Create and apply a deployable package](../deployment/create-apply-deployable-package.md)."},{"content":"When your deployable package is ready, follow these steps to upload it to your LCS projectâ€™s Asset library.","pos":[4779,4886]},{"pos":[4891,4923],"content":"Open the <bpt id=\"p1\">**</bpt>Asset library<ept id=\"p1\">**</ept> page.","source":"Open the **Asset library** page."},{"pos":[4929,5007],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Asset library menu item<ept id=\"p1\">](./media/alm-flow-04.png)](./media/alm-flow-04.png)</ept>","source":"[![Asset library menu item](./media/alm-flow-04.png)](./media/alm-flow-04.png)"},{"pos":[5012,5058],"content":"Click the <bpt id=\"p1\">**</bpt>Software deployable package<ept id=\"p1\">**</ept> tab.","source":"Click the **Software deployable package** tab."},{"pos":[5064,5152],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Software deployable package files<ept id=\"p1\">](./media/alm-flow-05.png)](./media/alm-flow-05.png)</ept>","source":"[![Software deployable package files](./media/alm-flow-05.png)](./media/alm-flow-05.png)"},{"pos":[5157,5218],"content":"Click the plus sign (<bpt id=\"p1\">**</bpt><ph id=\"ph1\">+</ph><ept id=\"p1\">**</ept>) to upload the deployable package.","source":"Click the plus sign (**+**) to upload the deployable package."},{"pos":[5224,5288],"content":"Configure an on-premises runtime environment that uses your code","linkify":"Configure an on-premises runtime environment that uses your code","nodes":[{"content":"Configure an on-premises runtime environment that uses your code","pos":[0,64]}]},{"content":"As of the July 2017 release of Microsoft Dynamics 365 for Finance and Operations, Enterprise edition (on-premises), you can apply your customizations and extensions only during the deployment of a sandbox or production environment.","pos":[5289,5520]},{"pos":[5525,5593],"content":"In your LCS project, click <bpt id=\"p1\">**</bpt>Configure<ept id=\"p1\">**</ept> to deploy your environment.","source":"In your LCS project, click **Configure** to deploy your environment."},{"pos":[5599,5678],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Sandbox Configure button<ept id=\"p1\">](./media/alm-flow-06.png)](./media/alm-flow-06.png)</ept>","source":"[![Sandbox Configure button](./media/alm-flow-06.png)](./media/alm-flow-06.png)"},{"pos":[5683,5777],"content":"In the deployment tool, when you must enter the environment name, click <bpt id=\"p1\">**</bpt>Advanced settings<ept id=\"p1\">**</ept>.","source":"In the deployment tool, when you must enter the environment name, click **Advanced settings**."},{"pos":[5783,5882],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>On premise topology Advanced settings button<ept id=\"p1\">](./media/alm-flow-07.png)](./media/alm-flow-07.png)</ept>","source":"[![On premise topology Advanced settings button](./media/alm-flow-07.png)](./media/alm-flow-07.png)"},{"pos":[5887,5931],"content":"Click the <bpt id=\"p1\">**</bpt>Customize solution assets<ept id=\"p1\">**</ept> tab.","source":"Click the **Customize solution assets** tab."},{"pos":[5938,6042],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Deployment settings Customize solution assets tab<ept id=\"p1\">](./media/alm-flow-08.png)](./media/alm-flow-08.png)</ept>","source":"[![Deployment settings Customize solution assets tab](./media/alm-flow-08.png)](./media/alm-flow-08.png)"},{"content":"In the <bpt id=\"p1\">**</bpt>Select the AOT packages to be deployed<ept id=\"p1\">**</ept> field, select the application (AOT) deployable package that contains your customizations.","pos":[6047,6186],"source":"In the **Select the AOT packages to be deployed** field, select the application (AOT) deployable package that contains your customizations."},{"content":"This field lists all the AOT packages in your Asset library.","pos":[6187,6247]},{"pos":[6251,6367],"content":"Click <bpt id=\"p1\">**</bpt>Done<ept id=\"p1\">**</ept> to close the <bpt id=\"p2\">**</bpt>Deployment settings<ept id=\"p2\">**</ept> page, and then continue with the environment deployment process.","source":"Click **Done** to close the **Deployment settings** page, and then continue with the environment deployment process."}]}