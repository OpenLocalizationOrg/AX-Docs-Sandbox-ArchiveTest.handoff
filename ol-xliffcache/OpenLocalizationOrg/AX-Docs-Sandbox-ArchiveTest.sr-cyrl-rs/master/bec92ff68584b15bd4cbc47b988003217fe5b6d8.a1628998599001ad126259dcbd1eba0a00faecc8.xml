{"content":"---\n# required metadata\n\ntitle: Font and background colors for input, table, and grid controls\ndescription: This article provides information about the new color picker control that lets users select a color.\nauthor: RobinARH\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: robinr\nms.search.scope: AX 7.0.0, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 90513\nms.assetid: 84e06ee2-be1c-443b-b595-9309eaea84c5\nms.search.region: Global\n# ms.search.industry: \nms.author: tlefor\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Font and background colors for input, table, and grid controls\n\n[!include[banner](../includes/banner.md)]\n\n\nThis article provides information about the new color picker control that lets users select a color.\n\nTraditionally, color has been considered an ideal way to communicate with a user. For example, the color red is often used to draw the user's attention to information that is important. However, some users can't distinguish certain colors or shades, and some users are blind. Therefore, we don't recommend that you use color alone to communicate information to the user. Instead, you should use color together with a symbol or additional text to convey information to all users.\n\n## Color selection in Dynamics AX 2012\nIn Microsoft Dynamics AX 2012, color selection had these characteristics:\n\n-   It used the Win32 color picker.\n-   It required Win32 application programming interfaces (APIs) for RGB/decimal conversion. (The input control accepted a decimal value for RGB.)\n\n<!-- -->\n\n    Public void lookup()\n    {\n        #DEFINE.COLORVALUE(64)\n        Int r,g,b\n        container choosencolor;\n        Binary customcolors = new Binary(#COLORVALUE);\n        CCColor colorvalue;\n\n        Super();\n\n        [r,g,b] = WinAPI::RGBint2Con(this.backgroundColor());\n\n        chosenColor = WinAPI::chooseColor(element.hWnd(),r,g,b, customColors, true);\n\n        If(chosencolor)\n        {\n            [r, g, b] = chosencolor;\n            Colorvalue = WinAPI::RGB2int(r,g,b);\n            This.backgroundColor(colorValue);\n            employeeWorkPlannerForm.parmAbsensceColor(colorvalue);\n            Employeetable.columns(employeeworkplannerform.numberofcolumns());\n            Absenscecolorparm = colorvalue;\n        }\n    }\n\n## Color selection for input controls\nIn the current version, the color picker control is a standard control type. The color picker control can be put directly in a form, or it can be used as part of a custom lookup for an integer or string control. The following example shows how to interact with the color picker control in a custom lookup. However, the code is similar if you put the color picker in a form and provide the user with a button to select a color.\n\n-   A color picker control can be hosted in a form or a custom lookup to let the user visually pick a color or specify an RGB value.\n-   The return value is a decimal value that can be assigned directly to an input control property. (No run-time RGB conversion is required.)\n\n<!-- -->\n\n    [Control(\"String\")]\n    class stringControl\n    {\n        /// <summary>\n        ///\n        /// </summary>\n\n        public void lookup()\n        {\n            int color = hex2Int(this.valueStr());\n            color = ColorSelection::selectColorStringControl(this, color);\n            this.text(int2hex(color));\n            this.backgroundColor(color);\n        }\n    }\n\n    [Control(\"Integer\")]\n    class integerControl\n    {\n        /// <summary>\n        ///\n        /// </summary>\n        public void lookup()\n        {\n            int color = this.value();\n            color = ColorSelection::selectColor(this, color);\n            this.value(color);\n            this.backgroundColor(color);\n        }\n    }\n\n## Using color in a table control\nThere is no design-time experience for coloring input controls. In other words, you can’t model an input control so that it's “blue” by default. However, there are run-time capabilities that let you change color values. The following example shows how you can change the way that the cells of a table control are colored.\n\n    public FormControl editControl(int column, int row)\n    {\n        stringEdit.colorScheme(FormColorScheme::RGB);\n        stringEdit.backgroundColor(WinAPI::RGB2int(225,225,125));\n        stringEdit.foregroundColor(WinAPI::RGB2int(8,10,200));\n    }\n\n[![Example of a table control that has colored cells](./media/tablecontrol_withcolor.png)](./media/tablecontrol_withcolor.png)\n\n## Using color in a grid control\n    public void displayOption(Common _record, FormRowDisplayOption _options)\n    {\n        CLIParentTable table;\n        table = _record;\n\n        if(!cleared)\n        {\n            _options.affectedElementsByControl(CliParentTable_AInt.id());\n            _options.affectedElementsByControl(CliParentTable_AEnum.id());\n            _options.affectedElementsByControl(CliParentTable_AString.id());\n            _options.affectedElementsByControl(CliParentTable_EditMethodString.id());\n\n            if(table.AInt<=20)\n            {\n                _options.backColor(WinAPI::RGB2int(255,165,0));\n            }\n            else if( table.AInt>20 &&  table.AInt <60)\n            {\n                _options.backColor(WinAPI::RGB2int(255,255,0));\n                _options.fontItalic(true);\n                _options.textColor(WinAPI::RGB2int(255,0,127 ));\n                _options.fontStrikethrough(true);\n            }\n            else\n            {\n                _options.backColor(WinAPI::RGB2int(128,0,128));\n                _options.fontUnderline(true);\n            }\n        }\n\n        super(_record, _options);\n    }\n\n## Static RGB instead of runtime conversion from integer to RGB values\nPreviously, run-time conversion that used **WinAPI::RGB2Int** was required, because the Win32 color picker returned an RGB value, whereas the background color APIs accepted an integer. This run-time conversion isn't required, because the new color picker returns an integer to match the control's consumption of an integer. Additionally, it’s understood that .NET code often uses RGB values for colors. Therefore, in those cases, run-time conversion of colors isn't required for each use. Instead, you can define static color variables. Here are three examples.\n\n    Static int GrayColor = 220 + 220 <<#offset8 + 220<<offset16;\n\n    Static int GrayColor = 0xdcdcdc\n\n    Static int GrayColor = 14474460; // DCDCDC or 220,220,220\n\n\n\n","nodes":[{"pos":[4,716],"embed":true,"restype":"x-metadata","content":"# required metadata\n\ntitle: Font and background colors for input, table, and grid controls\ndescription: This article provides information about the new color picker control that lets users select a color.\nauthor: RobinARH\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: robinr\nms.search.scope: AX 7.0.0, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 90513\nms.assetid: 84e06ee2-be1c-443b-b595-9309eaea84c5\nms.search.region: Global\n# ms.search.industry: \nms.author: tlefor\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n","nodes":[{"content":"Font and background colors for input, table, and grid controls","nodes":[{"pos":[0,62],"content":"Font and background colors for input, table, and grid controls","nodes":[{"content":"Font and background colors for input, table, and grid controls","pos":[0,62]}]}],"path":["title"],"extradata":"MT"},{"content":"This article provides information about the new color picker control that lets users select a color.","nodes":[{"pos":[0,100],"content":"This article provides information about the new color picker control that lets users select a color.","nodes":[{"content":"This article provides information about the new color picker control that lets users select a color.","pos":[0,100]}]}],"path":["description"],"extradata":"MT"}],"header":"# required metadata\n","yml":true},{"pos":[724,786],"content":"Font and background colors for input, table, and grid controls","linkify":"Font and background colors for input, table, and grid controls","nodes":[{"content":"Font and background colors for input, table, and grid controls","pos":[0,62]}]},{"content":"This article provides information about the new color picker control that lets users select a color.","pos":[832,932]},{"content":"Traditionally, color has been considered an ideal way to communicate with a user.","pos":[934,1015]},{"content":"For example, the color red is often used to draw the user's attention to information that is important.","pos":[1016,1119]},{"content":"However, some users can't distinguish certain colors or shades, and some users are blind.","pos":[1120,1209]},{"content":"Therefore, we don't recommend that you use color alone to communicate information to the user.","pos":[1210,1304]},{"content":"Instead, you should use color together with a symbol or additional text to convey information to all users.","pos":[1305,1412]},{"pos":[1417,1452],"content":"Color selection in Dynamics AX 2012","linkify":"Color selection in Dynamics AX 2012","nodes":[{"content":"Color selection in Dynamics AX 2012","pos":[0,35]}]},{"content":"In Microsoft Dynamics AX 2012, color selection had these characteristics:","pos":[1453,1526]},{"content":"It used the Win32 color picker.","pos":[1532,1563]},{"content":"It required Win32 application programming interfaces (APIs) for RGB/decimal conversion.","pos":[1568,1655]},{"content":"(The input control accepted a decimal value for RGB.)","pos":[1656,1709]},{"pos":[2459,2493],"content":"Color selection for input controls","linkify":"Color selection for input controls","nodes":[{"content":"Color selection for input controls","pos":[0,34]}]},{"content":"In the current version, the color picker control is a standard control type.","pos":[2494,2570]},{"content":"The color picker control can be put directly in a form, or it can be used as part of a custom lookup for an integer or string control.","pos":[2571,2705]},{"content":"The following example shows how to interact with the color picker control in a custom lookup.","pos":[2706,2799]},{"content":"However, the code is similar if you put the color picker in a form and provide the user with a button to select a color.","pos":[2800,2920]},{"content":"A color picker control can be hosted in a form or a custom lookup to let the user visually pick a color or specify an RGB value.","pos":[2926,3054]},{"content":"The return value is a decimal value that can be assigned directly to an input control property.","pos":[3059,3154]},{"content":"(No run-time RGB conversion is required.)","pos":[3155,3196]},{"pos":[3925,3955],"content":"Using color in a table control","linkify":"Using color in a table control","nodes":[{"content":"Using color in a table control","pos":[0,30]}]},{"content":"There is no design-time experience for coloring input controls.","pos":[3956,4019]},{"content":"In other words, you can’t model an input control so that it's “blue” by default.","pos":[4020,4100]},{"content":"However, there are run-time capabilities that let you change color values.","pos":[4101,4175]},{"content":"The following example shows how you can change the way that the cells of a table control are colored.","pos":[4176,4277]},{"pos":[4531,4657],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Example of a table control that has colored cells<ept id=\"p1\">](./media/tablecontrol_withcolor.png)](./media/tablecontrol_withcolor.png)</ept>","source":"[![Example of a table control that has colored cells](./media/tablecontrol_withcolor.png)](./media/tablecontrol_withcolor.png)"},{"pos":[4662,4691],"content":"Using color in a grid control","linkify":"Using color in a grid control","nodes":[{"content":"Using color in a grid control","pos":[0,29]}]},{"pos":[5813,5880],"content":"Static RGB instead of runtime conversion from integer to RGB values","linkify":"Static RGB instead of runtime conversion from integer to RGB values","nodes":[{"content":"Static RGB instead of runtime conversion from integer to RGB values","pos":[0,67]}]},{"content":"Previously, run-time conversion that used <bpt id=\"p1\">**</bpt>WinAPI::RGB2Int<ept id=\"p1\">**</ept> was required, because the Win32 color picker returned an RGB value, whereas the background color APIs accepted an integer.","pos":[5881,6065],"source":"Previously, run-time conversion that used **WinAPI::RGB2Int** was required, because the Win32 color picker returned an RGB value, whereas the background color APIs accepted an integer."},{"content":"This run-time conversion isn't required, because the new color picker returns an integer to match the control's consumption of an integer.","pos":[6066,6204]},{"content":"Additionally, it’s understood that .NET code often uses RGB values for colors.","pos":[6205,6283]},{"content":"Therefore, in those cases, run-time conversion of colors isn't required for each use.","pos":[6284,6369]},{"content":"Instead, you can define static color variables.","pos":[6370,6417]},{"content":"Here are three examples.","pos":[6418,6442]}]}