{"content":"---\n# required metadata\n\ntitle: Troubleshoot \ndescription: This topic contains information about troubleshooting the Microsoft Dynamics AX Intelligent Data Management Framework (IDMF).\nauthor: kfend\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: dynamics-ax-2012 \nms.service:\nms.technology: ax-2012\n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \nms.reviewer: kfend\nms.search.scope: AX 2012, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 18711\nms.assetid: fe0b2255-d44e-42db-9c90-2c6202fc7578\nms.search.region: Global\n# ms.search.industry: \nms.author: kfend\nms.search.validFrom: \nms.dyn365.ops.version: 2012\n\n---\n\n# Troubleshoot the Intelligent Data Management Framework (AX 2012)\n\n[!include[banner](../../includes/banner.md)]\n\n\nThis topic contains information about troubleshooting the Microsoft Dynamics AX Intelligent Data Management Framework (IDMF).\n\nKnown issues\n------------\n\n-   **Issue** The domain account provided during setup and installation of the service is not granted **permission to log on as a service**, therefore the IDMF service fails when it is started. **Workaround** Open the **Services control** panel. On the **Security** tab, enter the password for the account.\n-   **Issue** If the service account for IDMF has not been granted local administrator privileges, the following error message is received: \"An unhandled exception occurred and has been logged. Please contact support.\" **Workaround** Grant the service account for IDMF administrator privileges on the local computer.\n-   **Issue** A **ByFiscal** archive task cannot be scheduled when a metadata task is running. **Workaround** Wait until the metadata task completes before scheduling a **ByFiscal** archive task\n-   **Issue** Running archive, purge or restore archive tasks at the same time as offline **ALTER INDEX** operations causes database locking issues. **Workaround** Wait until offline **ALTER INDEX** operations for the specified indexes have completed before running archive, purge or restore archive tasks.\n-   **Issue** Archive templates and purge template should not be modified when archive or purge tasks are running. **Workaround** Do not modify archive and purge templates when archive or purge tasks are running.\n-   **Issue** During a restore, the insert bulk statements can cause a high amount of table lock escalations on tables in the production Microsoft Dynamics AX business database. **Workaround** None.\n-   **Issue** In the **ByFiscal** task page and in other pages, expand and collapse icons can show reversed images. **Workaround** None.\n-   **Issue** Unable to discover archive objects if the drive table is **AccountingEvent**. The system returns the following message: \"Error executing code: Insufficient memory to run script.\" **Workaround** Update the following registry entries.\\[HKEY\\_CURRENT\\_USERSoftwareMicrosoftDynamics6.0Configurationconfiguration name\\]\\[HKEY\\_LOCAL\\_MACHINESoftwareMicrosoftDynamics6.0Configurationconfiguration name\\]\\[HKEY\\_LOCAL\\_MACHINESYSTEMCurrentControlSetServicesDynamics Server6.0AOS instance configuration name\\]Value name: maxbuffersizeValue type: REG\\_SZValue: Maximum amount of memory in MB or 0 for no limit\n\n## View log files\nIDMF logs error events in a log file in a folder named**,**under the installation folder. The default installation path is C:Program FilesMicrosoft Dynamics AX Intelligent Data Management Framework. IDMF creates the log file when the first error message is generated. The file is named trace\\_mm-dd-yyyy.log, with mm-dd-yyyy providing the current month, day, and year. The IDMF scheduler service creates an error log file called servicetrace\\_mm-dd-yyyy.log. The error log files are created for each day. When the first error occurs during the day, the error log file is created, and the error message is appended to the newly created error log file. All subsequent error messages are appended to the existing error log file for the day.\n\n## Database rights are not set correctly\nThe AOS service account must have **datareader**, **datawriter** and **ddladmin** rights on the IDMF management database.\n\n## IDMF fails to start\nWhen starting IDMF, you may encounter the following error: \"An unhandled exception occurred and has been logged. Please contact support.\" The preceding error message is a generic message that IDMF displays when the error condition is caused by an environmental issue such as permissions. This particular error condition typically occurs when the user does not have read and write permissions on the installation folder of IDMF. To fix the error condition, provide read and write permissions to the installation folder of IDMF. The default path is C:Program FilesMicrosoft Dynamics AX Intelligent Data Management Framework.\n\n## Index defragmentation does not reduce the fragmentation percentage to zero\nThe index defragmentation schedules do not always achieve a complete defragmentation, or in other words, 0 (zero) percent fragmentation. Some of the indexes may still have a small percentage of fragmentation. The defragmentation process tries to defragment selected indexes to the maximum possible level. However, Microsoft Dynamics AX uses a fill factor of 0 (zero). The fill factor of 0 breaks records out to extra pages without completely filling an index page. As a result, the fragmentation level for some of the indexes remains at a non-zero level, even after the defragmentation schedule is completed successfully.\n\n## Distributed transaction error\nYou may encounter the following error from the Microsoft SQL Server Integration Services (SSIS) runtime: \"The SSIS Runtime has failed to enlist the OLE DB connection in a distributed transaction with error 0x8004D025. The partner transaction manager has disabled its support for remote/network transactions.\" To fix this error condition, you must configure your servers so that Microsoft Distributed Transaction Coordinator (MSDT) communication flows through the firewall. For instructions, see [Knowledge Base article 306843](http://support.microsoft.com/kb/306843). If the error persists after configuring the **Microsoft Distributed Transaction Coordinator** verify that the firewall settings for **Distributed Transaction Coordinator** under the **Inbound and Outbound Rules** have been enabled.\n\n## Export to Excel fails\nThe export to Excel functionality may not work in some environments. To fix this problem, you must have Microsoft Excel and the Excel PIAs installed on the computer. Verify that Excel is correctly installed and working on the computer. If required, download and install the Microsoft Office Primary Interop Assemblies (PIAs). For Excel 2003, see [Office 2003 Update: Redistributable Primary Interop Assemblies](http://www.microsoft.com/downloads/details.aspx?familyid=3c9a983a-ac14-4125-8ba0-d36d67e0f4ad&displaylang=en). For Microsoft Excel 2007, see [2007 Microsoft Office System Update: Redistributable Primary Interop Assemblies](http://www.microsoft.com/downloads/details.aspx?FamilyID=59daebaa-bed4-4282-a28c-b864d8bfa513&displaylang=en). Restart IDMF after successful installation of the PIAs.\n\n## The discovery of a driver table fails\nWhen starting a discovery process for an Archive Object or a Purge Object, you may encounter the following error: \"Unable to discover the driver table for the Archive Object or Purge Object.\" This error message is usually caused by metadata synchronization issues. To fix this error condition, you must run the post-installation tasks. Run the post-installation application by clicking **Start** &gt; **All programs** &gt; **Intelligent Data Management Framework** &gt; **Post-installation tasks**, or follow these steps to resolve this error manually. For details, see the [Installation Guide for the Microsoft Dynamics AX Intelligent Data Management Framework (IDMF)](installation-guide-idmf.md).\n\n1.  Verify that **AXDataManagementToolProjectnn.xpo** exists in the Application Object Tree (AOT), where nn is 50, 60, 61, or 62 depending on the version of your Microsoft Dynamics AX application.\n2.  Verify that you have successfully completed the post-installation checklist.\n3.  Verify that all member of the implementation team are working on the same layer, for example **CUS**, **VAR**, or **USR**.\n4.  Verify that the XPOs mentioned in step 1 are imported in the same layer, such as the **VAR** layer or the **USR** layer. Verify that all methods from these XPOs are imported in the same layer, such as **USR** or **VAR**.\n5.  Use the AOT to correct any difference you find between your AOT and the XPOs that are included with IDMF. You can delete these XPOs from the layer they are currently in and manually import them to another layer, as described in the [Data Management Framework Installation Guide](http://go.microsoft.com/fwlink/?LinkId=143616&clcid=0x409).\n\n## The database snapshot schedule fails with a permission error\nIn a distributed SQL Server 2008 environment, you must install Service Pack 2 or a later version on all SQL Server instances when you store your databases on multiple servers. For example, when you store your production database and archive database on two separate servers, you have a distributed SQL Server environment. Both the servers must have SQL Server 2008 or a later version before you install and start IDMF. Failure to do so causes the following error message from a database snapshot schedule: \"Syntax error, permission violation, or other nonspecific error.\"\n\n## The discovery process fails with an error message\nThe discovery process may display an error message: \"Cannot create archive object or purge object.\" This message may appear if Application Object Server (AOS) is not available or the connection with AOS has failed. Check the availability of AOS. Restart the AOS if necessary, and then restart IDMF.\n\n## Application Object Server error when connecting to the archive database\nIn some environments, you may receive an error when Application Object Server (AOS) connects to the archive database: \"An internal error occurred while creating session for the user.\" Verify that the account used for the AOS service has sufficient permissions to the archive database. For more information, see the \"Rights required for installation\" section in the [Data Management Framework Installation Guide](http://go.microsoft.com/fwlink/?LinkId=143616&clcid=0x409). Verify that the account used for the AOS service has the execute permission for stored procedures **CREATESERVERSESSIONS** and **CREATEUSERSESSIONS** in the archive database.\n\n## The analysis snapshot schedule fails with a permission error\nThe analysis snapshot schedule may fail with an error message: \"An OLE DB error has occurred. Error code: 0x80040E14.An OLE DB record is available. Source: \"Microsoft SQL Native Client\" Hresult: 0x80040E14 Description: \"The user does not have permission to perform this action\".\" This error message appears because of insufficient database permissions. Be sure that the database permissions are assigned by following the instructions in the \"Rights required for installation\" section in the [Data Management Framework Installation Guide](http://go.microsoft.com/fwlink/?LinkId=143616&clcid=0x409).\n\n## The analysis snapshot schedule fails because of a SQL Server Integration Services error\nThe analysis snapshot schedule may fail with an error: \"Message: Package Error: The file exists. The buffer manager could not get a temporary file name. The call to GetTempFileName failed. The buffer manager could not create a temporary file on the path C:DOCUME~1ADMINI~1.SAMLOCALS~1Temp. The path will not be considered for temporary storage again.\" To resolve this error, you must install SQL Server 2008 or a later version. For more information, see Microsoft Knowledge Base article [972365](http://support.microsoft.com/kb/972365).\n\n## Unable to create an archive schedule or restore schedule\nIf an archive schedule fails or is aborted, you must try to restart or revert it before you can create another schedule with the same object. This restriction applies to all Archive Objects.\n\n## Unable to select an archive schedule for restoration\nThe archive schedule that you want to restore may be disabled, so that you cannot select it. This occurs when your previous attempt to restore the schedule has either been aborted or failed. In the Status window, navigate to the aborted or failed restore schedule. Right-click the schedule, and then select **Restart schedule** or **Revert schedule**, depending on the action you have to perform. If the schedule failed during the initialization state, no data was archived. In that case, there is no need to restore or revert the schedule, and IDMF displays a warning that asks you to create a new schedule. Use the **Schedule** menu to create a new archive schedule.\n\n| **Note**                                                                                                                 |\n|--------------------------------------------------------------------------------------------------------------------------|\n| Always restart or revert a failed archive schedule before you create a new archive schedule for the same Archive Object. |\n\n## A schedule fails because of insufficient space\nArchive and purge schedules fail if the database or log files become full. These schedules require a significant amount of free database and log space, depending on the volume of data you archive or purge. By default, the purge and archive schedules process 100,000 records in a batch. Reduce the batch size to decrease the database and log space required when a schedule processes a batch. Follow these steps to configure the batch size:\n1.  Using Notepad, open **AXDataManagementSchedulerService.exe.config** from the installation folder of IDMF. The default path of the installation folder is C:Program FilesMicrosoft Dynamics AX Intelligent Data Management Framework.\n2.  To decrease the batch size for an archive task, locate the configuration key BatchSizeForPurge &lt;add key=\"BatchSizeForArchive\" value=\"4000\" /&gt;, and change the key value to a smaller number.\n3.  To decrease the batch size for a purge schedule, locate the configuration key BatchSizeForPurge &lt;add key=\"BatchSizeForPurge\" value=\"4000\" /&gt;, and change the key value to a smaller number.\n\nYou must carefully determine the location and initial size of data and log files for the archive, production, management, and production replica databases. Be sure that the initial size is sufficient for optimal performance and future growth. For more information about database configuration, see [Planning database configuration for Microsoft Dynamics AX](http://www.microsoft.com/downloads/details.aspx?FamilyID=ab4cd401-b366-4c1c-9a73-88c945ae8191) and the Microsoft Dynamics AX Performance team's [blog](http://blogs.msdn.com/axperf/).\n\n## Troubleshoot failed schedules\nFollow these steps to troubleshoot failed schedules:\n1.  View the log file and the list of common causes and associated solutions that are described in the previous sections.\n2.  Be sure to synchronize any metadata changes in the production database with the archive database via the metadata synchronization schedule. The master data synchronization schedule may fail if the metadata is not synchronized between the two databases.\n3.  The purge schedule may fail if the Microsoft Distributed Transaction Coordinator (MSDTC) is not configured correctly.\n4.  A schedule may fail if the data file or log file in the database becomes full.\n\nYou must fix the error conditions before you rerun the schedule.\n\n\n\n\n\n","nodes":[{"pos":[4,671],"embed":true,"restype":"x-metadata","content":"# required metadata\n\ntitle: Troubleshoot \ndescription: This topic contains information about troubleshooting the Microsoft Dynamics AX Intelligent Data Management Framework (IDMF).\nauthor: kfend\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: dynamics-ax-2012 \nms.service:\nms.technology: ax-2012\n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \nms.reviewer: kfend\nms.search.scope: AX 2012, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 18711\nms.assetid: fe0b2255-d44e-42db-9c90-2c6202fc7578\nms.search.region: Global\n# ms.search.industry: \nms.author: kfend\nms.search.validFrom: \nms.dyn365.ops.version: 2012\n","nodes":[{"content":"Troubleshoot","nodes":[{"pos":[0,12],"content":"Troubleshoot","nodes":[{"content":"Troubleshoot","pos":[0,12]}]}],"path":["title"],"extradata":"MT"},{"content":"This topic contains information about troubleshooting the Microsoft Dynamics AX Intelligent Data Management Framework (IDMF).","nodes":[{"pos":[0,125],"content":"This topic contains information about troubleshooting the Microsoft Dynamics AX Intelligent Data Management Framework (IDMF).","nodes":[{"content":"This topic contains information about troubleshooting the Microsoft Dynamics AX Intelligent Data Management Framework (IDMF).","pos":[0,125]}]}],"path":["description"],"extradata":"MT"}],"header":"# required metadata\n","yml":true},{"pos":[679,743],"content":"Troubleshoot the Intelligent Data Management Framework (AX 2012)","linkify":"Troubleshoot the Intelligent Data Management Framework (AX 2012)","nodes":[{"content":"Troubleshoot the Intelligent Data Management Framework (AX 2012)","pos":[0,64]}]},{"content":"This topic contains information about troubleshooting the Microsoft Dynamics AX Intelligent Data Management Framework (IDMF).","pos":[792,917]},{"pos":[919,931],"content":"Known issues","linkify":"Known issues","nodes":[{"content":"Known issues","pos":[0,12]}]},{"content":"<bpt id=\"p1\">**</bpt>Issue<ept id=\"p1\">**</ept> The domain account provided during setup and installation of the service is not granted <bpt id=\"p2\">**</bpt>permission to log on as a service<ept id=\"p2\">**</ept>, therefore the IDMF service fails when it is started.","pos":[950,1139],"source":"**Issue** The domain account provided during setup and installation of the service is not granted **permission to log on as a service**, therefore the IDMF service fails when it is started."},{"content":"<bpt id=\"p1\">**</bpt>Workaround<ept id=\"p1\">**</ept> Open the <bpt id=\"p2\">**</bpt>Services control<ept id=\"p2\">**</ept> panel.","pos":[1140,1191],"source":"**Workaround** Open the **Services control** panel."},{"content":"On the <bpt id=\"p1\">**</bpt>Security<ept id=\"p1\">**</ept> tab, enter the password for the account.","pos":[1192,1252],"source":" On the **Security** tab, enter the password for the account."},{"content":"<bpt id=\"p1\">**</bpt>Issue<ept id=\"p1\">**</ept> If the service account for IDMF has not been granted local administrator privileges, the following error message is received: \"An unhandled exception occurred and has been logged.","pos":[1257,1446],"source":"**Issue** If the service account for IDMF has not been granted local administrator privileges, the following error message is received: \"An unhandled exception occurred and has been logged."},{"content":"Please contact support.\"","pos":[1447,1471]},{"content":"<bpt id=\"p1\">**</bpt>Workaround<ept id=\"p1\">**</ept> Grant the service account for IDMF administrator privileges on the local computer.","pos":[1472,1569],"source":"**Workaround** Grant the service account for IDMF administrator privileges on the local computer."},{"content":"<bpt id=\"p1\">**</bpt>Issue<ept id=\"p1\">**</ept> A <bpt id=\"p2\">**</bpt>ByFiscal<ept id=\"p2\">**</ept> archive task cannot be scheduled when a metadata task is running.","pos":[1574,1664],"source":"**Issue** A **ByFiscal** archive task cannot be scheduled when a metadata task is running."},{"content":"<bpt id=\"p1\">**</bpt>Workaround<ept id=\"p1\">**</ept> Wait until the metadata task completes before scheduling a <bpt id=\"p2\">**</bpt>ByFiscal<ept id=\"p2\">**</ept> archive task","pos":[1665,1764],"source":"**Workaround** Wait until the metadata task completes before scheduling a **ByFiscal** archive task"},{"content":"<bpt id=\"p1\">**</bpt>Issue<ept id=\"p1\">**</ept> Running archive, purge or restore archive tasks at the same time as offline <bpt id=\"p2\">**</bpt>ALTER INDEX<ept id=\"p2\">**</ept> operations causes database locking issues.","pos":[1769,1913],"source":"**Issue** Running archive, purge or restore archive tasks at the same time as offline **ALTER INDEX** operations causes database locking issues."},{"content":"<bpt id=\"p1\">**</bpt>Workaround<ept id=\"p1\">**</ept> Wait until offline <bpt id=\"p2\">**</bpt>ALTER INDEX<ept id=\"p2\">**</ept> operations for the specified indexes have completed before running archive, purge or restore archive tasks.","pos":[1914,2071],"source":"**Workaround** Wait until offline **ALTER INDEX** operations for the specified indexes have completed before running archive, purge or restore archive tasks."},{"content":"<bpt id=\"p1\">**</bpt>Issue<ept id=\"p1\">**</ept> Archive templates and purge template should not be modified when archive or purge tasks are running.","pos":[2076,2186],"source":"**Issue** Archive templates and purge template should not be modified when archive or purge tasks are running."},{"content":"<bpt id=\"p1\">**</bpt>Workaround<ept id=\"p1\">**</ept> Do not modify archive and purge templates when archive or purge tasks are running.","pos":[2187,2284],"source":"**Workaround** Do not modify archive and purge templates when archive or purge tasks are running."},{"content":"<bpt id=\"p1\">**</bpt>Issue<ept id=\"p1\">**</ept> During a restore, the insert bulk statements can cause a high amount of table lock escalations on tables in the production Microsoft Dynamics AX business database.","pos":[2289,2462],"source":"**Issue** During a restore, the insert bulk statements can cause a high amount of table lock escalations on tables in the production Microsoft Dynamics AX business database."},{"content":"<bpt id=\"p1\">**</bpt>Workaround<ept id=\"p1\">**</ept> None.","pos":[2463,2483],"source":"**Workaround** None."},{"content":"<bpt id=\"p1\">**</bpt>Issue<ept id=\"p1\">**</ept> In the <bpt id=\"p2\">**</bpt>ByFiscal<ept id=\"p2\">**</ept> task page and in other pages, expand and collapse icons can show reversed images.","pos":[2488,2599],"source":"**Issue** In the **ByFiscal** task page and in other pages, expand and collapse icons can show reversed images."},{"content":"<bpt id=\"p1\">**</bpt>Workaround<ept id=\"p1\">**</ept> None.","pos":[2600,2620],"source":"**Workaround** None."},{"content":"<bpt id=\"p1\">**</bpt>Issue<ept id=\"p1\">**</ept> Unable to discover archive objects if the drive table is <bpt id=\"p2\">**</bpt>AccountingEvent<ept id=\"p2\">**</ept>.","pos":[2625,2712],"source":"**Issue** Unable to discover archive objects if the drive table is **AccountingEvent**."},{"content":"The system returns the following message: \"Error executing code: Insufficient memory to run script.\"","pos":[2713,2813]},{"content":"<bpt id=\"p1\">**</bpt>Workaround<ept id=\"p1\">**</ept> Update the following registry entries.<ph id=\"ph1\">\\[</ph>HKEY<ph id=\"ph2\">\\_</ph>CURRENT<ph id=\"ph3\">\\_</ph>USERSoftwareMicrosoftDynamics6.0Configurationconfiguration name<ph id=\"ph4\">\\]</ph><ph id=\"ph5\">\\[</ph>HKEY<ph id=\"ph6\">\\_</ph>LOCAL<ph id=\"ph7\">\\_</ph>MACHINESoftwareMicrosoftDynamics6.0Configurationconfiguration name<ph id=\"ph8\">\\]</ph><ph id=\"ph9\">\\[</ph>HKEY<ph id=\"ph10\">\\_</ph>LOCAL<ph id=\"ph11\">\\_</ph>MACHINESYSTEMCurrentControlSetServicesDynamics Server6.0AOS instance configuration name<ph id=\"ph12\">\\]</ph>Value name: maxbuffersizeValue type: REG<ph id=\"ph13\">\\_</ph>SZValue: Maximum amount of memory in MB or 0 for no limit","pos":[2814,3235],"source":"**Workaround** Update the following registry entries.\\[HKEY\\_CURRENT\\_USERSoftwareMicrosoftDynamics6.0Configurationconfiguration name\\]\\[HKEY\\_LOCAL\\_MACHINESoftwareMicrosoftDynamics6.0Configurationconfiguration name\\]\\[HKEY\\_LOCAL\\_MACHINESYSTEMCurrentControlSetServicesDynamics Server6.0AOS instance configuration name\\]Value name: maxbuffersizeValue type: REG\\_SZValue: Maximum amount of memory in MB or 0 for no limit"},{"pos":[3240,3254],"content":"View log files","linkify":"View log files","nodes":[{"content":"View log files","pos":[0,14]}]},{"content":"IDMF logs error events in a log file in a folder named<bpt id=\"p1\">**</bpt>,<ept id=\"p1\">**</ept>under the installation folder.","pos":[3255,3344],"source":"IDMF logs error events in a log file in a folder named**,**under the installation folder."},{"content":"The default installation path is C:Program FilesMicrosoft Dynamics AX Intelligent Data Management Framework.","pos":[3345,3453]},{"content":"IDMF creates the log file when the first error message is generated.","pos":[3454,3522]},{"content":"The file is named trace<ph id=\"ph1\">\\_</ph>mm-dd-yyyy.log, with mm-dd-yyyy providing the current month, day, and year.","pos":[3523,3623],"source":" The file is named trace\\_mm-dd-yyyy.log, with mm-dd-yyyy providing the current month, day, and year."},{"content":"The IDMF scheduler service creates an error log file called servicetrace<ph id=\"ph1\">\\_</ph>mm-dd-yyyy.log.","pos":[3624,3713],"source":" The IDMF scheduler service creates an error log file called servicetrace\\_mm-dd-yyyy.log."},{"content":"The error log files are created for each day.","pos":[3714,3759]},{"content":"When the first error occurs during the day, the error log file is created, and the error message is appended to the newly created error log file.","pos":[3760,3905]},{"content":"All subsequent error messages are appended to the existing error log file for the day.","pos":[3906,3992]},{"pos":[3997,4034],"content":"Database rights are not set correctly","linkify":"Database rights are not set correctly","nodes":[{"content":"Database rights are not set correctly","pos":[0,37]}]},{"pos":[4035,4156],"content":"The AOS service account must have <bpt id=\"p1\">**</bpt>datareader<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>datawriter<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>ddladmin<ept id=\"p3\">**</ept> rights on the IDMF management database.","source":"The AOS service account must have **datareader**, **datawriter** and **ddladmin** rights on the IDMF management database."},{"pos":[4161,4180],"content":"IDMF fails to start","linkify":"IDMF fails to start","nodes":[{"content":"IDMF fails to start","pos":[0,19]}]},{"content":"When starting IDMF, you may encounter the following error: \"An unhandled exception occurred and has been logged.","pos":[4181,4293]},{"content":"Please contact support.\"","pos":[4294,4318]},{"content":"The preceding error message is a generic message that IDMF displays when the error condition is caused by an environmental issue such as permissions.","pos":[4319,4468]},{"content":"This particular error condition typically occurs when the user does not have read and write permissions on the installation folder of IDMF.","pos":[4469,4608]},{"content":"To fix the error condition, provide read and write permissions to the installation folder of IDMF.","pos":[4609,4707]},{"content":"The default path is C:Program FilesMicrosoft Dynamics AX Intelligent Data Management Framework.","pos":[4708,4803]},{"pos":[4808,4882],"content":"Index defragmentation does not reduce the fragmentation percentage to zero","linkify":"Index defragmentation does not reduce the fragmentation percentage to zero","nodes":[{"content":"Index defragmentation does not reduce the fragmentation percentage to zero","pos":[0,74]}]},{"content":"The index defragmentation schedules do not always achieve a complete defragmentation, or in other words, 0 (zero) percent fragmentation.","pos":[4883,5019]},{"content":"Some of the indexes may still have a small percentage of fragmentation.","pos":[5020,5091]},{"content":"The defragmentation process tries to defragment selected indexes to the maximum possible level.","pos":[5092,5187]},{"content":"However, Microsoft Dynamics AX uses a fill factor of 0 (zero).","pos":[5188,5250]},{"content":"The fill factor of 0 breaks records out to extra pages without completely filling an index page.","pos":[5251,5347]},{"content":"As a result, the fragmentation level for some of the indexes remains at a non-zero level, even after the defragmentation schedule is completed successfully.","pos":[5348,5504]},{"pos":[5509,5538],"content":"Distributed transaction error","linkify":"Distributed transaction error","nodes":[{"content":"Distributed transaction error","pos":[0,29]}]},{"content":"You may encounter the following error from the Microsoft SQL Server Integration Services (SSIS) runtime: \"The SSIS Runtime has failed to enlist the OLE DB connection in a distributed transaction with error 0x8004D025.","pos":[5539,5756]},{"content":"The partner transaction manager has disabled its support for remote/network transactions.\"","pos":[5757,5847]},{"content":"To fix this error condition, you must configure your servers so that Microsoft Distributed Transaction Coordinator (MSDT) communication flows through the firewall.","pos":[5848,6011]},{"content":"For instructions, see <bpt id=\"p1\">[</bpt>Knowledge Base article 306843<ept id=\"p1\">](http://support.microsoft.com/kb/306843)</ept>.","pos":[6012,6106],"source":" For instructions, see [Knowledge Base article 306843](http://support.microsoft.com/kb/306843)."},{"content":"If the error persists after configuring the <bpt id=\"p1\">**</bpt>Microsoft Distributed Transaction Coordinator<ept id=\"p1\">**</ept> verify that the firewall settings for <bpt id=\"p2\">**</bpt>Distributed Transaction Coordinator<ept id=\"p2\">**</ept> under the <bpt id=\"p3\">**</bpt>Inbound and Outbound Rules<ept id=\"p3\">**</ept> have been enabled.","pos":[6107,6338],"source":" If the error persists after configuring the **Microsoft Distributed Transaction Coordinator** verify that the firewall settings for **Distributed Transaction Coordinator** under the **Inbound and Outbound Rules** have been enabled."},{"pos":[6343,6364],"content":"Export to Excel fails","linkify":"Export to Excel fails","nodes":[{"content":"Export to Excel fails","pos":[0,21]}]},{"content":"The export to Excel functionality may not work in some environments.","pos":[6365,6433]},{"content":"To fix this problem, you must have Microsoft Excel and the Excel PIAs installed on the computer.","pos":[6434,6530]},{"content":"Verify that Excel is correctly installed and working on the computer.","pos":[6531,6600]},{"content":"If required, download and install the Microsoft Office Primary Interop Assemblies (PIAs).","pos":[6601,6690]},{"content":"For Excel 2003, see <bpt id=\"p1\">[</bpt>Office 2003 Update: Redistributable Primary Interop Assemblies<ept id=\"p1\">](http://www.microsoft.com/downloads/details.aspx?familyid=3c9a983a-ac14-4125-8ba0-d36d67e0f4ad&amp;displaylang=en)</ept>.","pos":[6691,6886],"source":" For Excel 2003, see [Office 2003 Update: Redistributable Primary Interop Assemblies](http://www.microsoft.com/downloads/details.aspx?familyid=3c9a983a-ac14-4125-8ba0-d36d67e0f4ad&displaylang=en)."},{"content":"For Microsoft Excel 2007, see <bpt id=\"p1\">[</bpt>2007 Microsoft Office System Update: Redistributable Primary Interop Assemblies<ept id=\"p1\">](http://www.microsoft.com/downloads/details.aspx?FamilyID=59daebaa-bed4-4282-a28c-b864d8bfa513&amp;displaylang=en)</ept>.","pos":[6887,7109],"source":" For Microsoft Excel 2007, see [2007 Microsoft Office System Update: Redistributable Primary Interop Assemblies](http://www.microsoft.com/downloads/details.aspx?FamilyID=59daebaa-bed4-4282-a28c-b864d8bfa513&displaylang=en)."},{"content":"Restart IDMF after successful installation of the PIAs.","pos":[7110,7165]},{"pos":[7170,7207],"content":"The discovery of a driver table fails","linkify":"The discovery of a driver table fails","nodes":[{"content":"The discovery of a driver table fails","pos":[0,37]}]},{"content":"When starting a discovery process for an Archive Object or a Purge Object, you may encounter the following error: \"Unable to discover the driver table for the Archive Object or Purge Object.\"","pos":[7208,7399]},{"content":"This error message is usually caused by metadata synchronization issues.","pos":[7400,7472]},{"content":"To fix this error condition, you must run the post-installation tasks.","pos":[7473,7543]},{"content":"Run the post-installation application by clicking <bpt id=\"p1\">**</bpt>Start<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>All programs<ept id=\"p2\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Intelligent Data Management Framework<ept id=\"p3\">**</ept> <ph id=\"ph3\">&amp;gt;</ph> <bpt id=\"p4\">**</bpt>Post-installation tasks<ept id=\"p4\">**</ept>, or follow these steps to resolve this error manually.","pos":[7544,7760],"source":" Run the post-installation application by clicking **Start** &gt; **All programs** &gt; **Intelligent Data Management Framework** &gt; **Post-installation tasks**, or follow these steps to resolve this error manually."},{"content":"For details, see the <bpt id=\"p1\">[</bpt>Installation Guide for the Microsoft Dynamics AX Intelligent Data Management Framework (IDMF)<ept id=\"p1\">](installation-guide-idmf.md)</ept>.","pos":[7761,7906],"source":" For details, see the [Installation Guide for the Microsoft Dynamics AX Intelligent Data Management Framework (IDMF)](installation-guide-idmf.md)."},{"pos":[7912,8104],"content":"Verify that <bpt id=\"p1\">**</bpt>AXDataManagementToolProjectnn.xpo<ept id=\"p1\">**</ept> exists in the Application Object Tree (AOT), where nn is 50, 60, 61, or 62 depending on the version of your Microsoft Dynamics AX application.","source":"Verify that **AXDataManagementToolProjectnn.xpo** exists in the Application Object Tree (AOT), where nn is 50, 60, 61, or 62 depending on the version of your Microsoft Dynamics AX application."},{"content":"Verify that you have successfully completed the post-installation checklist.","pos":[8109,8185]},{"pos":[8190,8312],"content":"Verify that all member of the implementation team are working on the same layer, for example <bpt id=\"p1\">**</bpt>CUS<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>VAR<ept id=\"p2\">**</ept>, or <bpt id=\"p3\">**</bpt>USR<ept id=\"p3\">**</ept>.","source":"Verify that all member of the implementation team are working on the same layer, for example **CUS**, **VAR**, or **USR**."},{"content":"Verify that the XPOs mentioned in step 1 are imported in the same layer, such as the <bpt id=\"p1\">**</bpt>VAR<ept id=\"p1\">**</ept> layer or the <bpt id=\"p2\">**</bpt>USR<ept id=\"p2\">**</ept> layer.","pos":[8317,8437],"source":"Verify that the XPOs mentioned in step 1 are imported in the same layer, such as the **VAR** layer or the **USR** layer."},{"content":"Verify that all methods from these XPOs are imported in the same layer, such as <bpt id=\"p1\">**</bpt>USR<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>VAR<ept id=\"p2\">**</ept>.","pos":[8438,8537],"source":" Verify that all methods from these XPOs are imported in the same layer, such as **USR** or **VAR**."},{"content":"Use the AOT to correct any difference you find between your AOT and the XPOs that are included with IDMF.","pos":[8542,8647]},{"content":"You can delete these XPOs from the layer they are currently in and manually import them to another layer, as described in the <bpt id=\"p1\">[</bpt>Data Management Framework Installation Guide<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=143616&amp;clcid=0x409)</ept>.","pos":[8648,8880],"source":" You can delete these XPOs from the layer they are currently in and manually import them to another layer, as described in the [Data Management Framework Installation Guide](http://go.microsoft.com/fwlink/?LinkId=143616&clcid=0x409)."},{"pos":[8885,8945],"content":"The database snapshot schedule fails with a permission error","linkify":"The database snapshot schedule fails with a permission error","nodes":[{"content":"The database snapshot schedule fails with a permission error","pos":[0,60]}]},{"content":"In a distributed SQL Server 2008 environment, you must install Service Pack 2 or a later version on all SQL Server instances when you store your databases on multiple servers.","pos":[8946,9121]},{"content":"For example, when you store your production database and archive database on two separate servers, you have a distributed SQL Server environment.","pos":[9122,9267]},{"content":"Both the servers must have SQL Server 2008 or a later version before you install and start IDMF.","pos":[9268,9364]},{"content":"Failure to do so causes the following error message from a database snapshot schedule: \"Syntax error, permission violation, or other nonspecific error.\"","pos":[9365,9517]},{"pos":[9522,9571],"content":"The discovery process fails with an error message","linkify":"The discovery process fails with an error message","nodes":[{"content":"The discovery process fails with an error message","pos":[0,49]}]},{"content":"The discovery process may display an error message: \"Cannot create archive object or purge object.\"","pos":[9572,9671]},{"content":"This message may appear if Application Object Server (AOS) is not available or the connection with AOS has failed.","pos":[9672,9786]},{"content":"Check the availability of AOS.","pos":[9787,9817]},{"content":"Restart the AOS if necessary, and then restart IDMF.","pos":[9818,9870]},{"pos":[9875,9946],"content":"Application Object Server error when connecting to the archive database","linkify":"Application Object Server error when connecting to the archive database","nodes":[{"content":"Application Object Server error when connecting to the archive database","pos":[0,71]}]},{"content":"In some environments, you may receive an error when Application Object Server (AOS) connects to the archive database: \"An internal error occurred while creating session for the user.\"","pos":[9947,10130]},{"content":"Verify that the account used for the AOS service has sufficient permissions to the archive database.","pos":[10131,10231]},{"content":"For more information, see the \"Rights required for installation\" section in the <bpt id=\"p1\">[</bpt>Data Management Framework Installation Guide<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=143616&amp;clcid=0x409)</ept>.","pos":[10232,10418],"source":" For more information, see the \"Rights required for installation\" section in the [Data Management Framework Installation Guide](http://go.microsoft.com/fwlink/?LinkId=143616&clcid=0x409)."},{"content":"Verify that the account used for the AOS service has the execute permission for stored procedures <bpt id=\"p1\">**</bpt>CREATESERVERSESSIONS<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>CREATEUSERSESSIONS<ept id=\"p2\">**</ept> in the archive database.","pos":[10419,10593],"source":" Verify that the account used for the AOS service has the execute permission for stored procedures **CREATESERVERSESSIONS** and **CREATEUSERSESSIONS** in the archive database."},{"pos":[10598,10658],"content":"The analysis snapshot schedule fails with a permission error","linkify":"The analysis snapshot schedule fails with a permission error","nodes":[{"content":"The analysis snapshot schedule fails with a permission error","pos":[0,60]}]},{"content":"The analysis snapshot schedule may fail with an error message: \"An OLE DB error has occurred.","pos":[10659,10752]},{"content":"Error code: 0x80040E14.An OLE DB record is available.","pos":[10753,10806]},{"content":"Source: \"Microsoft SQL Native Client\" Hresult: 0x80040E14 Description: \"The user does not have permission to perform this action\".\" This error message appears because of insufficient database permissions.","pos":[10807,11011]},{"content":"Be sure that the database permissions are assigned by following the instructions in the \"Rights required for installation\" section in the <bpt id=\"p1\">[</bpt>Data Management Framework Installation Guide<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=143616&amp;clcid=0x409)</ept>.","pos":[11012,11256],"source":" Be sure that the database permissions are assigned by following the instructions in the \"Rights required for installation\" section in the [Data Management Framework Installation Guide](http://go.microsoft.com/fwlink/?LinkId=143616&clcid=0x409)."},{"pos":[11261,11348],"content":"The analysis snapshot schedule fails because of a SQL Server Integration Services error","linkify":"The analysis snapshot schedule fails because of a SQL Server Integration Services error","nodes":[{"content":"The analysis snapshot schedule fails because of a SQL Server Integration Services error","pos":[0,87]}]},{"content":"The analysis snapshot schedule may fail with an error: \"Message: Package Error: The file exists.","pos":[11349,11445]},{"content":"The buffer manager could not get a temporary file name.","pos":[11446,11501]},{"content":"The call to GetTempFileName failed.","pos":[11502,11537]},{"content":"The buffer manager could not create a temporary file on the path C:DOCUME~1ADMINI~1.SAMLOCALS~1Temp.","pos":[11538,11638]},{"content":"The path will not be considered for temporary storage again.\"","pos":[11639,11700]},{"content":"To resolve this error, you must install SQL Server 2008 or a later version.","pos":[11701,11776]},{"content":"For more information, see Microsoft Knowledge Base article <bpt id=\"p1\">[</bpt>972365<ept id=\"p1\">](http://support.microsoft.com/kb/972365)</ept>.","pos":[11777,11885],"source":" For more information, see Microsoft Knowledge Base article [972365](http://support.microsoft.com/kb/972365)."},{"pos":[11890,11946],"content":"Unable to create an archive schedule or restore schedule","linkify":"Unable to create an archive schedule or restore schedule","nodes":[{"content":"Unable to create an archive schedule or restore schedule","pos":[0,56]}]},{"content":"If an archive schedule fails or is aborted, you must try to restart or revert it before you can create another schedule with the same object.","pos":[11947,12088]},{"content":"This restriction applies to all Archive Objects.","pos":[12089,12137]},{"pos":[12142,12194],"content":"Unable to select an archive schedule for restoration","linkify":"Unable to select an archive schedule for restoration","nodes":[{"content":"Unable to select an archive schedule for restoration","pos":[0,52]}]},{"content":"The archive schedule that you want to restore may be disabled, so that you cannot select it.","pos":[12195,12287]},{"content":"This occurs when your previous attempt to restore the schedule has either been aborted or failed.","pos":[12288,12385]},{"content":"In the Status window, navigate to the aborted or failed restore schedule.","pos":[12386,12459]},{"content":"Right-click the schedule, and then select <bpt id=\"p1\">**</bpt>Restart schedule<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Revert schedule<ept id=\"p2\">**</ept>, depending on the action you have to perform.","pos":[12460,12591],"source":" Right-click the schedule, and then select **Restart schedule** or **Revert schedule**, depending on the action you have to perform."},{"content":"If the schedule failed during the initialization state, no data was archived.","pos":[12592,12669]},{"content":"In that case, there is no need to restore or revert the schedule, and IDMF displays a warning that asks you to create a new schedule.","pos":[12670,12803]},{"content":"Use the <bpt id=\"p1\">**</bpt>Schedule<ept id=\"p1\">**</ept> menu to create a new archive schedule.","pos":[12804,12863],"source":" Use the **Schedule** menu to create a new archive schedule."},{"pos":[12867,12875],"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>","source":"**Note**"},{"content":"Always restart or revert a failed archive schedule before you create a new archive schedule for the same Archive Object.","pos":[13117,13237]},{"pos":[13244,13290],"content":"A schedule fails because of insufficient space","linkify":"A schedule fails because of insufficient space","nodes":[{"content":"A schedule fails because of insufficient space","pos":[0,46]}]},{"content":"Archive and purge schedules fail if the database or log files become full.","pos":[13291,13365]},{"content":"These schedules require a significant amount of free database and log space, depending on the volume of data you archive or purge.","pos":[13366,13496]},{"content":"By default, the purge and archive schedules process 100,000 records in a batch.","pos":[13497,13576]},{"content":"Reduce the batch size to decrease the database and log space required when a schedule processes a batch.","pos":[13577,13681]},{"content":"Follow these steps to configure the batch size:","pos":[13682,13729]},{"content":"Using Notepad, open <bpt id=\"p1\">**</bpt>AXDataManagementSchedulerService.exe.config<ept id=\"p1\">**</ept> from the installation folder of IDMF.","pos":[13734,13839],"source":"Using Notepad, open **AXDataManagementSchedulerService.exe.config** from the installation folder of IDMF."},{"content":"The default path of the installation folder is C:Program FilesMicrosoft Dynamics AX Intelligent Data Management Framework.","pos":[13840,13962]},{"content":"To decrease the batch size for an archive task, locate the configuration key BatchSizeForPurge <ph id=\"ph1\">&amp;lt;</ph>add key=\"BatchSizeForArchive\" value=\"4000\" /<ph id=\"ph2\">&amp;gt;</ph>, and change the key value to a smaller number.","pos":[13967,14161],"source":"To decrease the batch size for an archive task, locate the configuration key BatchSizeForPurge &lt;add key=\"BatchSizeForArchive\" value=\"4000\" /&gt;, and change the key value to a smaller number."},{"content":"To decrease the batch size for a purge schedule, locate the configuration key BatchSizeForPurge <ph id=\"ph1\">&amp;lt;</ph>add key=\"BatchSizeForPurge\" value=\"4000\" /<ph id=\"ph2\">&amp;gt;</ph>, and change the key value to a smaller number.","pos":[14166,14359],"source":"To decrease the batch size for a purge schedule, locate the configuration key BatchSizeForPurge &lt;add key=\"BatchSizeForPurge\" value=\"4000\" /&gt;, and change the key value to a smaller number."},{"content":"You must carefully determine the location and initial size of data and log files for the archive, production, management, and production replica databases.","pos":[14361,14516]},{"content":"Be sure that the initial size is sufficient for optimal performance and future growth.","pos":[14517,14603]},{"content":"For more information about database configuration, see <bpt id=\"p1\">[</bpt>Planning database configuration for Microsoft Dynamics AX<ept id=\"p1\">](http://www.microsoft.com/downloads/details.aspx?FamilyID=ab4cd401-b366-4c1c-9a73-88c945ae8191)</ept> and the Microsoft Dynamics AX Performance team's <bpt id=\"p2\">[</bpt>blog<ept id=\"p2\">](http://blogs.msdn.com/axperf/)</ept>.","pos":[14604,14901],"source":" For more information about database configuration, see [Planning database configuration for Microsoft Dynamics AX](http://www.microsoft.com/downloads/details.aspx?FamilyID=ab4cd401-b366-4c1c-9a73-88c945ae8191) and the Microsoft Dynamics AX Performance team's [blog](http://blogs.msdn.com/axperf/)."},{"pos":[14906,14935],"content":"Troubleshoot failed schedules","linkify":"Troubleshoot failed schedules","nodes":[{"content":"Troubleshoot failed schedules","pos":[0,29]}]},{"content":"Follow these steps to troubleshoot failed schedules:","pos":[14936,14988]},{"content":"View the log file and the list of common causes and associated solutions that are described in the previous sections.","pos":[14993,15110]},{"content":"Be sure to synchronize any metadata changes in the production database with the archive database via the metadata synchronization schedule.","pos":[15115,15254]},{"content":"The master data synchronization schedule may fail if the metadata is not synchronized between the two databases.","pos":[15255,15367]},{"content":"The purge schedule may fail if the Microsoft Distributed Transaction Coordinator (MSDTC) is not configured correctly.","pos":[15372,15489]},{"content":"A schedule may fail if the data file or log file in the database becomes full.","pos":[15494,15572]},{"content":"You must fix the error conditions before you rerun the schedule.","pos":[15574,15638]}]}