{"content":"---\n# required metadata\n\ntitle: Web API and OData controllers\ndescription: This article provides code to extend the ApiController class so that you can create a Web API controller for Retail Server.\nauthor: kfend\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-365-retail\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: robinr\nms.search.scope: AX 7.0.0, Operations, Retail, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 31481\nms.assetid: 4107b5a0-b4c4-4b83-b5b9-2fd82b26f36f\nms.search.region: Global\n# ms.search.industry: \nms.author: meeram\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update\n\n---\n\n# Web API and OData controllers\n\n[!include[banner](../includes/banner.md)]\n\n\nThis article provides code to extend the ApiController class so that you can create a Web API controller for Retail Server.\n\nBy default, all the Retail Server binaries in Microsoft Dynamics 365 for Retail use only OData. If you want to use a controller that uses a traditional Web API, you can create your own Web API controller and extend the Web API configuration. The following example shows how to create a Web API controller for Retail Server.\n\n    namespace Microsoft.Dynamics.RetailServer.Samples.Extensions\n    {\n        using System.Collections.Generic;\n        using System.Runtime.InteropServices;\n        using System.Web.Http;\n        using Commerce.Runtime.DataModel;\n        using Retail.StoreServerServiceLibrary;\n        [ComVisible(false)]\n        [ExtendedController(\"Values\")]\n        [CommerceAuthorization(AllowedRetailRoles = new string[] { CommerceRoles.Anonymous }, CheckRetailOperation = false)]\n        public class ValuesController : ApiController\n        {\n            // GET /api/values\n            public IEnumerable<string> Get()\n            {\n                return new string[] { \"value1\", \"value2\" };\n            }\n        }\n    }\n\nTo create the controller, create a new class that uses the **Export** attribute, and specify that the type is the **IWebApiConfig** interface. The **IWebApiConfig** interface has one method that you can override, the **Register** method. After you override the **Register** method, you can call the base class to get the same mapping as an OData metadata controller. You must derive from the standard Web API controller. You can then customize the controller to meet your business requirements. For more information, see [ASP.NET Web API](http://msdn.microsoft.com/en-us/library/hh833994(v=vs.108).aspx).\n\n\n\n","nodes":[{"pos":[4,735],"embed":true,"restype":"x-metadata","content":"# required metadata\n\ntitle: Web API and OData controllers\ndescription: This article provides code to extend the ApiController class so that you can create a Web API controller for Retail Server.\nauthor: kfend\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-365-retail\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: robinr\nms.search.scope: AX 7.0.0, Operations, Retail, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 31481\nms.assetid: 4107b5a0-b4c4-4b83-b5b9-2fd82b26f36f\nms.search.region: Global\n# ms.search.industry: \nms.author: meeram\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update\n","nodes":[{"content":"Web API and OData controllers","nodes":[{"pos":[0,29],"content":"Web API and OData controllers","nodes":[{"content":"Web API and OData controllers","pos":[0,29]}]}],"path":["title"],"extradata":"MT"},{"content":"This article provides code to extend the ApiController class so that you can create a Web API controller for Retail Server.","nodes":[{"pos":[0,123],"content":"This article provides code to extend the ApiController class so that you can create a Web API controller for Retail Server.","nodes":[{"content":"This article provides code to extend the ApiController class so that you can create a Web API controller for Retail Server.","pos":[0,123]}]}],"path":["description"],"extradata":"MT"}],"header":"# required metadata\n","yml":true},{"pos":[743,772],"content":"Web API and OData controllers","linkify":"Web API and OData controllers","nodes":[{"content":"Web API and OData controllers","pos":[0,29]}]},{"content":"This article provides code to extend the ApiController class so that you can create a Web API controller for Retail Server.","pos":[818,941]},{"content":"By default, all the Retail Server binaries in Microsoft Dynamics 365 for Retail use only OData.","pos":[943,1038]},{"content":"If you want to use a controller that uses a traditional Web API, you can create your own Web API controller and extend the Web API configuration.","pos":[1039,1184]},{"content":"The following example shows how to create a Web API controller for Retail Server.","pos":[1185,1266]},{"content":"To create the controller, create a new class that uses the <bpt id=\"p1\">**</bpt>Export<ept id=\"p1\">**</ept> attribute, and specify that the type is the <bpt id=\"p2\">**</bpt>IWebApiConfig<ept id=\"p2\">**</ept> interface.","pos":[1985,2127],"source":"To create the controller, create a new class that uses the **Export** attribute, and specify that the type is the **IWebApiConfig** interface."},{"content":"The <bpt id=\"p1\">**</bpt>IWebApiConfig<ept id=\"p1\">**</ept> interface has one method that you can override, the <bpt id=\"p2\">**</bpt>Register<ept id=\"p2\">**</ept> method.","pos":[2128,2222],"source":" The **IWebApiConfig** interface has one method that you can override, the **Register** method."},{"content":"After you override the <bpt id=\"p1\">**</bpt>Register<ept id=\"p1\">**</ept> method, you can call the base class to get the same mapping as an OData metadata controller.","pos":[2223,2351],"source":" After you override the **Register** method, you can call the base class to get the same mapping as an OData metadata controller."},{"content":"You must derive from the standard Web API controller.","pos":[2352,2405]},{"content":"You can then customize the controller to meet your business requirements.","pos":[2406,2479]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>ASP.NET Web API<ept id=\"p1\">](http://msdn.microsoft.com/en-us/library/hh833994(v=vs.108).aspx)</ept>.","pos":[2480,2589],"source":" For more information, see [ASP.NET Web API](http://msdn.microsoft.com/en-us/library/hh833994(v=vs.108).aspx)."}]}