{"content":"---\n# required metadata\n\ntitle: Data entity wizard rules\ndescription: This article provides information about the natural key expansion of surrogate foreign key fields and the expansion of child/parent relations.\nauthor: RobinARH\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: kfend\nms.search.scope: AX 7.0.0, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 6234\nms.assetid: 551ac5d6-980c-487f-a15c-66d7ab80924a\nms.search.region: Global\n# ms.search.industry: \nms.author: kuntalme\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Data entity wizard rules\n\n[!include[banner](../includes/banner.md)]\n\n\nThis article provides information about the natural key expansion of surrogate foreign key fields and the expansion of child/parent relations.\n\nNatural key expansion of surrogate foreign keys\n-----------------------------------------------\n\nA surrogate foreign key field’s extended data type must be **RefRecId** or a derivative. The natural key expansion of a surrogate foreign key field uses the rules in the following list. These rules are listed in the order of evaluation.\n\n1.  **Replacement key** – The replacement key fields\n2.  **Primary key** – The primary index key fields\n3.  **Alternate key** – The first unique alternate key\n4.  **Auto-identification key** – The auto-identification fields\n\nSurrogate foreign key fields that are nested in the natural key are recursively expanded. Recurring nested surrogates are limited to the first occurrence. If you select the **is mapped** property of a surrogate foreign key (that is, if you set the property to **true**), the related data source is automatically added to the entity, and the **is mapped** property of each field in the related data source’s natural key is selected. In addition, any nested surrogate foreign key data sources are recursively added to the entity. If you clear the **is mapped** property of a surrogate foreign key (that is, if you set the property to **false**), the related data source are automatically removed and unmapped from the entity and any nested surrogate foreign key data sources. The effect of selecting and clearing the **is mapped** property of a surrogate foreign key field differs from the effect of using the **Add data source** and **Remove data source** buttons. If you add a surrogate foreign key data source, the **is mapped** property of the parent data source surrogate foreign key field isn't automatically set to **true**. Likewise if you removing a surrogate foreign key data source, the **is mapped** property of the parent data source surrogate foreign key field isn't automatically set to **false**. By default, the **is mapped** property of the root data source’s surrogate foreign key field is set to **true**. Therefore, by default, surrogate foreign key relations are expanded to one level.\n\n## Expansion of parent/child relations\nParent/child relations are composition/extension relations that are stored as a relation on the child table. The parent table doesn't detect the relation. A parent/child relation can be either a surrogate foreign key relation or a natural foreign key. Parent/child relations use the following rules:\n\n-   The collection of child tables is obtained by querying the cross-reference database for “type reference” relations to the parent table.\n-   The child table must belong to the same table group as the parent table.\n-   The relation between the child and parent **relationship type** property must be **association**, **composition**, **link**, or **aggregation**.\n-   The relation between the child and parent **cardinality** property must be **exactly one** or **zero or one**.\n-   The relation between the child and parent **related table cardinality** property must be **exactly one** or **zero or one**.\n\nBy default, parent/child relations aren't expanded. You must add them by using the **Add data source** button. To change the default behavior for a project in Microsoft Visual Studio, set the **Expand parent/child** option to **true**.\n\n### Using label text as field names\n\nThe following rules enable label text to be used as the field name when the option is selected (**true**):\n\n-   All whitespace is removed from the label text.\n-   The label text is truncated to 77 characters, and then a unique three-digit numeric identifier (000 through 999) is added.\n-   The label text is passed to the **NamedElement.IsValid** method. If the name is valid, it can be used as the field name. Otherwise, the label text isn't used, and the field name remains unchanged.\n\n### The Is mandatory field\n\nThe default value of data entity fields is **auto**. This value is used unless it's explicitly changed. For relations, the related field’s **Is mandatory** property is set based on the value of the field’s **Is mandatory** value.\n\n-   If the field’s **Is mandatory** property and the related field’s **Is mandatory** are both **true**, both fields are explicitly set to **true**.\n-   If the field’s **Is mandatory** property and the related field’s **Is mandatory** are both **false**, both fields are explicitly set to **false**.\n\nIf the field’s **Is mandatory** property and the related field’s **Is mandatory** property differ in value, both fields remain unchanged. In this case, the default value of **auto** is used.\n\n\n\n","nodes":[{"pos":[4,720],"embed":true,"restype":"x-metadata","content":"# required metadata\n\ntitle: Data entity wizard rules\ndescription: This article provides information about the natural key expansion of surrogate foreign key fields and the expansion of child/parent relations.\nauthor: RobinARH\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: kfend\nms.search.scope: AX 7.0.0, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 6234\nms.assetid: 551ac5d6-980c-487f-a15c-66d7ab80924a\nms.search.region: Global\n# ms.search.industry: \nms.author: kuntalme\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n","nodes":[{"content":"Data entity wizard rules","nodes":[{"pos":[0,24],"content":"Data entity wizard rules","nodes":[{"content":"Data entity wizard rules","pos":[0,24]}]}],"path":["title"],"extradata":"MT"},{"content":"This article provides information about the natural key expansion of surrogate foreign key fields and the expansion of child/parent relations.","nodes":[{"pos":[0,142],"content":"This article provides information about the natural key expansion of surrogate foreign key fields and the expansion of child/parent relations.","nodes":[{"content":"This article provides information about the natural key expansion of surrogate foreign key fields and the expansion of child/parent relations.","pos":[0,142]}]}],"path":["description"],"extradata":"MT"}],"header":"# required metadata\n","yml":true},{"pos":[728,752],"content":"Data entity wizard rules","linkify":"Data entity wizard rules","nodes":[{"content":"Data entity wizard rules","pos":[0,24]}]},{"content":"This article provides information about the natural key expansion of surrogate foreign key fields and the expansion of child/parent relations.","pos":[798,940]},{"pos":[942,989],"content":"Natural key expansion of surrogate foreign keys","linkify":"Natural key expansion of surrogate foreign keys","nodes":[{"content":"Natural key expansion of surrogate foreign keys","pos":[0,47]}]},{"content":"A surrogate foreign key field’s extended data type must be <bpt id=\"p1\">**</bpt>RefRecId<ept id=\"p1\">**</ept> or a derivative.","pos":[1039,1127],"source":"A surrogate foreign key field’s extended data type must be **RefRecId** or a derivative."},{"content":"The natural key expansion of a surrogate foreign key field uses the rules in the following list.","pos":[1128,1224]},{"content":"These rules are listed in the order of evaluation.","pos":[1225,1275]},{"pos":[1281,1329],"content":"<bpt id=\"p1\">**</bpt>Replacement key<ept id=\"p1\">**</ept> – The replacement key fields","source":"**Replacement key** – The replacement key fields"},{"pos":[1334,1380],"content":"<bpt id=\"p1\">**</bpt>Primary key<ept id=\"p1\">**</ept> – The primary index key fields","source":"**Primary key** – The primary index key fields"},{"pos":[1385,1435],"content":"<bpt id=\"p1\">**</bpt>Alternate key<ept id=\"p1\">**</ept> – The first unique alternate key","source":"**Alternate key** – The first unique alternate key"},{"pos":[1440,1500],"content":"<bpt id=\"p1\">**</bpt>Auto-identification key<ept id=\"p1\">**</ept> – The auto-identification fields","source":"**Auto-identification key** – The auto-identification fields"},{"content":"Surrogate foreign key fields that are nested in the natural key are recursively expanded.","pos":[1502,1591]},{"content":"Recurring nested surrogates are limited to the first occurrence.","pos":[1592,1656]},{"content":"If you select the <bpt id=\"p1\">**</bpt>is mapped<ept id=\"p1\">**</ept> property of a surrogate foreign key (that is, if you set the property to <bpt id=\"p2\">**</bpt>true<ept id=\"p2\">**</ept>), the related data source is automatically added to the entity, and the <bpt id=\"p3\">**</bpt>is mapped<ept id=\"p3\">**</ept> property of each field in the related data source’s natural key is selected.","pos":[1657,1933],"source":" If you select the **is mapped** property of a surrogate foreign key (that is, if you set the property to **true**), the related data source is automatically added to the entity, and the **is mapped** property of each field in the related data source’s natural key is selected."},{"content":"In addition, any nested surrogate foreign key data sources are recursively added to the entity.","pos":[1934,2029]},{"content":"If you clear the <bpt id=\"p1\">**</bpt>is mapped<ept id=\"p1\">**</ept> property of a surrogate foreign key (that is, if you set the property to <bpt id=\"p2\">**</bpt>false<ept id=\"p2\">**</ept>), the related data source are automatically removed and unmapped from the entity and any nested surrogate foreign key data sources.","pos":[2030,2275],"source":" If you clear the **is mapped** property of a surrogate foreign key (that is, if you set the property to **false**), the related data source are automatically removed and unmapped from the entity and any nested surrogate foreign key data sources."},{"content":"The effect of selecting and clearing the <bpt id=\"p1\">**</bpt>is mapped<ept id=\"p1\">**</ept> property of a surrogate foreign key field differs from the effect of using the <bpt id=\"p2\">**</bpt>Add data source<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>Remove data source<ept id=\"p3\">**</ept> buttons.","pos":[2276,2465],"source":" The effect of selecting and clearing the **is mapped** property of a surrogate foreign key field differs from the effect of using the **Add data source** and **Remove data source** buttons."},{"content":"If you add a surrogate foreign key data source, the <bpt id=\"p1\">**</bpt>is mapped<ept id=\"p1\">**</ept> property of the parent data source surrogate foreign key field isn't automatically set to <bpt id=\"p2\">**</bpt>true<ept id=\"p2\">**</ept>.","pos":[2466,2631],"source":" If you add a surrogate foreign key data source, the **is mapped** property of the parent data source surrogate foreign key field isn't automatically set to **true**."},{"content":"Likewise if you removing a surrogate foreign key data source, the <bpt id=\"p1\">**</bpt>is mapped<ept id=\"p1\">**</ept> property of the parent data source surrogate foreign key field isn't automatically set to <bpt id=\"p2\">**</bpt>false<ept id=\"p2\">**</ept>.","pos":[2632,2812],"source":" Likewise if you removing a surrogate foreign key data source, the **is mapped** property of the parent data source surrogate foreign key field isn't automatically set to **false**."},{"content":"By default, the <bpt id=\"p1\">**</bpt>is mapped<ept id=\"p1\">**</ept> property of the root data source’s surrogate foreign key field is set to <bpt id=\"p2\">**</bpt>true<ept id=\"p2\">**</ept>.","pos":[2813,2925],"source":" By default, the **is mapped** property of the root data source’s surrogate foreign key field is set to **true**."},{"content":"Therefore, by default, surrogate foreign key relations are expanded to one level.","pos":[2926,3007]},{"pos":[3012,3047],"content":"Expansion of parent/child relations","linkify":"Expansion of parent/child relations","nodes":[{"content":"Expansion of parent/child relations","pos":[0,35]}]},{"content":"Parent/child relations are composition/extension relations that are stored as a relation on the child table.","pos":[3048,3156]},{"content":"The parent table doesn't detect the relation.","pos":[3157,3202]},{"content":"A parent/child relation can be either a surrogate foreign key relation or a natural foreign key.","pos":[3203,3299]},{"content":"Parent/child relations use the following rules:","pos":[3300,3347]},{"content":"The collection of child tables is obtained by querying the cross-reference database for “type reference” relations to the parent table.","pos":[3353,3488]},{"content":"The child table must belong to the same table group as the parent table.","pos":[3493,3565]},{"pos":[3570,3714],"content":"The relation between the child and parent <bpt id=\"p1\">**</bpt>relationship type<ept id=\"p1\">**</ept> property must be <bpt id=\"p2\">**</bpt>association<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>composition<ept id=\"p3\">**</ept>, <bpt id=\"p4\">**</bpt>link<ept id=\"p4\">**</ept>, or <bpt id=\"p5\">**</bpt>aggregation<ept id=\"p5\">**</ept>.","source":"The relation between the child and parent **relationship type** property must be **association**, **composition**, **link**, or **aggregation**."},{"pos":[3719,3829],"content":"The relation between the child and parent <bpt id=\"p1\">**</bpt>cardinality<ept id=\"p1\">**</ept> property must be <bpt id=\"p2\">**</bpt>exactly one<ept id=\"p2\">**</ept> or <bpt id=\"p3\">**</bpt>zero or one<ept id=\"p3\">**</ept>.","source":"The relation between the child and parent **cardinality** property must be **exactly one** or **zero or one**."},{"pos":[3834,3958],"content":"The relation between the child and parent <bpt id=\"p1\">**</bpt>related table cardinality<ept id=\"p1\">**</ept> property must be <bpt id=\"p2\">**</bpt>exactly one<ept id=\"p2\">**</ept> or <bpt id=\"p3\">**</bpt>zero or one<ept id=\"p3\">**</ept>.","source":"The relation between the child and parent **related table cardinality** property must be **exactly one** or **zero or one**."},{"content":"By default, parent/child relations aren't expanded.","pos":[3960,4011]},{"content":"You must add them by using the <bpt id=\"p1\">**</bpt>Add data source<ept id=\"p1\">**</ept> button.","pos":[4012,4070],"source":" You must add them by using the **Add data source** button."},{"content":"To change the default behavior for a project in Microsoft Visual Studio, set the <bpt id=\"p1\">**</bpt>Expand parent/child<ept id=\"p1\">**</ept> option to <bpt id=\"p2\">**</bpt>true<ept id=\"p2\">**</ept>.","pos":[4071,4195],"source":" To change the default behavior for a project in Microsoft Visual Studio, set the **Expand parent/child** option to **true**."},{"pos":[4201,4232],"content":"Using label text as field names","linkify":"Using label text as field names","nodes":[{"content":"Using label text as field names","pos":[0,31]}]},{"pos":[4234,4340],"content":"The following rules enable label text to be used as the field name when the option is selected (<bpt id=\"p1\">**</bpt>true<ept id=\"p1\">**</ept>):","source":"The following rules enable label text to be used as the field name when the option is selected (**true**):"},{"content":"All whitespace is removed from the label text.","pos":[4346,4392]},{"content":"The label text is truncated to 77 characters, and then a unique three-digit numeric identifier (000 through 999) is added.","pos":[4397,4519]},{"content":"The label text is passed to the <bpt id=\"p1\">**</bpt>NamedElement.IsValid<ept id=\"p1\">**</ept> method.","pos":[4524,4588],"source":"The label text is passed to the **NamedElement.IsValid** method."},{"content":"If the name is valid, it can be used as the field name.","pos":[4589,4644]},{"content":"Otherwise, the label text isn't used, and the field name remains unchanged.","pos":[4645,4720]},{"pos":[4726,4748],"content":"The Is mandatory field","linkify":"The Is mandatory field","nodes":[{"content":"The Is mandatory field","pos":[0,22]}]},{"content":"The default value of data entity fields is <bpt id=\"p1\">**</bpt>auto<ept id=\"p1\">**</ept>.","pos":[4750,4802],"source":"The default value of data entity fields is **auto**."},{"content":"This value is used unless it's explicitly changed.","pos":[4803,4853]},{"content":"For relations, the related field’s <bpt id=\"p1\">**</bpt>Is mandatory<ept id=\"p1\">**</ept> property is set based on the value of the field’s <bpt id=\"p2\">**</bpt>Is mandatory<ept id=\"p2\">**</ept> value.","pos":[4854,4979],"source":" For relations, the related field’s **Is mandatory** property is set based on the value of the field’s **Is mandatory** value."},{"pos":[4985,5129],"content":"If the field’s <bpt id=\"p1\">**</bpt>Is mandatory<ept id=\"p1\">**</ept> property and the related field’s <bpt id=\"p2\">**</bpt>Is mandatory<ept id=\"p2\">**</ept> are both <bpt id=\"p3\">**</bpt>true<ept id=\"p3\">**</ept>, both fields are explicitly set to <bpt id=\"p4\">**</bpt>true<ept id=\"p4\">**</ept>.","source":"If the field’s **Is mandatory** property and the related field’s **Is mandatory** are both **true**, both fields are explicitly set to **true**."},{"pos":[5134,5280],"content":"If the field’s <bpt id=\"p1\">**</bpt>Is mandatory<ept id=\"p1\">**</ept> property and the related field’s <bpt id=\"p2\">**</bpt>Is mandatory<ept id=\"p2\">**</ept> are both <bpt id=\"p3\">**</bpt>false<ept id=\"p3\">**</ept>, both fields are explicitly set to <bpt id=\"p4\">**</bpt>false<ept id=\"p4\">**</ept>.","source":"If the field’s **Is mandatory** property and the related field’s **Is mandatory** are both **false**, both fields are explicitly set to **false**."},{"content":"If the field’s <bpt id=\"p1\">**</bpt>Is mandatory<ept id=\"p1\">**</ept> property and the related field’s <bpt id=\"p2\">**</bpt>Is mandatory<ept id=\"p2\">**</ept> property differ in value, both fields remain unchanged.","pos":[5282,5419],"source":"If the field’s **Is mandatory** property and the related field’s **Is mandatory** property differ in value, both fields remain unchanged."},{"content":"In this case, the default value of <bpt id=\"p1\">**</bpt>auto<ept id=\"p1\">**</ept> is used.","pos":[5420,5472],"source":" In this case, the default value of **auto** is used."}]}