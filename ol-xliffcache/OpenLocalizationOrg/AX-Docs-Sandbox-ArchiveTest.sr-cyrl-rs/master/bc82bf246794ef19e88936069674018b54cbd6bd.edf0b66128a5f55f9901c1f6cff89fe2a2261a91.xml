{"content":"---\n# required metadata\n\ntitle: Process for moving to the latest update of Finance and Operations\ndescription: This topic describes the process for upgrading to the latest update for Microsoft Dynamics 365 for Finance and Operations. \nauthor: tariqbell\nmanager: AnnBe\nms.date: 07/28/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \nms.reviewer: margoc\nms.search.scope: Operations, Platform, AX Platform, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 102343\nms.assetid: e48d7424-371a-49ee-882c-07b7ceb00183\nms.search.region: Global\n# ms.search.industry: \nms.author: tabell\nms.search.validFrom: 2016-05-31\nms.dyn365.ops.version: Platform update 1\n\n---\n\n# Process for moving to the latest update of Finance and Operations\n\n[!include[banner](../includes/banner.md)]\n\n\nThis topic describes the process for upgrading to the latest update for Microsoft Dynamics 365 for Finance and Operations. This topic is intended to describe the overall process and supported scenarios, not to provide detailed instructions for every step of the process.\n\nOverview\n--------\n\nThis topic describes the overall process and the supported scenarios that are related to an upgrade from earlier releases to the current update for Finance and Operations. It isn't intended to provide detailed instructions for every step of the process. For details of the contents of each available upgrade see [What's new or changed](../get-started/whats-new-changed.md).\n\n## Definitions\nFinance and Operations platform updates consist mainly of the following components: Application Object Server (AOS), analytics and reporting, Microsoft Office integration, data management, integration services, the web client, and other binaries. It also includes the following Application Object Tree (AOT) models:\n\n-   Application Platform\n-   Application Foundation\n-   Directory and Test Essentials\n\nAll other components are referred to as the Finance and Operations application.\n\n## Introduction to scenarios\n### Scenario 1: Update to a specific application hotfix\n\nUse this scenario when one or more small hotfixes are required to address a specific issue and business factors, such as time or cost limitations, prohibit a complete application update.\n\n### Scenario 2: Upgrade your custom code\n\nThis process is required before embarking on Scenario 3 and is to be completed by a developer before other activities can begin.\n\n### Scenario 3: Upgrade to the most current application update\nUse this scenario when business factors, such as time or cost limitations, prohibit the complete latest application update. Some examples of application updates are Release 1611 (also known as 7.1) and the July 2017 release (also known as 7.2). When installing a platform-only update, use scenario 4 below. Some examples of platform updates are the August 2016 release, or Platform update 6 or Platform update 7. If you have any questions about what your update contains, contact Microsoft Support for confirmation.\n\n### Scenario 4: Upgrade to the most current platform only\n\nUse this scenario to update to the latest release of the platform, when no application updates are required at that time. Note that platform updates are always cumulative. Some examples of platform updates are the August 2016 release, Platform update 6, and Platform update 7. \n\n> [!IMPORTANT]\n> Platform update 1 and Platform update 2 allowed overlayering of platform X++ code. Later platform updates had the platform-level X++ locked for overlayering. If you are upgrading from Platform update 1 or Platform update 2, your developers will need to refactor the overlayering as extensions before you can upgrade. If you are upgrading from Platform update 3 or higher to a later platform update, you can do so without refactoring your X++ code.\n\n## Scenario 1: Update to a specific application hotfix\nUse this scenario when one or more small hotfixes are required to address a specific issue, and when business factors such as time or cost prohibit taking an entire major application update at that moment. It is not necessary to perform a complete upgrade of your application to uptake new features of the application. All features in the current update of the application are available individually on Microsoft Dynamics Lifecycle Services (LCS). For more information about how to download hotfixes from LCS, see [Download hotfixes from Lifecycle Services](download-hotfix-lcs.md).\n\n## Scenario 2: Upgrade your custom code\nThis scenario describes the process for upgrading code from an earlier release to the current release. This process is required before you can perform Scenario 3 and is to be completed by a developer before other activities can begin. Code upgrade is needed when you deploy new environments as part of the process of upgrading your application to a new major or cumulative release. Code upgrade is not required for platform updates.\n\n| Source environment                                     | Expected content of AX7.version file for source | Target environment                                           | Do I need the code upgrade service? |\n|--------------------------------------------------------|-------------------------------------------------|--------------------------------------------------------------|-------------------------------------|\n| Release 1611 (Application 7.1.0)                       | 7.1.1541.3036                                   | July 2017 Release (Application 7.2.0)                        | Yes                                 |\n| August 2016 (Application 7.0.1 with Platform update 2) | 7.0.1265.27075                                  | July 2017 Release (Application 7.2.0)                        | Yes                                 |\n| August 2016 (Application 7.0.1 with Platform update 2) | 7.0.1265.27075                                  | Release 1611 (Platform update 3 or newer, Application 7.1.0) | Yes                                 |\n| May 2016 (Application 7.0.1)                           | 7.0.1265.23014                                  | July 2017 Release (Application 7.2.0)                        | Yes                                 |\n| May 2016 (Application 7.0.1)                           | 7.0.1265.23014                                  | Release 1611 (Platform update 3 or newer, Application 7.1.0) | Yes                                 |\n| February 2016 (Application 7.0.0)                      | 7.0.1265.3015                                   | July 2017 Release (Application 7.2.0)                        | Yes                                 |\n| February 2016 (Application 7.0.0)                      | 7.0.1265.3015                                   | Release 1611 (Platform update 3 or newer, Application 7.1.0) | Yes                                 |\n| Microsoft Dynamics AX 2012                             | Not applicable                                  | July 2017 Release (Application 7.2.0)                        | Yes                                 |\n| July 2017 (Platform update 8, application 7.2)         |                                                 | Newer version of the platform                                | No                                  |\n| Release 1611 (Platform update 3, Application 7.1.0)    |                                                 | Newer version of the platform                                | No                                  |\n| May 2016 (Platform update 1, Application 7.0.1)        |                                                 | August 2016 (Platform update 2, Application 7.0.1)           | No                                  |                           |\n\nRegardless of whether you're a live customer or you're still in the implementation phase of your project, follow these steps to upgrade your code to the latest platform and application updates.\n\n1.  Use the Code upgrade service on Lifecycle Services to upgrade your code, see [Configure the code upgrade service in Lifecycle services](../lifecycle-services/configure-execute-code-upgrade.md). We recommend running the code upgrade service even if you do not have custom code, because the service will still help you by removing any old Microsoft X++ hotfixes you have installed, which is a required step.\n\n > [!IMPORTANT]\n > There are several application hotfixes which may be required before you can upgrade data. Before you redeploy your existing  development environment, check whether these hotfixes are needed, and install and check them into VSTS. This step can only be performed on the old version of your development environment. Hotfixes required in different situations are listed here: [Upgrade data in develop, demo, or sandbox environments](upgrade-data-to-latest-update.md#before-you-begin).\n\n2.  You will need to deploy a new development environment, which is running the new version that you are upgrading to. You will use this environment to complete code merging and refactoring of your custom code. Submit a request for a new Dev/Test environment that is running the latest update.\n    -   You might have to delete your existing Dev/Test environment if your subscription doesn't allow for a new one.\n    -   Depending on your project type, these are the other options to deploy a developer VM:\n        -   Download a Dev VHD.\n        -   If you're running in your own Microsoft Azure subscription, deploy a new developer topology.\n    -   If you want to keep your development data from your old development environment then create a database backup and retain the BAK file. When you have completed code upgrade, you can then restore the retained database backup to your new development environment and perform a data upgrade by following the steps in [Upgrade data in develop, demo or sandbox environments](upgrade-data-to-latest-update.md)\n\n3.  Complete the code migration steps.\n    1.  Connect your development virtual machine (VM) to Microsoft Visual Studio Team Services (VSTS), and map your local metadata folder to the VSTS branch that contains your upgraded code.\n    2.  Synchronize, resolve conflicts (when applicable), build, and test.\n    3.  Merge the VSTS branch that contains your upgraded code with your main development branch. For more information, see [Merge folders and files](https://www.visualstudio.com/en-us/docs/tfvc/merge-folders-files).\n    4.  Build and test.\n    5.  Create deployable packages of your code.\n\n4.  Install any hotfixes that apply to the environment.\n\n5.  Upload deployable packages to the LCS Asset library of your project.\nFor more details on code migration steps, see [Code Migration](../dev-tools/developer-home-page.md#code-migration). After code migration is complete, continue to Scenario 3.\n\n## Scenario 3: Upgrade to the most current application update\nThese steps apply to customers who are live on an earlier release and want to perform a full upgrade to the most recent platform and application versions. Customers who have already deployed and configured a production environment might also fall into this category, even if they haven't gone live yet. If you are not upgrading your application, but want to upgrade your platform to the latest bits, use Scenario 4 below, especially if you have no customizations of the platform models.\n\n### Upgrade your code\n\nFirst, upgrade your code as described in Scenario 2. This is a developer task and will happen on a developer environment.\n\n### Upgrade your data\n\nExecute the data upgrade process on a copy of your target database – if your environment is already live in production then the target database is a copy of production; if your environment is not yet live, it will be your most current database. This is a validation process performed by a developer (on a development or test environment) to ensure that the data upgrade completes successfully with the specific set of customizations within this environment – completion of this step helps ensure success in the sandbox and production environments later. To copy your database back to a developer environment, follow the steps in [Copy a Microsoft Dynamics 365 for Finance and Operations database from Azure SQL Database to a SQL Server environment](../database/copy-database-from-azure-sql-to-sql-server.md). To execute the data upgrade process, follow the steps in [Process for data upgrade for development or demo environments](upgrade-data-to-latest-update.md).\n\n### Upgrade your sandbox environment\n\nYou can make a request via LCS for the Microsoft Servicing Engineering (DSE) Team to run this process for you, when the following conditions are met:\n\n- You need to be live in production or have already deployed your production environment\n- DSE will perform the data upgrade in one Tier 2 or higher sandbox environment\n- DSE will perform the data upgrade in the production environment\n\nTo upgrade any additional Tier 2 or higher sandbox environments: you do not need to upgrade these. Instead, delete them, redeploy, and then make a database refresh request to copy a database from a Tier 2 or higher environment that hase already been upgraded. Alternatively you can upgrade them manually by following [Process for Upgrading a Sandbox Environment](upgrade-sandbox-environment.md)\nFor upgrading any Tier 1 environments (also known as dev boxes or one-boxes). You can deploy these with the new version and just sync to your upgraded VSTS branch. To get data for the Tier 1 environments, a developer can upgrade the database following [Upgrade data in develop, demo or sandbox environments](upgrade-data-to-latest-update.md)\n\n\n#### Use LCS to submit an upgrade request to DSE\n1. Go to the **Environment details** page for the environment that you want to upgrade, click **Maintain**, and then select **Upgrade**. A window will display where you can enter the upgrade request.\n![Upgrade request](./media/UpgradeMaintainButton.PNG)\n2. You must submit your upgrade request 5 working days before you expect to upgrade, to help ensure that the upgrade can be performed within your expected timeframe. The advanced notice is required to prepare a new environment in the background. When downtime starts, this new environment will be swapped with the existing environment. You will not be able to see the new environment, it's a background mechanism.\n3. You must allow at least 8 hours between the downtime start and downtime end times. This time is required to perform the swap in of the new environment and the data upgrade process.\n4. If you have custom code or X++ hotfixes that must be part of your upgraded environment, you must select Application deployable packages during your upgrade request. Select the deployable packages that contain your upgraded custom code and the X++ hotfixes that were created on your development or build environment during the code upgrade process. \n\n > [!IMPORTANT]\n > - If you do not select your application deployable packages in the service request, your service request may be rejected by DSE.\n > - If an error causes the upgrade process to stop, DSE will roll the environment back to its original state. The issue that caused the failure can then be resolved, and the upgrade can be rescheduled at a new time.\n > - A minimum 16 hour downtime is required if you are using Retail features, because additional upgrade steps are needed.\n\n ![Upgrade request](./media/Upgrade-Request-2.png)\n\n#### Validate your sandbox environment\n- The updated environment will have the same URL, same environment name, and same machine names as the former environment.\n- When validation is completed successfully, notify the DSE team using an LCS ticket and the DSE team will retire your old environment.\n\n### Upgrade your production environment\n\n1.  Use LCS to submit an Upgrade request to update the production environment in exactly the same way as you did for the sandbox environment in the previous step.\n2.  Validate.\n3.  When validation is completed successfully, notify the DSE team using an LCS ticket and the DSE team will retire your old environment.\n\n## Scenario 4: Upgrade to the most current platform only\nIf you're running an environment that doesn't contain any customization of the platform AOT models (Application Platform, Application Foundation, Directory and Test Essentials), you can do an in-place update of your platform, without upgrading to a new environment. For more information about this process, see [Upgrade Finance and Operations to the latest platform update](upgrade-latest-platform-update.md). If you only upgrade your platform, there is no need to do code upgrade (Scenario 2 above) or run data upgrade scripts.\n\n","nodes":[{"pos":[4,774],"embed":true,"restype":"x-metadata","content":"# required metadata\n\ntitle: Process for moving to the latest update of Finance and Operations\ndescription: This topic describes the process for upgrading to the latest update for Microsoft Dynamics 365 for Finance and Operations. \nauthor: tariqbell\nmanager: AnnBe\nms.date: 07/28/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \nms.reviewer: margoc\nms.search.scope: Operations, Platform, AX Platform, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 102343\nms.assetid: e48d7424-371a-49ee-882c-07b7ceb00183\nms.search.region: Global\n# ms.search.industry: \nms.author: tabell\nms.search.validFrom: 2016-05-31\nms.dyn365.ops.version: Platform update 1\n","nodes":[{"content":"Process for moving to the latest update of Finance and Operations","nodes":[{"pos":[0,65],"content":"Process for moving to the latest update of Finance and Operations","nodes":[{"content":"Process for moving to the latest update of Finance and Operations","pos":[0,65]}]}],"path":["title"],"extradata":"MT"},{"content":"This topic describes the process for upgrading to the latest update for Microsoft Dynamics 365 for Finance and Operations.","nodes":[{"pos":[0,122],"content":"This topic describes the process for upgrading to the latest update for Microsoft Dynamics 365 for Finance and Operations.","nodes":[{"content":"This topic describes the process for upgrading to the latest update for Microsoft Dynamics 365 for Finance and Operations.","pos":[0,122]}]}],"path":["description"],"extradata":"MT"}],"header":"# required metadata\n","yml":true},{"pos":[782,847],"content":"Process for moving to the latest update of Finance and Operations","linkify":"Process for moving to the latest update of Finance and Operations","nodes":[{"content":"Process for moving to the latest update of Finance and Operations","pos":[0,65]}]},{"content":"This topic describes the process for upgrading to the latest update for Microsoft Dynamics 365 for Finance and Operations.","pos":[893,1015]},{"content":"This topic is intended to describe the overall process and supported scenarios, not to provide detailed instructions for every step of the process.","pos":[1016,1163]},{"pos":[1165,1173],"content":"Overview","linkify":"Overview","nodes":[{"content":"Overview","pos":[0,8]}]},{"content":"This topic describes the overall process and the supported scenarios that are related to an upgrade from earlier releases to the current update for Finance and Operations.","pos":[1184,1355]},{"content":"It isn't intended to provide detailed instructions for every step of the process.","pos":[1356,1437]},{"content":"For details of the contents of each available upgrade see <bpt id=\"p1\">[</bpt>What's new or changed<ept id=\"p1\">](../get-started/whats-new-changed.md)</ept>.","pos":[1438,1557],"source":" For details of the contents of each available upgrade see [What's new or changed](../get-started/whats-new-changed.md)."},{"pos":[1562,1573],"content":"Definitions","linkify":"Definitions","nodes":[{"content":"Definitions","pos":[0,11]}]},{"content":"Finance and Operations platform updates consist mainly of the following components: Application Object Server (AOS), analytics and reporting, Microsoft Office integration, data management, integration services, the web client, and other binaries.","pos":[1574,1820]},{"content":"It also includes the following Application Object Tree (AOT) models:","pos":[1821,1889]},{"content":"Application Platform","pos":[1895,1915]},{"content":"Application Foundation","pos":[1920,1942]},{"content":"Directory and Test Essentials","pos":[1947,1976]},{"content":"All other components are referred to as the Finance and Operations application.","pos":[1978,2057]},{"pos":[2062,2087],"content":"Introduction to scenarios","linkify":"Introduction to scenarios","nodes":[{"content":"Introduction to scenarios","pos":[0,25]}]},{"pos":[2092,2143],"content":"Scenario 1: Update to a specific application hotfix","linkify":"Scenario 1: Update to a specific application hotfix","nodes":[{"content":"Scenario 1: Update to a specific application hotfix","pos":[0,51]}]},{"content":"Use this scenario when one or more small hotfixes are required to address a specific issue and business factors, such as time or cost limitations, prohibit a complete application update.","pos":[2145,2331]},{"pos":[2337,2373],"content":"Scenario 2: Upgrade your custom code","linkify":"Scenario 2: Upgrade your custom code","nodes":[{"content":"Scenario 2: Upgrade your custom code","pos":[0,36]}]},{"content":"This process is required before embarking on Scenario 3 and is to be completed by a developer before other activities can begin.","pos":[2375,2503]},{"pos":[2509,2567],"content":"Scenario 3: Upgrade to the most current application update","linkify":"Scenario 3: Upgrade to the most current application update","nodes":[{"content":"Scenario 3: Upgrade to the most current application update","pos":[0,58]}]},{"content":"Use this scenario when business factors, such as time or cost limitations, prohibit the complete latest application update.","pos":[2568,2691]},{"content":"Some examples of application updates are Release 1611 (also known as 7.1) and the July 2017 release (also known as 7.2).","pos":[2692,2812]},{"content":"When installing a platform-only update, use scenario 4 below.","pos":[2813,2874]},{"content":"Some examples of platform updates are the August 2016 release, or Platform update 6 or Platform update 7.","pos":[2875,2980]},{"content":"If you have any questions about what your update contains, contact Microsoft Support for confirmation.","pos":[2981,3083]},{"pos":[3089,3142],"content":"Scenario 4: Upgrade to the most current platform only","linkify":"Scenario 4: Upgrade to the most current platform only","nodes":[{"content":"Scenario 4: Upgrade to the most current platform only","pos":[0,53]}]},{"content":"Use this scenario to update to the latest release of the platform, when no application updates are required at that time.","pos":[3144,3265]},{"content":"Note that platform updates are always cumulative.","pos":[3266,3315]},{"content":"Some examples of platform updates are the August 2016 release, Platform update 6, and Platform update 7.","pos":[3316,3420]},{"pos":[3425,3887],"content":"[!IMPORTANT]\nPlatform update 1 and Platform update 2 allowed overlayering of platform X++ code. Later platform updates had the platform-level X++ locked for overlayering. If you are upgrading from Platform update 1 or Platform update 2, your developers will need to refactor the overlayering as extensions before you can upgrade. If you are upgrading from Platform update 3 or higher to a later platform update, you can do so without refactoring your X++ code.","leadings":["","> "],"nodes":[{"content":"Platform update 1 and Platform update 2 allowed overlayering of platform X++ code. Later platform updates had the platform-level X++ locked for overlayering. If you are upgrading from Platform update 1 or Platform update 2, your developers will need to refactor the overlayering as extensions before you can upgrade. If you are upgrading from Platform update 3 or higher to a later platform update, you can do so without refactoring your X++ code.","pos":[13,460],"nodes":[{"content":"Platform update 1 and Platform update 2 allowed overlayering of platform X++ code.","pos":[0,82]},{"content":"Later platform updates had the platform-level X++ locked for overlayering.","pos":[83,157]},{"content":"If you are upgrading from Platform update 1 or Platform update 2, your developers will need to refactor the overlayering as extensions before you can upgrade.","pos":[158,316]},{"content":"If you are upgrading from Platform update 3 or higher to a later platform update, you can do so without refactoring your X++ code.","pos":[317,447]}]}]},{"pos":[3892,3943],"content":"Scenario 1: Update to a specific application hotfix","linkify":"Scenario 1: Update to a specific application hotfix","nodes":[{"content":"Scenario 1: Update to a specific application hotfix","pos":[0,51]}]},{"content":"Use this scenario when one or more small hotfixes are required to address a specific issue, and when business factors such as time or cost prohibit taking an entire major application update at that moment.","pos":[3944,4149]},{"content":"It is not necessary to perform a complete upgrade of your application to uptake new features of the application.","pos":[4150,4262]},{"content":"All features in the current update of the application are available individually on Microsoft Dynamics Lifecycle Services (LCS).","pos":[4263,4391]},{"content":"For more information about how to download hotfixes from LCS, see <bpt id=\"p1\">[</bpt>Download hotfixes from Lifecycle Services<ept id=\"p1\">](download-hotfix-lcs.md)</ept>.","pos":[4392,4526],"source":" For more information about how to download hotfixes from LCS, see [Download hotfixes from Lifecycle Services](download-hotfix-lcs.md)."},{"pos":[4531,4567],"content":"Scenario 2: Upgrade your custom code","linkify":"Scenario 2: Upgrade your custom code","nodes":[{"content":"Scenario 2: Upgrade your custom code","pos":[0,36]}]},{"content":"This scenario describes the process for upgrading code from an earlier release to the current release.","pos":[4568,4670]},{"content":"This process is required before you can perform Scenario 3 and is to be completed by a developer before other activities can begin.","pos":[4671,4802]},{"content":"Code upgrade is needed when you deploy new environments as part of the process of upgrading your application to a new major or cumulative release.","pos":[4803,4949]},{"content":"Code upgrade is not required for platform updates.","pos":[4950,5000]},{"content":"Source environment","pos":[5004,5022]},{"content":"Expected content of AX7.version file for source","pos":[5061,5108]},{"content":"Target environment","pos":[5111,5129]},{"content":"Do I need the code upgrade service?","pos":[5174,5209]},{"content":"Release 1611 (Application 7.1.0)","pos":[5424,5456]},{"content":"7.1.1541.3036","pos":[5481,5494]},{"content":"July 2017 Release (Application 7.2.0)","pos":[5531,5568]},{"content":"Yes","pos":[5594,5597]},{"content":"August 2016 (Application 7.0.1 with Platform update 2)","pos":[5634,5688]},{"content":"7.0.1265.27075","pos":[5691,5705]},{"content":"July 2017 Release (Application 7.2.0)","pos":[5741,5778]},{"content":"Yes","pos":[5804,5807]},{"content":"August 2016 (Application 7.0.1 with Platform update 2)","pos":[5844,5898]},{"content":"7.0.1265.27075","pos":[5901,5915]},{"content":"Release 1611 (Platform update 3 or newer, Application 7.1.0)","pos":[5951,6011]},{"content":"Yes","pos":[6014,6017]},{"content":"May 2016 (Application 7.0.1)","pos":[6054,6082]},{"content":"7.0.1265.23014","pos":[6111,6125]},{"content":"July 2017 Release (Application 7.2.0)","pos":[6161,6198]},{"content":"Yes","pos":[6224,6227]},{"content":"May 2016 (Application 7.0.1)","pos":[6264,6292]},{"content":"7.0.1265.23014","pos":[6321,6335]},{"content":"Release 1611 (Platform update 3 or newer, Application 7.1.0)","pos":[6371,6431]},{"content":"Yes","pos":[6434,6437]},{"content":"February 2016 (Application 7.0.0)","pos":[6474,6507]},{"content":"7.0.1265.3015","pos":[6531,6544]},{"content":"July 2017 Release (Application 7.2.0)","pos":[6581,6618]},{"content":"Yes","pos":[6644,6647]},{"content":"February 2016 (Application 7.0.0)","pos":[6684,6717]},{"content":"7.0.1265.3015","pos":[6741,6754]},{"content":"Release 1611 (Platform update 3 or newer, Application 7.1.0)","pos":[6791,6851]},{"content":"Yes","pos":[6854,6857]},{"content":"Microsoft Dynamics AX 2012","pos":[6894,6920]},{"content":"Not applicable","pos":[6951,6965]},{"content":"July 2017 Release (Application 7.2.0)","pos":[7001,7038]},{"content":"Yes","pos":[7064,7067]},{"content":"July 2017 (Platform update 8, application 7.2)","pos":[7104,7150]},{"content":"Newer version of the platform","pos":[7211,7240]},{"content":"No","pos":[7274,7276]},{"content":"Release 1611 (Platform update 3, Application 7.1.0)","pos":[7314,7365]},{"content":"Newer version of the platform","pos":[7421,7450]},{"content":"No","pos":[7484,7486]},{"content":"May 2016 (Platform update 1, Application 7.0.1)","pos":[7524,7571]},{"content":"August 2016 (Platform update 2, Application 7.0.1)","pos":[7631,7681]},{"content":"No","pos":[7694,7696]},{"content":"Regardless of whether you're a live customer or you're still in the implementation phase of your project, follow these steps to upgrade your code to the latest platform and application updates.","pos":[7761,7954]},{"content":"Use the Code upgrade service on Lifecycle Services to upgrade your code, see <bpt id=\"p1\">[</bpt>Configure the code upgrade service in Lifecycle services<ept id=\"p1\">](../lifecycle-services/configure-execute-code-upgrade.md)</ept>.","pos":[7960,8153],"source":"Use the Code upgrade service on Lifecycle Services to upgrade your code, see [Configure the code upgrade service in Lifecycle services](../lifecycle-services/configure-execute-code-upgrade.md)."},{"content":"We recommend running the code upgrade service even if you do not have custom code, because the service will still help you by removing any old Microsoft X++ hotfixes you have installed, which is a required step.","pos":[8154,8365]},{"pos":[8370,8866],"content":"[!IMPORTANT]\nThere are several application hotfixes which may be required before you can upgrade data. Before you redeploy your existing  development environment, check whether these hotfixes are needed, and install and check them into VSTS. This step can only be performed on the old version of your development environment. Hotfixes required in different situations are listed here: [Upgrade data in develop, demo, or sandbox environments](upgrade-data-to-latest-update.md#before-you-begin).","leadings":[""," > "],"nodes":[{"content":"There are several application hotfixes which may be required before you can upgrade data. Before you redeploy your existing  development environment, check whether these hotfixes are needed, and install and check them into VSTS. This step can only be performed on the old version of your development environment. Hotfixes required in different situations are listed here: [Upgrade data in develop, demo, or sandbox environments](upgrade-data-to-latest-update.md#before-you-begin).","pos":[13,493],"nodes":[{"content":"There are several application hotfixes which may be required before you can upgrade data.","pos":[0,89]},{"content":"Before you redeploy your existing  development environment, check whether these hotfixes are needed, and install and check them into VSTS.","pos":[90,228]},{"content":"This step can only be performed on the old version of your development environment.","pos":[229,312]},{"content":"Hotfixes required in different situations are listed here: <bpt id=\"p1\">[</bpt>Upgrade data in develop, demo, or sandbox environments<ept id=\"p1\">](upgrade-data-to-latest-update.md#before-you-begin)</ept>.","pos":[313,480],"source":" Hotfixes required in different situations are listed here: [Upgrade data in develop, demo, or sandbox environments](upgrade-data-to-latest-update.md#before-you-begin)."}]}]},{"content":"You will need to deploy a new development environment, which is running the new version that you are upgrading to.","pos":[8872,8986]},{"content":"You will use this environment to complete code merging and refactoring of your custom code.","pos":[8987,9078]},{"content":"Submit a request for a new Dev/Test environment that is running the latest update.","pos":[9079,9161]},{"content":"You might have to delete your existing Dev/Test environment if your subscription doesn't allow for a new one.","pos":[9170,9279]},{"content":"Depending on your project type, these are the other options to deploy a developer VM:","pos":[9288,9373]},{"content":"Download a Dev VHD.","pos":[9386,9405]},{"content":"If you're running in your own Microsoft Azure subscription, deploy a new developer topology.","pos":[9418,9510]},{"content":"If you want to keep your development data from your old development environment then create a database backup and retain the BAK file.","pos":[9519,9653]},{"content":"When you have completed code upgrade, you can then restore the retained database backup to your new development environment and perform a data upgrade by following the steps in <bpt id=\"p1\">[</bpt>Upgrade data in develop, demo or sandbox environments<ept id=\"p1\">](upgrade-data-to-latest-update.md)</ept>","pos":[9654,9920],"source":" When you have completed code upgrade, you can then restore the retained database backup to your new development environment and perform a data upgrade by following the steps in [Upgrade data in develop, demo or sandbox environments](upgrade-data-to-latest-update.md)"},{"content":"Complete the code migration steps.","pos":[9926,9960]},{"content":"Connect your development virtual machine (VM) to Microsoft Visual Studio Team Services (VSTS), and map your local metadata folder to the VSTS branch that contains your upgraded code.","pos":[9969,10151]},{"content":"Synchronize, resolve conflicts (when applicable), build, and test.","pos":[10160,10226]},{"content":"Merge the VSTS branch that contains your upgraded code with your main development branch.","pos":[10235,10324]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Merge folders and files<ept id=\"p1\">](https://www.visualstudio.com/en-us/docs/tfvc/merge-folders-files)</ept>.","pos":[10325,10443],"source":" For more information, see [Merge folders and files](https://www.visualstudio.com/en-us/docs/tfvc/merge-folders-files)."},{"content":"Build and test.","pos":[10452,10467]},{"content":"Create deployable packages of your code.","pos":[10476,10516]},{"content":"Install any hotfixes that apply to the environment.","pos":[10522,10573]},{"content":"Upload deployable packages to the LCS Asset library of your project.","pos":[10579,10647]},{"content":"For more details on code migration steps, see <bpt id=\"p1\">[</bpt>Code Migration<ept id=\"p1\">](../dev-tools/developer-home-page.md#code-migration)</ept>.","pos":[10648,10763],"source":"\nFor more details on code migration steps, see [Code Migration](../dev-tools/developer-home-page.md#code-migration)."},{"content":"After code migration is complete, continue to Scenario 3.","pos":[10764,10821]},{"pos":[10826,10884],"content":"Scenario 3: Upgrade to the most current application update","linkify":"Scenario 3: Upgrade to the most current application update","nodes":[{"content":"Scenario 3: Upgrade to the most current application update","pos":[0,58]}]},{"content":"These steps apply to customers who are live on an earlier release and want to perform a full upgrade to the most recent platform and application versions.","pos":[10885,11039]},{"content":"Customers who have already deployed and configured a production environment might also fall into this category, even if they haven't gone live yet.","pos":[11040,11187]},{"content":"If you are not upgrading your application, but want to upgrade your platform to the latest bits, use Scenario 4 below, especially if you have no customizations of the platform models.","pos":[11188,11371]},{"pos":[11377,11394],"content":"Upgrade your code","linkify":"Upgrade your code","nodes":[{"content":"Upgrade your code","pos":[0,17]}]},{"content":"First, upgrade your code as described in Scenario 2.","pos":[11396,11448]},{"content":"This is a developer task and will happen on a developer environment.","pos":[11449,11517]},{"pos":[11523,11540],"content":"Upgrade your data","linkify":"Upgrade your data","nodes":[{"content":"Upgrade your data","pos":[0,17]}]},{"content":"Execute the data upgrade process on a copy of your target database – if your environment is already live in production then the target database is a copy of production; if your environment is not yet live, it will be your most current database.","pos":[11542,11786]},{"content":"This is a validation process performed by a developer (on a development or test environment) to ensure that the data upgrade completes successfully with the specific set of customizations within this environment – completion of this step helps ensure success in the sandbox and production environments later.","pos":[11787,12095]},{"content":"To copy your database back to a developer environment, follow the steps in <bpt id=\"p1\">[</bpt>Copy a Microsoft Dynamics 365 for Finance and Operations database from Azure SQL Database to a SQL Server environment<ept id=\"p1\">](../database/copy-database-from-azure-sql-to-sql-server.md)</ept>.","pos":[12096,12350],"source":" To copy your database back to a developer environment, follow the steps in [Copy a Microsoft Dynamics 365 for Finance and Operations database from Azure SQL Database to a SQL Server environment](../database/copy-database-from-azure-sql-to-sql-server.md)."},{"content":"To execute the data upgrade process, follow the steps in <bpt id=\"p1\">[</bpt>Process for data upgrade for development or demo environments<ept id=\"p1\">](upgrade-data-to-latest-update.md)</ept>.","pos":[12351,12506],"source":" To execute the data upgrade process, follow the steps in [Process for data upgrade for development or demo environments](upgrade-data-to-latest-update.md)."},{"pos":[12512,12544],"content":"Upgrade your sandbox environment","linkify":"Upgrade your sandbox environment","nodes":[{"content":"Upgrade your sandbox environment","pos":[0,32]}]},{"content":"You can make a request via LCS for the Microsoft Servicing Engineering (DSE) Team to run this process for you, when the following conditions are met:","pos":[12546,12695]},{"content":"You need to be live in production or have already deployed your production environment","pos":[12699,12785]},{"content":"DSE will perform the data upgrade in one Tier 2 or higher sandbox environment","pos":[12788,12865]},{"content":"DSE will perform the data upgrade in the production environment","pos":[12868,12931]},{"content":"To upgrade any additional Tier 2 or higher sandbox environments: you do not need to upgrade these.","pos":[12933,13031]},{"content":"Instead, delete them, redeploy, and then make a database refresh request to copy a database from a Tier 2 or higher environment that hase already been upgraded.","pos":[13032,13192]},{"content":"Alternatively you can upgrade them manually by following <bpt id=\"p1\">[</bpt>Process for Upgrading a Sandbox Environment<ept id=\"p1\">](upgrade-sandbox-environment.md)</ept> For upgrading any Tier 1 environments (also known as dev boxes or one-boxes).","pos":[13193,13405],"source":" Alternatively you can upgrade them manually by following [Process for Upgrading a Sandbox Environment](upgrade-sandbox-environment.md)\nFor upgrading any Tier 1 environments (also known as dev boxes or one-boxes)."},{"content":"You can deploy these with the new version and just sync to your upgraded VSTS branch.","pos":[13406,13491]},{"content":"To get data for the Tier 1 environments, a developer can upgrade the database following <bpt id=\"p1\">[</bpt>Upgrade data in develop, demo or sandbox environments<ept id=\"p1\">](upgrade-data-to-latest-update.md)</ept>","pos":[13492,13669],"source":" To get data for the Tier 1 environments, a developer can upgrade the database following [Upgrade data in develop, demo or sandbox environments](upgrade-data-to-latest-update.md)"},{"pos":[13677,13720],"content":"Use LCS to submit an upgrade request to DSE","linkify":"Use LCS to submit an upgrade request to DSE","nodes":[{"content":"Use LCS to submit an upgrade request to DSE","pos":[0,43]}]},{"content":"Go to the <bpt id=\"p1\">**</bpt>Environment details<ept id=\"p1\">**</ept> page for the environment that you want to upgrade, click <bpt id=\"p2\">**</bpt>Maintain<ept id=\"p2\">**</ept>, and then select <bpt id=\"p3\">**</bpt>Upgrade<ept id=\"p3\">**</ept>.","pos":[13724,13857],"source":"Go to the **Environment details** page for the environment that you want to upgrade, click **Maintain**, and then select **Upgrade**."},{"content":"A window will display where you can enter the upgrade request.","pos":[13858,13920]},{"content":"<ph id=\"ph1\">![</ph>Upgrade request<ph id=\"ph2\">](./media/UpgradeMaintainButton.PNG)</ph>","pos":[13921,13974],"source":"![Upgrade request](./media/UpgradeMaintainButton.PNG)"},{"content":"You must submit your upgrade request 5 working days before you expect to upgrade, to help ensure that the upgrade can be performed within your expected timeframe.","pos":[13978,14140]},{"content":"The advanced notice is required to prepare a new environment in the background.","pos":[14141,14220]},{"content":"When downtime starts, this new environment will be swapped with the existing environment.","pos":[14221,14310]},{"content":"You will not be able to see the new environment, it's a background mechanism.","pos":[14311,14388]},{"content":"You must allow at least 8 hours between the downtime start and downtime end times.","pos":[14392,14474]},{"content":"This time is required to perform the swap in of the new environment and the data upgrade process.","pos":[14475,14572]},{"content":"If you have custom code or X++ hotfixes that must be part of your upgraded environment, you must select Application deployable packages during your upgrade request.","pos":[14576,14740]},{"content":"Select the deployable packages that contain your upgraded custom code and the X++ hotfixes that were created on your development or build environment during the code upgrade process.","pos":[14741,14923]},{"content":"If you do not select your application deployable packages in the service request, your service request may be rejected by DSE.","pos":[14947,15073]},{"content":"If an error causes the upgrade process to stop, DSE will roll the environment back to its original state.","pos":[15079,15184]},{"content":"The issue that caused the failure can then be resolved, and the upgrade can be rescheduled at a new time.","pos":[15185,15290]},{"content":"A minimum 16 hour downtime is required if you are using Retail features, because additional upgrade steps are needed.","pos":[15296,15413]},{"content":"Upgrade request","pos":[15418,15433]},{"pos":[15472,15505],"content":"Validate your sandbox environment","linkify":"Validate your sandbox environment","nodes":[{"content":"Validate your sandbox environment","pos":[0,33]}]},{"content":"The updated environment will have the same URL, same environment name, and same machine names as the former environment.","pos":[15508,15628]},{"content":"When validation is completed successfully, notify the DSE team using an LCS ticket and the DSE team will retire your old environment.","pos":[15631,15764]},{"pos":[15770,15805],"content":"Upgrade your production environment","linkify":"Upgrade your production environment","nodes":[{"content":"Upgrade your production environment","pos":[0,35]}]},{"content":"Use LCS to submit an Upgrade request to update the production environment in exactly the same way as you did for the sandbox environment in the previous step.","pos":[15811,15969]},{"content":"Validate.","pos":[15974,15983]},{"content":"When validation is completed successfully, notify the DSE team using an LCS ticket and the DSE team will retire your old environment.","pos":[15988,16121]},{"pos":[16126,16179],"content":"Scenario 4: Upgrade to the most current platform only","linkify":"Scenario 4: Upgrade to the most current platform only","nodes":[{"content":"Scenario 4: Upgrade to the most current platform only","pos":[0,53]}]},{"content":"If you're running an environment that doesn't contain any customization of the platform AOT models (Application Platform, Application Foundation, Directory and Test Essentials), you can do an in-place update of your platform, without upgrading to a new environment.","pos":[16180,16445]},{"content":"For more information about this process, see <bpt id=\"p1\">[</bpt>Upgrade Finance and Operations to the latest platform update<ept id=\"p1\">](upgrade-latest-platform-update.md)</ept>.","pos":[16446,16589],"source":" For more information about this process, see [Upgrade Finance and Operations to the latest platform update](upgrade-latest-platform-update.md)."},{"content":"If you only upgrade your platform, there is no need to do code upgrade (Scenario 2 above) or run data upgrade scripts.","pos":[16590,16708]}]}