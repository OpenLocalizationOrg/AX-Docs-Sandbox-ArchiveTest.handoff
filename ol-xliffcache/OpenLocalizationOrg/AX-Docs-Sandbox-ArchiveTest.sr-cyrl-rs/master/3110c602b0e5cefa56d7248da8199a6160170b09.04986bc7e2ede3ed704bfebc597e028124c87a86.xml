{"content":"---\n# required metadata\n\ntitle: Service electronic fiscal document for Brazil\ndescription: This topic provides an overview of the service electronic fiscal document.\nauthor: sndray\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-applications\nms.technology: \n\n# optional metadata\n\nms.search.form: BrazilParameters, ConfDefGroups_BR, ConfDefGroupWizard_BR, ConfDefLayout_BR, ConfExportDialog_BR, FiscalDocumentType_BR, RPSExport_BR, RPSImport_BR, TaxServiceCode_BR\n# ROBOTS: \naudience: Application User\n# ms.devlang: \nms.reviewer: shylaw\nms.search.scope: Core, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 269984\nms.assetid: 46e40a3a-784f-4a1e-b185-c4b8ad63518f\nms.search.region: Brazil\n# ms.search.industry: \nms.author: sndray\nms.search.validFrom: 2016-11-30\nms.dyn365.ops.version: Version 1611\n\n---\n\n# Electronic fiscal document for services\n\n[!include[banner](../includes/banner.md)]\n\n\nThis topic provides an overview of the service electronic fiscal document.\n\nWhen a fiscal document is about service in Brazil, different rules apply than a regular electronic fiscal document. The model for a services fiscal document in Brazil is SE and includes ISS, PIS, and COFINS taxes.\n[![Service fiscal document](./media/ServiceFiscalDocument.png)](./media/ServiceFiscalDocument.png) \n\n## Recibo Provisorio de Servicos (RPS) document\nWhen a company issues a service fiscal document, depending on the city where the invoice was issued, some rules and formats may apply. For example, in Sao Paulo city, the service fiscal document is issued as a temporary service invoice or RPS. That document becomes an official service electronic fiscal document when it is approved by the city tax authority. After it is approved, the company issues an official service electronic fiscal document.\n\n## RPS file\nAll cities in Brazil have their own service communication (integration) and format layout. There is not a standardized method of communication and format. For this reason, the current Brazilian localization uses an example of the layout of Sao Paulo city. To generate a RPS file, generate the following files:\n\n-   An outgoing file that includes one or more service fiscal documents with an Open status (RPS).\n-   An incoming file where the original file is returned but includes the official invoice number assigned by the city tax authority.\n\n### RPS with configurator\n\nThe Configurator tool manages the method of payment file formats for electronic payments and electronic fiscal documents for services. To set up the Configurator, follow these steps:\n\n-   Create configurator definition groups and layout groups for the file formats.\n-   Export or import the layout groups.\n-   Export data from definition groups or layout groups by using the Configurator export utility.\n\nYou can create a definition group by defining the tables and fields that are used to configure the layout for the export or import process. You can then create a layout group that defines the file structure used to import or export data. A definition group must be attached to a layout group. The Configurator can be used to generate outgoing and incoming files that update the existing service fiscal document.\n\n### RPS with electronic reporting\n\nAn RPS outgoing file can be generated by using electronic reporting, where each .txt file format is defined by using an specific model and format designer for electronic reporting. These configurations can be imported into the current company to generate XML files on the **Repositories** page. You can also import these configurations from Lifecycle Services (LCS) under the **Shared asset library** and **Asset type** = **GER Configurations**. The following repository models and formats must be uploaded:\n\n-   Services fiscal document model (model configuration)\n-   RPS Sao Paulo V.002 (BR) (format configuration)\n\nAfter the repository is available, on the **Brazilian parameters** page, in **Electronic reporting**, select **Type =** **NFeServices**. The model details represent the set of services for fiscal document transactions. On the **Fiscal documents type** page, you can identify the format file. Select the **Electronic fiscal document for services** option, and in the **Export format mapping** field, select **ER configuration format** . **Note**: This configuration applies when an outgoing RPS file needs to be generated. You can use the existing model and create another format to fulfill the requirements from other cities not supported in the current Brazilian localization.\n\n## Prerequisites\n#### Service code configuration\n\nOn the **Service code** page, you can configure the related service code required for the majority city tax authority. A service code is mandatory when a fiscal document type that has model = **SE** is posted. In addition, you can configure a specific service code per country/region, state, and city because classification can be different in cities.\n\n#### Services on delivery address\n\nYou may need to consider the delivery address for the correct service taxation instead of the default address. In those cases, on the **Sales Order** page, under the **Fiscal Information** group, in the **Service code on delivery address** field, enter the delivery address.\n\n## Export and import RPS files\nOn the **RPS export and import** page, you can generate outgoing and incoming RPS files. You create the file to send to the fiscal authority to process all emitted RPS documents to become valid electronic services fiscal documents. After processing, you get a file to import. After the file is imported, the original documents are updated to reflect the correct status of all RPS and electronic services fiscal documents.\n\n#### Export\n\nOn the **Export RPS file** page, enter the following information.\n\n-   **From date** - Enter the start date of the period for which the RPS files will be exported.\n-   **To date** - Enter the end date of the period for which the RPS files will be exported.\n-   **From customer** - Select the first customer account number in the range of customer accounts to include.\n-   **To customer** - Select the last customer account number in the range of customer accounts to include.\n-   **From RPS** - Enter the first invoice number in the range of invoices.\n-   **To RPS** - Enter the last invoice number in the range of invoices.\n-   **Fiscal establishment ID** - Select the identifier of the fiscal establishment.\n-   **Fiscal document type** - Select the type of fiscal document.\n-   Select the **Include previously exported RPS** option to include an RPS file that was already processed.\n-   Click **OK** to export the RPS file.\n\nWhen you export an RPS file, a text file is generated based on the export file layout group that is selected in the **Export file layout group** field or the **Export format mapping** field on the **Fiscal document types** page for the selected fiscal document type.\n\n#### Import\n\nOn the **Import RPS file** page, enter the following information:\n\n-   **Fiscal establishment ID** - Select the fiscal establishment to import the electronic fiscal document for services for.\n-   **Fiscal document type** - Select the fiscal document type for the electronic fiscal document for services.\n\nWhen you import an electronic fiscal document for services, information about the electronic fiscal document for services, such as the RPS import date, fiscal document number, fiscal document date, and validation number, is updated based on the return file layout group that is specified in the **Return file layout group** field on the **Fiscal document types** page.\n\n\n\n","nodes":[{"pos":[4,847],"embed":true,"restype":"x-metadata","content":"# required metadata\n\ntitle: Service electronic fiscal document for Brazil\ndescription: This topic provides an overview of the service electronic fiscal document.\nauthor: sndray\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-applications\nms.technology: \n\n# optional metadata\n\nms.search.form: BrazilParameters, ConfDefGroups_BR, ConfDefGroupWizard_BR, ConfDefLayout_BR, ConfExportDialog_BR, FiscalDocumentType_BR, RPSExport_BR, RPSImport_BR, TaxServiceCode_BR\n# ROBOTS: \naudience: Application User\n# ms.devlang: \nms.reviewer: shylaw\nms.search.scope: Core, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 269984\nms.assetid: 46e40a3a-784f-4a1e-b185-c4b8ad63518f\nms.search.region: Brazil\n# ms.search.industry: \nms.author: sndray\nms.search.validFrom: 2016-11-30\nms.dyn365.ops.version: Version 1611\n","nodes":[{"content":"Service electronic fiscal document for Brazil","nodes":[{"pos":[0,45],"content":"Service electronic fiscal document for Brazil","nodes":[{"content":"Service electronic fiscal document for Brazil","pos":[0,45]}]}],"path":["title"],"extradata":"MT"},{"content":"This topic provides an overview of the service electronic fiscal document.","nodes":[{"pos":[0,74],"content":"This topic provides an overview of the service electronic fiscal document.","nodes":[{"content":"This topic provides an overview of the service electronic fiscal document.","pos":[0,74]}]}],"path":["description"],"extradata":"MT"}],"header":"# required metadata\n","yml":true},{"pos":[855,894],"content":"Electronic fiscal document for services","linkify":"Electronic fiscal document for services","nodes":[{"content":"Electronic fiscal document for services","pos":[0,39]}]},{"content":"This topic provides an overview of the service electronic fiscal document.","pos":[940,1014]},{"content":"When a fiscal document is about service in Brazil, different rules apply than a regular electronic fiscal document.","pos":[1016,1131]},{"content":"The model for a services fiscal document in Brazil is SE and includes ISS, PIS, and COFINS taxes.","pos":[1132,1229]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Service fiscal document<ept id=\"p1\">](./media/ServiceFiscalDocument.png)](./media/ServiceFiscalDocument.png)</ept>","pos":[1230,1328],"source":"[![Service fiscal document](./media/ServiceFiscalDocument.png)](./media/ServiceFiscalDocument.png)"},{"pos":[1334,1378],"content":"Recibo Provisorio de Servicos (RPS) document","linkify":"Recibo Provisorio de Servicos (RPS) document","nodes":[{"content":"Recibo Provisorio de Servicos (RPS) document","pos":[0,44]}]},{"content":"When a company issues a service fiscal document, depending on the city where the invoice was issued, some rules and formats may apply.","pos":[1379,1513]},{"content":"For example, in Sao Paulo city, the service fiscal document is issued as a temporary service invoice or RPS.","pos":[1514,1622]},{"content":"That document becomes an official service electronic fiscal document when it is approved by the city tax authority.","pos":[1623,1738]},{"content":"After it is approved, the company issues an official service electronic fiscal document.","pos":[1739,1827]},{"pos":[1832,1840],"content":"RPS file","linkify":"RPS file","nodes":[{"content":"RPS file","pos":[0,8]}]},{"content":"All cities in Brazil have their own service communication (integration) and format layout.","pos":[1841,1931]},{"content":"There is not a standardized method of communication and format.","pos":[1932,1995]},{"content":"For this reason, the current Brazilian localization uses an example of the layout of Sao Paulo city.","pos":[1996,2096]},{"content":"To generate a RPS file, generate the following files:","pos":[2097,2150]},{"content":"An outgoing file that includes one or more service fiscal documents with an Open status (RPS).","pos":[2156,2250]},{"content":"An incoming file where the original file is returned but includes the official invoice number assigned by the city tax authority.","pos":[2255,2384]},{"pos":[2390,2411],"content":"RPS with configurator","linkify":"RPS with configurator","nodes":[{"content":"RPS with configurator","pos":[0,21]}]},{"content":"The Configurator tool manages the method of payment file formats for electronic payments and electronic fiscal documents for services.","pos":[2413,2547]},{"content":"To set up the Configurator, follow these steps:","pos":[2548,2595]},{"content":"Create configurator definition groups and layout groups for the file formats.","pos":[2601,2678]},{"content":"Export or import the layout groups.","pos":[2683,2718]},{"content":"Export data from definition groups or layout groups by using the Configurator export utility.","pos":[2723,2816]},{"content":"You can create a definition group by defining the tables and fields that are used to configure the layout for the export or import process.","pos":[2818,2957]},{"content":"You can then create a layout group that defines the file structure used to import or export data.","pos":[2958,3055]},{"content":"A definition group must be attached to a layout group.","pos":[3056,3110]},{"content":"The Configurator can be used to generate outgoing and incoming files that update the existing service fiscal document.","pos":[3111,3229]},{"pos":[3235,3264],"content":"RPS with electronic reporting","linkify":"RPS with electronic reporting","nodes":[{"content":"RPS with electronic reporting","pos":[0,29]}]},{"content":"An RPS outgoing file can be generated by using electronic reporting, where each .txt file format is defined by using an specific model and format designer for electronic reporting.","pos":[3266,3446]},{"content":"These configurations can be imported into the current company to generate XML files on the <bpt id=\"p1\">**</bpt>Repositories<ept id=\"p1\">**</ept> page.","pos":[3447,3560],"source":" These configurations can be imported into the current company to generate XML files on the **Repositories** page."},{"content":"You can also import these configurations from Lifecycle Services (LCS) under the <bpt id=\"p1\">**</bpt>Shared asset library<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Asset type<ept id=\"p2\">**</ept><ph id=\"ph1\"> = </ph><bpt id=\"p3\">**</bpt>GER Configurations<ept id=\"p3\">**</ept>.","pos":[3561,3711],"source":" You can also import these configurations from Lifecycle Services (LCS) under the **Shared asset library** and **Asset type** = **GER Configurations**."},{"content":"The following repository models and formats must be uploaded:","pos":[3712,3773]},{"content":"Services fiscal document model (model configuration)","pos":[3779,3831]},{"content":"RPS Sao Paulo V.002 (BR) (format configuration)","pos":[3836,3883]},{"content":"After the repository is available, on the <bpt id=\"p1\">**</bpt>Brazilian parameters<ept id=\"p1\">**</ept> page, in <bpt id=\"p2\">**</bpt>Electronic reporting<ept id=\"p2\">**</ept>, select <bpt id=\"p3\">**</bpt>Type =<ept id=\"p3\">**</ept> <bpt id=\"p4\">**</bpt>NFeServices<ept id=\"p4\">**</ept>.","pos":[3885,4021],"source":"After the repository is available, on the **Brazilian parameters** page, in **Electronic reporting**, select **Type =** **NFeServices**."},{"content":"The model details represent the set of services for fiscal document transactions.","pos":[4022,4103]},{"content":"On the <bpt id=\"p1\">**</bpt>Fiscal documents type<ept id=\"p1\">**</ept> page, you can identify the format file.","pos":[4104,4176],"source":" On the **Fiscal documents type** page, you can identify the format file."},{"content":"Select the <bpt id=\"p1\">**</bpt>Electronic fiscal document for services<ept id=\"p1\">**</ept> option, and in the <bpt id=\"p2\">**</bpt>Export format mapping<ept id=\"p2\">**</ept> field, select <bpt id=\"p3\">**</bpt>ER configuration format<ept id=\"p3\">**</ept> .","pos":[4177,4320],"source":" Select the **Electronic fiscal document for services** option, and in the **Export format mapping** field, select **ER configuration format** ."},{"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>: This configuration applies when an outgoing RPS file needs to be generated.","pos":[4321,4406],"source":"**Note**: This configuration applies when an outgoing RPS file needs to be generated."},{"content":"You can use the existing model and create another format to fulfill the requirements from other cities not supported in the current Brazilian localization.","pos":[4407,4562]},{"pos":[4567,4580],"content":"Prerequisites","linkify":"Prerequisites","nodes":[{"content":"Prerequisites","pos":[0,13]}]},{"pos":[4586,4612],"content":"Service code configuration","linkify":"Service code configuration","nodes":[{"content":"Service code configuration","pos":[0,26]}]},{"content":"On the <bpt id=\"p1\">**</bpt>Service code<ept id=\"p1\">**</ept> page, you can configure the related service code required for the majority city tax authority.","pos":[4614,4732],"source":"On the **Service code** page, you can configure the related service code required for the majority city tax authority."},{"content":"A service code is mandatory when a fiscal document type that has model = <bpt id=\"p1\">**</bpt>SE<ept id=\"p1\">**</ept> is posted.","pos":[4733,4823],"source":" A service code is mandatory when a fiscal document type that has model = **SE** is posted."},{"content":"In addition, you can configure a specific service code per country/region, state, and city because classification can be different in cities.","pos":[4824,4965]},{"pos":[4972,5000],"content":"Services on delivery address","linkify":"Services on delivery address","nodes":[{"content":"Services on delivery address","pos":[0,28]}]},{"content":"You may need to consider the delivery address for the correct service taxation instead of the default address.","pos":[5002,5112]},{"content":"In those cases, on the <bpt id=\"p1\">**</bpt>Sales Order<ept id=\"p1\">**</ept> page, under the <bpt id=\"p2\">**</bpt>Fiscal Information<ept id=\"p2\">**</ept> group, in the <bpt id=\"p3\">**</bpt>Service code on delivery address<ept id=\"p3\">**</ept> field, enter the delivery address.","pos":[5113,5276],"source":" In those cases, on the **Sales Order** page, under the **Fiscal Information** group, in the **Service code on delivery address** field, enter the delivery address."},{"pos":[5281,5308],"content":"Export and import RPS files","linkify":"Export and import RPS files","nodes":[{"content":"Export and import RPS files","pos":[0,27]}]},{"content":"On the <bpt id=\"p1\">**</bpt>RPS export and import<ept id=\"p1\">**</ept> page, you can generate outgoing and incoming RPS files.","pos":[5309,5397],"source":"On the **RPS export and import** page, you can generate outgoing and incoming RPS files."},{"content":"You create the file to send to the fiscal authority to process all emitted RPS documents to become valid electronic services fiscal documents.","pos":[5398,5540]},{"content":"After processing, you get a file to import.","pos":[5541,5584]},{"content":"After the file is imported, the original documents are updated to reflect the correct status of all RPS and electronic services fiscal documents.","pos":[5585,5730]},{"pos":[5737,5743],"content":"Export","linkify":"Export","nodes":[{"content":"Export","pos":[0,6]}]},{"pos":[5745,5810],"content":"On the <bpt id=\"p1\">**</bpt>Export RPS file<ept id=\"p1\">**</ept> page, enter the following information.","source":"On the **Export RPS file** page, enter the following information."},{"pos":[5816,5908],"content":"<bpt id=\"p1\">**</bpt>From date<ept id=\"p1\">**</ept> - Enter the start date of the period for which the RPS files will be exported.","source":"**From date** - Enter the start date of the period for which the RPS files will be exported."},{"pos":[5913,6001],"content":"<bpt id=\"p1\">**</bpt>To date<ept id=\"p1\">**</ept> - Enter the end date of the period for which the RPS files will be exported.","source":"**To date** - Enter the end date of the period for which the RPS files will be exported."},{"pos":[6006,6112],"content":"<bpt id=\"p1\">**</bpt>From customer<ept id=\"p1\">**</ept> - Select the first customer account number in the range of customer accounts to include.","source":"**From customer** - Select the first customer account number in the range of customer accounts to include."},{"pos":[6117,6220],"content":"<bpt id=\"p1\">**</bpt>To customer<ept id=\"p1\">**</ept> - Select the last customer account number in the range of customer accounts to include.","source":"**To customer** - Select the last customer account number in the range of customer accounts to include."},{"pos":[6225,6296],"content":"<bpt id=\"p1\">**</bpt>From RPS<ept id=\"p1\">**</ept> - Enter the first invoice number in the range of invoices.","source":"**From RPS** - Enter the first invoice number in the range of invoices."},{"pos":[6301,6369],"content":"<bpt id=\"p1\">**</bpt>To RPS<ept id=\"p1\">**</ept> - Enter the last invoice number in the range of invoices.","source":"**To RPS** - Enter the last invoice number in the range of invoices."},{"pos":[6374,6454],"content":"<bpt id=\"p1\">**</bpt>Fiscal establishment ID<ept id=\"p1\">**</ept> - Select the identifier of the fiscal establishment.","source":"**Fiscal establishment ID** - Select the identifier of the fiscal establishment."},{"pos":[6459,6521],"content":"<bpt id=\"p1\">**</bpt>Fiscal document type<ept id=\"p1\">**</ept> - Select the type of fiscal document.","source":"**Fiscal document type** - Select the type of fiscal document."},{"pos":[6526,6630],"content":"Select the <bpt id=\"p1\">**</bpt>Include previously exported RPS<ept id=\"p1\">**</ept> option to include an RPS file that was already processed.","source":"Select the **Include previously exported RPS** option to include an RPS file that was already processed."},{"pos":[6635,6671],"content":"Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to export the RPS file.","source":"Click **OK** to export the RPS file."},{"pos":[6673,6939],"content":"When you export an RPS file, a text file is generated based on the export file layout group that is selected in the <bpt id=\"p1\">**</bpt>Export file layout group<ept id=\"p1\">**</ept> field or the <bpt id=\"p2\">**</bpt>Export format mapping<ept id=\"p2\">**</ept> field on the <bpt id=\"p3\">**</bpt>Fiscal document types<ept id=\"p3\">**</ept> page for the selected fiscal document type.","source":"When you export an RPS file, a text file is generated based on the export file layout group that is selected in the **Export file layout group** field or the **Export format mapping** field on the **Fiscal document types** page for the selected fiscal document type."},{"pos":[6946,6952],"content":"Import","linkify":"Import","nodes":[{"content":"Import","pos":[0,6]}]},{"pos":[6954,7019],"content":"On the <bpt id=\"p1\">**</bpt>Import RPS file<ept id=\"p1\">**</ept> page, enter the following information:","source":"On the **Import RPS file** page, enter the following information:"},{"pos":[7025,7145],"content":"<bpt id=\"p1\">**</bpt>Fiscal establishment ID<ept id=\"p1\">**</ept> - Select the fiscal establishment to import the electronic fiscal document for services for.","source":"**Fiscal establishment ID** - Select the fiscal establishment to import the electronic fiscal document for services for."},{"pos":[7150,7257],"content":"<bpt id=\"p1\">**</bpt>Fiscal document type<ept id=\"p1\">**</ept> - Select the fiscal document type for the electronic fiscal document for services.","source":"**Fiscal document type** - Select the fiscal document type for the electronic fiscal document for services."},{"pos":[7259,7627],"content":"When you import an electronic fiscal document for services, information about the electronic fiscal document for services, such as the RPS import date, fiscal document number, fiscal document date, and validation number, is updated based on the return file layout group that is specified in the <bpt id=\"p1\">**</bpt>Return file layout group<ept id=\"p1\">**</ept> field on the <bpt id=\"p2\">**</bpt>Fiscal document types<ept id=\"p2\">**</ept> page.","source":"When you import an electronic fiscal document for services, information about the electronic fiscal document for services, such as the RPS import date, fiscal document number, fiscal document date, and validation number, is updated based on the return file layout group that is specified in the **Return file layout group** field on the **Fiscal document types** page."}]}