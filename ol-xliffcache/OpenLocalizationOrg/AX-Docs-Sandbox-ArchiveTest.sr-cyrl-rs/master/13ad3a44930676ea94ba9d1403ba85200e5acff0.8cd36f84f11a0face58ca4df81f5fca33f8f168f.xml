{"content":"---\n# required metadata\n\ntitle: Apply a deployable package to a Finance and Operations environment\ndescription: This topic explains how to use Lifecycle Services (LCS) to apply a binary update or an application (AOT) deployable package to a Finance and Operations environment.\nauthor: manalidongre\nmanager: AnnBe\nms.date: 05/31/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \nms.reviewer: kfend\nms.search.scope: Operations, Platform, UnifiedOperations, AX Platform\n# ms.tgt_pltfrm: \nms.custom: 107013\nms.assetid: 341a229f-d9c3-4678-b353-d08d5b2c1caf\nms.search.region: Global\n# ms.search.industry: \nms.author: manado\nms.search.validFrom: 2016-05-31\nms.dyn365.ops.version: Platform update 1\n\n---\n\n# Apply a deployable package to a Finance and Operations environment\n\n[!include[banner](../includes/banner.md)]\n\n**Note:** Package application causes system downtime. All relevant services will be stopped, and you won't be able to use your environments while the package is being applied. You should plan accordingly.\n\n## Supported environments\n\nThe following topologies support package deployment that uses automated flows in Microsoft Dynamics Lifecycle Services (LCS):\n\n- **LCS Implementation Project** – All environments are supported, but there are some limitations for build environments. The build environments that actually have a build server installed will only show Platform updates; application deployable packages would still need to be installed manually if you are using a build server as a development machine. Automated package application is self-serve in all environments except production environments. For production environments, customers must use LCS to submit a request to the Service Engineering team to apply packages.\n- **LCS Partner Projects** – Developer only environments (where build servers = 0) and demo environments are supported.\n- **Trial Projects** – Demo environments are supported.\n\nFor other topologies (below), you must use Remote Desktop Protocol (RDP) to connect to the environment and install from the command line. For information about manual package deployment, see [Install  a deployable package](install-deployable-package.md).\n\n- Local development environments (Downloadable virtual hard disk [VHD])\n- Development/test environments in Microsoft Azure (Partner and trial projects)\n- Build environments in an LCS Implementation project\n\n## Key concepts\n\n- **Deployable package** – A deployable package is a unit of deployment that can be applied in any Microsoft Dynamics 365 for Finance and Operations environment. A deployable package can be a binary update to the platform or other runtime components, an updated Finance and Operations application (AOT) package, or a new Finance and Operations application (AOT) package.\n\n    [![Example of a deployable package](./media/applypackage_deployablepackage.jpg)](./media/applypackage_deployablepackage.jpg)\n- **Runbook** – The deployment runbook is a series of steps that are generated in order to apply the deployable package to the target environment. Some steps are automated, and some steps are manual. AXUpdateInstaller lets you run these steps one at a time and in the correct order.\n\n    [![Example of a deployment runbook](./media/applypackage_runbook-1024x528.jpg)](./media/applypackage_runbook.jpg)\n- **AXUpdateInstaller** – When you create a customization package from Microsoft Visual Studio or a Microsoft binary update, the installer executable is bundled together with the deployable package. The installer generates the runbook for the specified topology. The installer can also run steps in order, according to the runbook for a specific topology.\n\n## Supported package types\n\n- **AOT deployable package** – A deployable package that is generated from application metadata and source code. This deployable package is created in a development or build environment.\n- **Binary update package** – A deployable package that contains dynamic-link libraries (DLLs) and other binaries and metadata that the platform and application depend on. This is a package released by Microsoft.\n- **Combined Retail deployable package** – A combination of various Retail packages that are generated after the Retail code is combined.\n- **Merged package** – A package that is created by combining one package of each type. For example, one binary update package, one AOT package, and one Retail package can be combined. The packages are merged in the Asset library for the project in LCS.\n\n## Prerequisite steps\n\n- **Make sure that the package that should be applied is valid.** When a package is uploaded to the Asset library, it isn't analyzed. If you select the package, the package status appears in the right pane as **Not Validated**. A package must pass validation before it can be applied in an environment by using the following procedures. The status of the package will be updated in the Asset library to indicate whether the package is valid. We require validation to help guarantee that production environments aren't affected by packages that don't meet the guidelines.\n\n    There are three types of validations:\n\n    - Basic package format validations\n    - Platform version checks\n    - Types of packages\n\n- **If you're updating a build environment**, see [Prerequisite steps for build environments](#prerequisite-steps-for-build-environments).\n- **Make sure that the package is applied in a sandbox environment before it's applied in the production environment.** To help guarantee that the production environment is always in a good state, we want to make sure that the package is tested in a sandbox environment before it's applied in the production environment. Therefore, before you request that the package be applied in your production environment, make sure that it has been applied in your sandbox environment by using the automated flows.\n- **If you want to apply multiple packages, create a merged package that can be applied first in a sandbox environment and then in the production environment.** Application of a single package in an average environment requires about 5 hours of downtime. To avoid additional hours of downtime when you must apply multiple packages, you can create a single combined package that contains one package of each type. If you select a binary package and an application deployable package in the Asset library, a **Merge** button becomes available on the toolbar. By clicking this button, you can merge the two packages into a single package and therefore reduce the total downtime by half.\n\n## Apply a package to a non-production environment by using LCS\n\n**Note:** Package application causes system downtime. All relevant services will be stopped, and you won't be able to use your environments while the package is being applied.\n\nBefore you begin, verify that the deployable package has been uploaded to the Asset library in LCS.\n\n1. For a binary update, upload the package directly to the Asset library. For information about how to download an update from LCS, see [Download hotfixes from Lifecycle Services](../migration-upgrade/download-hotfix-lcs.md).\n\n    For an application (AOT) deployable package that results from an X++ hotfix, or from application customizations and extensions, create the deployable package in your development or build environment, and then upload it to the Asset library.\n2. Open the **Environment details** view for the environment where you want to apply the package.\n3. Click **Maintain** &gt; **Apply updates** to apply an update.\n4. Select the package to apply. Use the filter at the top to find your package.\n5. Click **Apply**. Notice that the status in the upper right of the **Environment details** view changes to **Queued**, and that an **Environment updates** section now shows the progress of the package.\n\n    [![Queued status](./media/parallelexecutionsandbox_queuedstate.jpg)](./media/parallelexecutionsandbox_queuedstate.jpg)\n6. Refresh the page to see the progress of package application. Notice that the servicing status is **In Progress**, and that the environment status is **Servicing**.\n\n    [![Servicing status](./media/parallelexecutionsandbox_servicingstate.png)](./media/parallelexecutionsandbox_servicingstate.png)\n7. Continue to refresh the page to see the status updates for the package application request. When the package has been applied, the environment status changes to **Deployed**, and the servicing status changes to **Completed**.\n\n    [![Deployed status](./media/parallelexecutionsandbox_signedoffstate.png)](./media/parallelexecutionsandbox_signedoffstate.png)\n8. To sign off on package application, click **Sign off** if there are no issues. If issues occurred when you applied the package, click **Sign off with issues**.\n\n### Prerequisite steps for build environments\n\nIf a build virtual machine (VM) has already been used for one or more builds, before you apply a binary update to the VM, you should use RDP to connect to the VM and restore the metadata packages folder from the metadata backup folder. You should then delete the metadata backup. These steps help guarantee that a platform update will be applied in a clean environment. The next build process will then detect that no metadata backup exists, and a new metadata backup will be created automatically. This new metadata backup will include the updated platform. \n\nTo determine whether a complete metadata backup exists, look for a BackupComplete.txt file in I:\\\\DynamicsBackup\\\\Packages (or C:\\\\DynamicsBackup\\\\Packages on a downloadable VHD). If this file is present, a metadata backup exists. The file will contain a timestamp that indicates when it was created. To restore the deployment's metadata packages folder from the metadata backup, open an elevated Microsoft Windows PowerShell **Command Prompt** window, and run the following command. This command runs the same script that is used in the first step of the build process.\n\n    if (Test-Path -Path \"I:\\DynamicsBackup\\Packages\\BackupComplete.txt\") { C:\\DynamicsSDK\\PrepareForBuild.ps1 }\n\n**Note:** Run the preceding command only if a complete metadata backup exists. If a complete metadata backup doesn't exist, the command will create a new backup. This command will stop the Finance and Operations deployment services and Internet Information Services (IIS) before it restores the files from the metadata backup to the deployment's metadata packages folder. You should see output that resembles the following example.\n\n*6:17:52 PM: Preparing build environment...* *6:17:53 PM: Updating Dynamics SDK registry key with specified values...* *6:17:53 PM: Updating Dynamics SDK registry key with values from AOS web config...* *6:17:53 PM: Stopping Finance and Operations deployment...* *6:18:06 PM: **A backup already exists at: I:\\\\DynamicsBackup\\\\Packages. No new backup will be created**.* *6:18:06 PM: **Restoring metadata packages from backup...*** *6:22:56 PM: **Metadata packages successfully restored from backup**.* *6:22:57 PM: Preparing build environment complete.* *6:22:57 PM: Script completed with exit code: 0*\n\nAfter the metadata backup has been restored, delete (or rename) the metadata backup folder (DynamicsBackup\\\\Packages), so that the build process will no longer find it.\n\n### Troubleshooting\n\n#### General troubleshooting/diagnostics\n\nIf package application isn't successful, you can download either the logs or the runbook to see the detailed logs. You can also use RDP to connect to an environment so that you can fix issues. If you must report the issue to Microsoft, be sure to include the activity ID that is reported in the **Environment updates** section.\n\n![Download log and Download runbook buttons](./media/applypackage_sandbox_10.png)\n\n![Troubleshooting](./media/parallelexecutionsandbox_troubleshooting.jpg)\n\n#### Using the logs\n\n1. Download the logs.\n2. Unzip the log files.\n3. Select the role that a step failed for, such as **AOS** or **BI**.\n4. Select the VM where the step failed. This information appears in the **Machine name** column in the **Environment updates** section.\n5. In the logs for the VM, select the folder that corresponds to the step where the issue occurred. The folder name identifies the step that each folder corresponds to. For example, if the issue occurred in the executing a step, select the **ExecuteRunbook\\*** folder.\n\nFor example, if the folder name is ExecuteRunbook-b0c5c413-dae3-4a7a-a0c4-d558614f7e98-1\\_I0\\_R0, the step number is highlighted and is the number after the globally unique identifier (GUID).\n\n#### Package failure\n\nIf package application isn't successful, you have two options:\n\n- Click **Resume** to retry the operation that failed.\n\n    ![Failed status](./media/parallelexecutionsandbox_failedstate.jpg)\n- Click **Abort** to stop package application.\n\n    **Note:** If you click **Abort**, you don't roll back the changes that have already been made to your environment. To proceed, you must fix the issue.\n    \n    [![Message box that appears when you abort package application](./media/applypackage_sandbox_13-1024x274.png)](./media/applypackage_sandbox_13.png)\n\n## Apply a package to a production environment by using LCS\n\nIn a production environment, unlike in a sandbox environment or other types of environments, package application through LCS isn't self-serve. Customers and partners must submit a request to the Service Engineering team to apply a package when the customer is ready for the downtime. \n\n1. Download an update from LCS. For information about how to download an update from LCS, see [Download hotfixes from Lifecycle Services](../migration-upgrade/download-hotfix-lcs.md).\n\n    - For a binary update, upload the update deployable package directly to the Asset library.\n    - For an application/X++ hotfix, apply the package in a development environment. After you resolve any conflicts, generate a deployable package from Visual Studio, and upload the package to the Asset library. For information about how to upload to the Asset library and create a deployable package, see [Create and apply a deployable package](create-apply-deployable-package.md).\n\n2. On the **Asset library** page in LCS, on the tab that corresponds to the asset type (**Software deployable package**), select a package, and then click **Release candidate**.\n3. Apply the package in a sandbox environment by using the instructions earlier in this topic.\n4. After the package is successfully applied and signed off in the sandbox environment, open the Asset Library, and mark the package as **Release Candidate**.\n5. Open the **Environment details** view for the production environment where you want to apply the package.\n6. Click **Maintain** &gt; **Apply updates** to apply the package.\n7. Select the type of package to apply.\n8. Select the package to apply in your production environment, and then click **Schedule** to submit a request to the Service Engineering team to apply it.\n\n    **Note:** The list of packages includes only the packages that have been successfully signed off in the sandbox environment, and that have been marked as release candidates.\n9. Specify the date and time to schedule package application for, click **Submit**, and then click **OK** to confirm. Note that your environments will be down and unavailable to perform business while the package is being applied.\n10. Refresh the page. Two fields on the page indicate the status of the request.\n\n    - **Request status** – This field indicates the status of the request that you submitted to Microsoft.\n    - **Actionable by** – This field indicates who must take action.\n\n    ![Request status and Actionable by fields](./media/applypackage_prod_7-1024x269.png)\n11. The Service Engineering team either accepts or denies the request.\n\n    - If the request is accepted, the Service Engineering team begins to update the environment.\n    \n    ![Accepted request: Request status = Request accepted, Actionable by = Microsoft](./media/applypackage_prod_9-1024x384.png)\n    - If the request is denied, Microsoft informs the customer about the reason for denial and the action that the customer must take. The customer can then reschedule the request, change the package, or cancel the request.\n    \n    ![Denied request: Request status = Request denied, Actionable by = Customer/Partner](./media/applypackage_prod_8-1024x322.png)\n\n    At any time, the customer can use the **Comments** field to post comments to the request.\n    \n    ![Example of comments that are posted to a request](./media/applypackage_prod_10-1024x336.png)\n12. After the environment is serviced, you can monitor the status. The **Servicing status** field indicates the status of package application.\n\n    [![Servicing status and Request status fields](./media/applypackage_prod_11-1024x399.png)](./media/applypackage_prod_11.png)\n    \n    Additionally, a progress indicator shows the number of steps that have been run, out of the total number of steps that are available.\n    \n    ![Progress indicator](./media/applypackage_prod_12-1024x414.png)\n\n### Successful package application\n\n- After the deployment is successfully completed, the **Servicing status** field is set to **Completed**, but the **Request status** field is still set to **In progress**, because the request hasn't yet been closed.\n\n    ![Successful deployment: Servicing status = Completed, Request status = In progress](./media/applypackage_prod_13-1024x392.png)\n- After the Service Engineering team has finished applying the request, you must close the request by clicking **Close servicing request**.\n- When you close a successful request, in the **Edit work item details** dialog box, set the **Service request status** field to **Succeeded**, and then click **Submit**.\n\n### Unsuccessful package application\n\n- If package application isn't successfully completed, Microsoft will investigate the issue. The **Servicing status** field will indicate that package application has failed.\n\n    ![Unsuccessful package deployment: Servicing status = Failed](./media/applypackage_prod_17.png)\n- When deployment fails, Microsoft can abort the package, revert the environment to a good state, and send the request back to the customer, so that the customer can validate the environment and close the request. If there is an issue in the package, the customer must submit a new request that includes the new package.\n\n    ![Comment from Microsoft that changes were reverted, and that the customer must validate the environment](./media/applypackage_prod_18-1024x346.png)\n- When you close a failed request, in the **Edit work item details** dialog box, set the **Service request status** field to **Aborted**.\n\n## Deploying packages in Retail environments\n\nIf you're using Microsoft Dynamics 365 for Retail components (such as Retail Modern POS), after you've applied a deployable package in your environment, you must also update your in-store components. For more information, see [Retail Modern POS installation and updates](/dynamics365/unified-operations/retail/retail-modern-pos-device-activation).\n\n## See also\n\n[Install a deployable package](install-deployable-package.md)\n","nodes":[{"pos":[4,818],"embed":true,"restype":"x-metadata","content":"# required metadata\n\ntitle: Apply a deployable package to a Finance and Operations environment\ndescription: This topic explains how to use Lifecycle Services (LCS) to apply a binary update or an application (AOT) deployable package to a Finance and Operations environment.\nauthor: manalidongre\nmanager: AnnBe\nms.date: 05/31/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \nms.reviewer: kfend\nms.search.scope: Operations, Platform, UnifiedOperations, AX Platform\n# ms.tgt_pltfrm: \nms.custom: 107013\nms.assetid: 341a229f-d9c3-4678-b353-d08d5b2c1caf\nms.search.region: Global\n# ms.search.industry: \nms.author: manado\nms.search.validFrom: 2016-05-31\nms.dyn365.ops.version: Platform update 1\n","nodes":[{"content":"Apply a deployable package to a Finance and Operations environment","nodes":[{"pos":[0,66],"content":"Apply a deployable package to a Finance and Operations environment","nodes":[{"content":"Apply a deployable package to a Finance and Operations environment","pos":[0,66]}]}],"path":["title"],"extradata":"MT"},{"content":"This topic explains how to use Lifecycle Services (LCS) to apply a binary update or an application (AOT) deployable package to a Finance and Operations environment.","nodes":[{"pos":[0,164],"content":"This topic explains how to use Lifecycle Services (LCS) to apply a binary update or an application (AOT) deployable package to a Finance and Operations environment.","nodes":[{"content":"This topic explains how to use Lifecycle Services (LCS) to apply a binary update or an application (AOT) deployable package to a Finance and Operations environment.","pos":[0,164]}]}],"path":["description"],"extradata":"MT"}],"header":"# required metadata\n","yml":true},{"pos":[826,892],"content":"Apply a deployable package to a Finance and Operations environment","linkify":"Apply a deployable package to a Finance and Operations environment","nodes":[{"content":"Apply a deployable package to a Finance and Operations environment","pos":[0,66]}]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> Package application causes system downtime.","pos":[937,990],"source":"**Note:** Package application causes system downtime."},{"content":"All relevant services will be stopped, and you won't be able to use your environments while the package is being applied.","pos":[991,1112]},{"content":"You should plan accordingly.","pos":[1113,1141]},{"pos":[1146,1168],"content":"Supported environments","linkify":"Supported environments","nodes":[{"content":"Supported environments","pos":[0,22]}]},{"content":"The following topologies support package deployment that uses automated flows in Microsoft Dynamics Lifecycle Services (LCS):","pos":[1170,1295]},{"content":"<bpt id=\"p1\">**</bpt>LCS Implementation Project<ept id=\"p1\">**</ept> – All environments are supported, but there are some limitations for build environments.","pos":[1299,1418],"source":"**LCS Implementation Project** – All environments are supported, but there are some limitations for build environments."},{"content":"The build environments that actually have a build server installed will only show Platform updates; application deployable packages would still need to be installed manually if you are using a build server as a development machine.","pos":[1419,1650]},{"content":"Automated package application is self-serve in all environments except production environments.","pos":[1651,1746]},{"content":"For production environments, customers must use LCS to submit a request to the Service Engineering team to apply packages.","pos":[1747,1869]},{"pos":[1872,1989],"content":"<bpt id=\"p1\">**</bpt>LCS Partner Projects<ept id=\"p1\">**</ept> – Developer only environments (where build servers = 0) and demo environments are supported.","source":"**LCS Partner Projects** – Developer only environments (where build servers = 0) and demo environments are supported."},{"pos":[1992,2045],"content":"<bpt id=\"p1\">**</bpt>Trial Projects<ept id=\"p1\">**</ept> – Demo environments are supported.","source":"**Trial Projects** – Demo environments are supported."},{"content":"For other topologies (below), you must use Remote Desktop Protocol (RDP) to connect to the environment and install from the command line.","pos":[2047,2184]},{"content":"For information about manual package deployment, see <bpt id=\"p1\">[</bpt>Install  a deployable package<ept id=\"p1\">](install-deployable-package.md)</ept>.","pos":[2185,2301],"source":" For information about manual package deployment, see [Install  a deployable package](install-deployable-package.md)."},{"content":"Local development environments (Downloadable virtual hard disk [VHD])","pos":[2305,2374]},{"content":"Development/test environments in Microsoft Azure (Partner and trial projects)","pos":[2377,2454]},{"content":"Build environments in an LCS Implementation project","pos":[2457,2508]},{"pos":[2513,2525],"content":"Key concepts","linkify":"Key concepts","nodes":[{"content":"Key concepts","pos":[0,12]}]},{"content":"<bpt id=\"p1\">**</bpt>Deployable package<ept id=\"p1\">**</ept> – A deployable package is a unit of deployment that can be applied in any Microsoft Dynamics 365 for Finance and Operations environment.","pos":[2529,2688],"source":"**Deployable package** – A deployable package is a unit of deployment that can be applied in any Microsoft Dynamics 365 for Finance and Operations environment."},{"content":"A deployable package can be a binary update to the platform or other runtime components, an updated Finance and Operations application (AOT) package, or a new Finance and Operations application (AOT) package.","pos":[2689,2897]},{"pos":[2903,3027],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Example of a deployable package<ept id=\"p1\">](./media/applypackage_deployablepackage.jpg)](./media/applypackage_deployablepackage.jpg)</ept>","source":"[![Example of a deployable package](./media/applypackage_deployablepackage.jpg)](./media/applypackage_deployablepackage.jpg)"},{"content":"<bpt id=\"p1\">**</bpt>Runbook<ept id=\"p1\">**</ept> – The deployment runbook is a series of steps that are generated in order to apply the deployable package to the target environment.","pos":[3030,3174],"source":"**Runbook** – The deployment runbook is a series of steps that are generated in order to apply the deployable package to the target environment."},{"content":"Some steps are automated, and some steps are manual.","pos":[3175,3227]},{"content":"AXUpdateInstaller lets you run these steps one at a time and in the correct order.","pos":[3228,3310]},{"pos":[3316,3429],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Example of a deployment runbook<ept id=\"p1\">](./media/applypackage_runbook-1024x528.jpg)](./media/applypackage_runbook.jpg)</ept>","source":"[![Example of a deployment runbook](./media/applypackage_runbook-1024x528.jpg)](./media/applypackage_runbook.jpg)"},{"content":"<bpt id=\"p1\">**</bpt>AXUpdateInstaller<ept id=\"p1\">**</ept> – When you create a customization package from Microsoft Visual Studio or a Microsoft binary update, the installer executable is bundled together with the deployable package.","pos":[3432,3628],"source":"**AXUpdateInstaller** – When you create a customization package from Microsoft Visual Studio or a Microsoft binary update, the installer executable is bundled together with the deployable package."},{"content":"The installer generates the runbook for the specified topology.","pos":[3629,3692]},{"content":"The installer can also run steps in order, according to the runbook for a specific topology.","pos":[3693,3785]},{"pos":[3790,3813],"content":"Supported package types","linkify":"Supported package types","nodes":[{"content":"Supported package types","pos":[0,23]}]},{"content":"<bpt id=\"p1\">**</bpt>AOT deployable package<ept id=\"p1\">**</ept> – A deployable package that is generated from application metadata and source code.","pos":[3817,3927],"source":"**AOT deployable package** – A deployable package that is generated from application metadata and source code."},{"content":"This deployable package is created in a development or build environment.","pos":[3928,4001]},{"content":"<bpt id=\"p1\">**</bpt>Binary update package<ept id=\"p1\">**</ept> – A deployable package that contains dynamic-link libraries (DLLs) and other binaries and metadata that the platform and application depend on.","pos":[4004,4173],"source":"**Binary update package** – A deployable package that contains dynamic-link libraries (DLLs) and other binaries and metadata that the platform and application depend on."},{"content":"This is a package released by Microsoft.","pos":[4174,4214]},{"pos":[4217,4352],"content":"<bpt id=\"p1\">**</bpt>Combined Retail deployable package<ept id=\"p1\">**</ept> – A combination of various Retail packages that are generated after the Retail code is combined.","source":"**Combined Retail deployable package** – A combination of various Retail packages that are generated after the Retail code is combined."},{"content":"<bpt id=\"p1\">**</bpt>Merged package<ept id=\"p1\">**</ept> – A package that is created by combining one package of each type.","pos":[4355,4440],"source":"**Merged package** – A package that is created by combining one package of each type."},{"content":"For example, one binary update package, one AOT package, and one Retail package can be combined.","pos":[4441,4537]},{"content":"The packages are merged in the Asset library for the project in LCS.","pos":[4538,4606]},{"pos":[4611,4629],"content":"Prerequisite steps","linkify":"Prerequisite steps","nodes":[{"content":"Prerequisite steps","pos":[0,18]}]},{"content":"<bpt id=\"p1\">**</bpt>Make sure that the package that should be applied is valid.<ept id=\"p1\">**</ept>","pos":[4633,4696],"source":"**Make sure that the package that should be applied is valid.**"},{"content":"When a package is uploaded to the Asset library, it isn't analyzed.","pos":[4697,4764]},{"content":"If you select the package, the package status appears in the right pane as <bpt id=\"p1\">**</bpt>Not Validated<ept id=\"p1\">**</ept>.","pos":[4765,4858],"source":" If you select the package, the package status appears in the right pane as **Not Validated**."},{"content":"A package must pass validation before it can be applied in an environment by using the following procedures.","pos":[4859,4967]},{"content":"The status of the package will be updated in the Asset library to indicate whether the package is valid.","pos":[4968,5072]},{"content":"We require validation to help guarantee that production environments aren't affected by packages that don't meet the guidelines.","pos":[5073,5201]},{"content":"There are three types of validations:","pos":[5207,5244]},{"content":"Basic package format validations","pos":[5252,5284]},{"content":"Platform version checks","pos":[5291,5314]},{"content":"Types of packages","pos":[5321,5338]},{"pos":[5342,5478],"content":"<bpt id=\"p1\">**</bpt>If you're updating a build environment<ept id=\"p1\">**</ept>, see <bpt id=\"p2\">[</bpt>Prerequisite steps for build environments<ept id=\"p2\">](#prerequisite-steps-for-build-environments)</ept>.","source":"**If you're updating a build environment**, see [Prerequisite steps for build environments](#prerequisite-steps-for-build-environments)."},{"content":"<bpt id=\"p1\">**</bpt>Make sure that the package is applied in a sandbox environment before it's applied in the production environment.<ept id=\"p1\">**</ept>","pos":[5481,5598],"source":"**Make sure that the package is applied in a sandbox environment before it's applied in the production environment.**"},{"content":"To help guarantee that the production environment is always in a good state, we want to make sure that the package is tested in a sandbox environment before it's applied in the production environment.","pos":[5599,5799]},{"content":"Therefore, before you request that the package be applied in your production environment, make sure that it has been applied in your sandbox environment by using the automated flows.","pos":[5800,5982]},{"content":"<bpt id=\"p1\">**</bpt>If you want to apply multiple packages, create a merged package that can be applied first in a sandbox environment and then in the production environment.<ept id=\"p1\">**</ept>","pos":[5985,6143],"source":"**If you want to apply multiple packages, create a merged package that can be applied first in a sandbox environment and then in the production environment.**"},{"content":"Application of a single package in an average environment requires about 5 hours of downtime.","pos":[6144,6237]},{"content":"To avoid additional hours of downtime when you must apply multiple packages, you can create a single combined package that contains one package of each type.","pos":[6238,6395]},{"content":"If you select a binary package and an application deployable package in the Asset library, a <bpt id=\"p1\">**</bpt>Merge<ept id=\"p1\">**</ept> button becomes available on the toolbar.","pos":[6396,6539],"source":" If you select a binary package and an application deployable package in the Asset library, a **Merge** button becomes available on the toolbar."},{"content":"By clicking this button, you can merge the two packages into a single package and therefore reduce the total downtime by half.","pos":[6540,6666]},{"pos":[6671,6731],"content":"Apply a package to a non-production environment by using LCS","linkify":"Apply a package to a non-production environment by using LCS","nodes":[{"content":"Apply a package to a non-production environment by using LCS","pos":[0,60]}]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> Package application causes system downtime.","pos":[6733,6786],"source":"**Note:** Package application causes system downtime."},{"content":"All relevant services will be stopped, and you won't be able to use your environments while the package is being applied.","pos":[6787,6908]},{"content":"Before you begin, verify that the deployable package has been uploaded to the Asset library in LCS.","pos":[6910,7009]},{"content":"For a binary update, upload the package directly to the Asset library.","pos":[7014,7084]},{"content":"For information about how to download an update from LCS, see <bpt id=\"p1\">[</bpt>Download hotfixes from Lifecycle Services<ept id=\"p1\">](../migration-upgrade/download-hotfix-lcs.md)</ept>.","pos":[7085,7236],"source":" For information about how to download an update from LCS, see [Download hotfixes from Lifecycle Services](../migration-upgrade/download-hotfix-lcs.md)."},{"content":"For an application (AOT) deployable package that results from an X++ hotfix, or from application customizations and extensions, create the deployable package in your development or build environment, and then upload it to the Asset library.","pos":[7242,7482]},{"pos":[7486,7580],"content":"Open the <bpt id=\"p1\">**</bpt>Environment details<ept id=\"p1\">**</ept> view for the environment where you want to apply the package.","source":"Open the **Environment details** view for the environment where you want to apply the package."},{"pos":[7584,7645],"content":"Click <bpt id=\"p1\">**</bpt>Maintain<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Apply updates<ept id=\"p2\">**</ept> to apply an update.","source":"Click **Maintain** &gt; **Apply updates** to apply an update."},{"content":"Select the package to apply.","pos":[7649,7677]},{"content":"Use the filter at the top to find your package.","pos":[7678,7725]},{"content":"Click <bpt id=\"p1\">**</bpt>Apply<ept id=\"p1\">**</ept>.","pos":[7729,7745],"source":"Click **Apply**."},{"content":"Notice that the status in the upper right of the <bpt id=\"p1\">**</bpt>Environment details<ept id=\"p1\">**</ept> view changes to <bpt id=\"p2\">**</bpt>Queued<ept id=\"p2\">**</ept>, and that an <bpt id=\"p3\">**</bpt>Environment updates<ept id=\"p3\">**</ept> section now shows the progress of the package.","pos":[7746,7929],"source":" Notice that the status in the upper right of the **Environment details** view changes to **Queued**, and that an **Environment updates** section now shows the progress of the package."},{"pos":[7935,8053],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Queued status<ept id=\"p1\">](./media/parallelexecutionsandbox_queuedstate.jpg)](./media/parallelexecutionsandbox_queuedstate.jpg)</ept>","source":"[![Queued status](./media/parallelexecutionsandbox_queuedstate.jpg)](./media/parallelexecutionsandbox_queuedstate.jpg)"},{"content":"Refresh the page to see the progress of package application.","pos":[8057,8117]},{"content":"Notice that the servicing status is <bpt id=\"p1\">**</bpt>In Progress<ept id=\"p1\">**</ept>, and that the environment status is <bpt id=\"p2\">**</bpt>Servicing<ept id=\"p2\">**</ept>.","pos":[8118,8220],"source":" Notice that the servicing status is **In Progress**, and that the environment status is **Servicing**."},{"pos":[8226,8353],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Servicing status<ept id=\"p1\">](./media/parallelexecutionsandbox_servicingstate.png)](./media/parallelexecutionsandbox_servicingstate.png)</ept>","source":"[![Servicing status](./media/parallelexecutionsandbox_servicingstate.png)](./media/parallelexecutionsandbox_servicingstate.png)"},{"content":"Continue to refresh the page to see the status updates for the package application request.","pos":[8357,8448]},{"content":"When the package has been applied, the environment status changes to <bpt id=\"p1\">**</bpt>Deployed<ept id=\"p1\">**</ept>, and the servicing status changes to <bpt id=\"p2\">**</bpt>Completed<ept id=\"p2\">**</ept>.","pos":[8449,8582],"source":" When the package has been applied, the environment status changes to **Deployed**, and the servicing status changes to **Completed**."},{"pos":[8588,8714],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Deployed status<ept id=\"p1\">](./media/parallelexecutionsandbox_signedoffstate.png)](./media/parallelexecutionsandbox_signedoffstate.png)</ept>","source":"[![Deployed status](./media/parallelexecutionsandbox_signedoffstate.png)](./media/parallelexecutionsandbox_signedoffstate.png)"},{"content":"To sign off on package application, click <bpt id=\"p1\">**</bpt>Sign off<ept id=\"p1\">**</ept> if there are no issues.","pos":[8718,8796],"source":"To sign off on package application, click **Sign off** if there are no issues."},{"content":"If issues occurred when you applied the package, click <bpt id=\"p1\">**</bpt>Sign off with issues<ept id=\"p1\">**</ept>.","pos":[8797,8877],"source":" If issues occurred when you applied the package, click **Sign off with issues**."},{"pos":[8883,8924],"content":"Prerequisite steps for build environments","linkify":"Prerequisite steps for build environments","nodes":[{"content":"Prerequisite steps for build environments","pos":[0,41]}]},{"content":"If a build virtual machine (VM) has already been used for one or more builds, before you apply a binary update to the VM, you should use RDP to connect to the VM and restore the metadata packages folder from the metadata backup folder.","pos":[8926,9161]},{"content":"You should then delete the metadata backup.","pos":[9162,9205]},{"content":"These steps help guarantee that a platform update will be applied in a clean environment.","pos":[9206,9295]},{"content":"The next build process will then detect that no metadata backup exists, and a new metadata backup will be created automatically.","pos":[9296,9424]},{"content":"This new metadata backup will include the updated platform.","pos":[9425,9484]},{"content":"To determine whether a complete metadata backup exists, look for a BackupComplete.txt file in I:<ph id=\"ph1\">\\\\</ph>DynamicsBackup<ph id=\"ph2\">\\\\</ph>Packages (or C:<ph id=\"ph3\">\\\\</ph>DynamicsBackup<ph id=\"ph4\">\\\\</ph>Packages on a downloadable VHD).","pos":[9487,9666],"source":"To determine whether a complete metadata backup exists, look for a BackupComplete.txt file in I:\\\\DynamicsBackup\\\\Packages (or C:\\\\DynamicsBackup\\\\Packages on a downloadable VHD)."},{"content":"If this file is present, a metadata backup exists.","pos":[9667,9717]},{"content":"The file will contain a timestamp that indicates when it was created.","pos":[9718,9787]},{"content":"To restore the deployment's metadata packages folder from the metadata backup, open an elevated Microsoft Windows PowerShell <bpt id=\"p1\">**</bpt>Command Prompt<ept id=\"p1\">**</ept> window, and run the following command.","pos":[9788,9970],"source":" To restore the deployment's metadata packages folder from the metadata backup, open an elevated Microsoft Windows PowerShell **Command Prompt** window, and run the following command."},{"content":"This command runs the same script that is used in the first step of the build process.","pos":[9971,10057]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> Run the preceding command only if a complete metadata backup exists.","pos":[10172,10250],"source":"**Note:** Run the preceding command only if a complete metadata backup exists."},{"content":"If a complete metadata backup doesn't exist, the command will create a new backup.","pos":[10251,10333]},{"content":"This command will stop the Finance and Operations deployment services and Internet Information Services (IIS) before it restores the files from the metadata backup to the deployment's metadata packages folder.","pos":[10334,10543]},{"content":"You should see output that resembles the following example.","pos":[10544,10603]},{"content":"<bpt id=\"p1\">*</bpt>6:17:52 PM: Preparing build environment...<ept id=\"p1\">*</ept> <bpt id=\"p2\">*</bpt>6:17:53 PM: Updating Dynamics SDK registry key with specified values...<ept id=\"p2\">*</ept> <bpt id=\"p3\">*</bpt>6:17:53 PM: Updating Dynamics SDK registry key with values from AOS web config...<ept id=\"p3\">*</ept> <bpt id=\"p4\">*</bpt>6:17:53 PM: Stopping Finance and Operations deployment...<ept id=\"p4\">*</ept> <bpt id=\"p5\">*</bpt>6:18:06 PM: <bpt id=\"p6\">**</bpt>A backup already exists at: I:<ph id=\"ph1\">\\\\</ph>DynamicsBackup<ph id=\"ph2\">\\\\</ph>Packages. No new backup will be created<ept id=\"p6\">**</ept>.<ept id=\"p5\">*</ept>","pos":[10605,10974],"source":"*6:17:52 PM: Preparing build environment...* *6:17:53 PM: Updating Dynamics SDK registry key with specified values...* *6:17:53 PM: Updating Dynamics SDK registry key with values from AOS web config...* *6:17:53 PM: Stopping Finance and Operations deployment...* *6:18:06 PM: **A backup already exists at: I:\\\\DynamicsBackup\\\\Packages. No new backup will be created**.*"},{"content":"<bpt id=\"p1\">*</bpt>6:18:06 PM: <bpt id=\"p2\">**</bpt>Restoring metadata packages from backup...<ept id=\"p2\">**</ept><ept id=\"p1\">*</ept> <bpt id=\"p3\">*</bpt>6:22:56 PM: <bpt id=\"p4\">**</bpt>Metadata packages successfully restored from backup<ept id=\"p4\">**</ept>.<ept id=\"p3\">*</ept>","pos":[10975,11106],"source":"*6:18:06 PM: **Restoring metadata packages from backup...*** *6:22:56 PM: **Metadata packages successfully restored from backup**.*"},{"content":"<bpt id=\"p1\">*</bpt>6:22:57 PM: Preparing build environment complete.<ept id=\"p1\">*</ept>","pos":[11107,11158],"source":"*6:22:57 PM: Preparing build environment complete.*"},{"content":"<bpt id=\"p1\">*</bpt>6:22:57 PM: Script completed with exit code: 0<ept id=\"p1\">*</ept>","pos":[11159,11207],"source":"*6:22:57 PM: Script completed with exit code: 0*"},{"content":"After the metadata backup has been restored, delete (or rename) the metadata backup folder (DynamicsBackup<ph id=\"ph1\">\\\\</ph>Packages), so that the build process will no longer find it.","pos":[11209,11377],"source":"After the metadata backup has been restored, delete (or rename) the metadata backup folder (DynamicsBackup\\\\Packages), so that the build process will no longer find it."},{"pos":[11383,11398],"content":"Troubleshooting","linkify":"Troubleshooting","nodes":[{"content":"Troubleshooting","pos":[0,15]}]},{"pos":[11405,11440],"content":"General troubleshooting/diagnostics","linkify":"General troubleshooting/diagnostics","nodes":[{"content":"General troubleshooting/diagnostics","pos":[0,35]}]},{"content":"If package application isn't successful, you can download either the logs or the runbook to see the detailed logs.","pos":[11442,11556]},{"content":"You can also use RDP to connect to an environment so that you can fix issues.","pos":[11557,11634]},{"content":"If you must report the issue to Microsoft, be sure to include the activity ID that is reported in the <bpt id=\"p1\">**</bpt>Environment updates<ept id=\"p1\">**</ept> section.","pos":[11635,11769],"source":" If you must report the issue to Microsoft, be sure to include the activity ID that is reported in the **Environment updates** section."},{"content":"Download log and Download runbook buttons","pos":[11773,11814]},{"content":"Troubleshooting","pos":[11856,11871]},{"pos":[11933,11947],"content":"Using the logs","linkify":"Using the logs","nodes":[{"content":"Using the logs","pos":[0,14]}]},{"content":"Download the logs.","pos":[11952,11970]},{"content":"Unzip the log files.","pos":[11974,11994]},{"pos":[11998,12064],"content":"Select the role that a step failed for, such as <bpt id=\"p1\">**</bpt>AOS<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>BI<ept id=\"p2\">**</ept>.","source":"Select the role that a step failed for, such as **AOS** or **BI**."},{"content":"Select the VM where the step failed.","pos":[12068,12104]},{"content":"This information appears in the <bpt id=\"p1\">**</bpt>Machine name<ept id=\"p1\">**</ept> column in the <bpt id=\"p2\">**</bpt>Environment updates<ept id=\"p2\">**</ept> section.","pos":[12105,12200],"source":" This information appears in the **Machine name** column in the **Environment updates** section."},{"content":"In the logs for the VM, select the folder that corresponds to the step where the issue occurred.","pos":[12204,12300]},{"content":"The folder name identifies the step that each folder corresponds to.","pos":[12301,12369]},{"content":"For example, if the issue occurred in the executing a step, select the <bpt id=\"p1\">**</bpt>ExecuteRunbook<ph id=\"ph1\">\\*</ph><ept id=\"p1\">**</ept> folder.","pos":[12370,12469],"source":" For example, if the issue occurred in the executing a step, select the **ExecuteRunbook\\*** folder."},{"content":"For example, if the folder name is ExecuteRunbook-b0c5c413-dae3-4a7a-a0c4-d558614f7e98-1<ph id=\"ph1\">\\_</ph>I0<ph id=\"ph2\">\\_</ph>R0, the step number is highlighted and is the number after the globally unique identifier (GUID).","pos":[12471,12662],"source":"For example, if the folder name is ExecuteRunbook-b0c5c413-dae3-4a7a-a0c4-d558614f7e98-1\\_I0\\_R0, the step number is highlighted and is the number after the globally unique identifier (GUID)."},{"pos":[12669,12684],"content":"Package failure","linkify":"Package failure","nodes":[{"content":"Package failure","pos":[0,15]}]},{"content":"If package application isn't successful, you have two options:","pos":[12686,12748]},{"pos":[12752,12804],"content":"Click <bpt id=\"p1\">**</bpt>Resume<ept id=\"p1\">**</ept> to retry the operation that failed.","source":"Click **Resume** to retry the operation that failed."},{"content":"Failed status","pos":[12812,12825]},{"pos":[12879,12923],"content":"Click <bpt id=\"p1\">**</bpt>Abort<ept id=\"p1\">**</ept> to stop package application.","source":"Click **Abort** to stop package application."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> If you click <bpt id=\"p2\">**</bpt>Abort<ept id=\"p2\">**</ept>, you don't roll back the changes that have already been made to your environment.","pos":[12929,13043],"source":"**Note:** If you click **Abort**, you don't roll back the changes that have already been made to your environment."},{"content":"To proceed, you must fix the issue.","pos":[13044,13079]},{"pos":[13089,13236],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Message box that appears when you abort package application<ept id=\"p1\">](./media/applypackage_sandbox_13-1024x274.png)](./media/applypackage_sandbox_13.png)</ept>","source":"[![Message box that appears when you abort package application](./media/applypackage_sandbox_13-1024x274.png)](./media/applypackage_sandbox_13.png)"},{"pos":[13241,13297],"content":"Apply a package to a production environment by using LCS","linkify":"Apply a package to a production environment by using LCS","nodes":[{"content":"Apply a package to a production environment by using LCS","pos":[0,56]}]},{"content":"In a production environment, unlike in a sandbox environment or other types of environments, package application through LCS isn't self-serve.","pos":[13299,13441]},{"content":"Customers and partners must submit a request to the Service Engineering team to apply a package when the customer is ready for the downtime.","pos":[13442,13582]},{"content":"Download an update from LCS.","pos":[13588,13616]},{"content":"For information about how to download an update from LCS, see <bpt id=\"p1\">[</bpt>Download hotfixes from Lifecycle Services<ept id=\"p1\">](../migration-upgrade/download-hotfix-lcs.md)</ept>.","pos":[13617,13768],"source":" For information about how to download an update from LCS, see [Download hotfixes from Lifecycle Services](../migration-upgrade/download-hotfix-lcs.md)."},{"content":"For a binary update, upload the update deployable package directly to the Asset library.","pos":[13776,13864]},{"content":"For an application/X++ hotfix, apply the package in a development environment.","pos":[13871,13949]},{"content":"After you resolve any conflicts, generate a deployable package from Visual Studio, and upload the package to the Asset library.","pos":[13950,14077]},{"content":"For information about how to upload to the Asset library and create a deployable package, see <bpt id=\"p1\">[</bpt>Create and apply a deployable package<ept id=\"p1\">](create-apply-deployable-package.md)</ept>.","pos":[14078,14248],"source":" For information about how to upload to the Asset library and create a deployable package, see [Create and apply a deployable package](create-apply-deployable-package.md)."},{"pos":[14253,14427],"content":"On the <bpt id=\"p1\">**</bpt>Asset library<ept id=\"p1\">**</ept> page in LCS, on the tab that corresponds to the asset type (<bpt id=\"p2\">**</bpt>Software deployable package<ept id=\"p2\">**</ept>), select a package, and then click <bpt id=\"p3\">**</bpt>Release candidate<ept id=\"p3\">**</ept>.","source":"On the **Asset library** page in LCS, on the tab that corresponds to the asset type (**Software deployable package**), select a package, and then click **Release candidate**."},{"content":"Apply the package in a sandbox environment by using the instructions earlier in this topic.","pos":[14431,14522]},{"pos":[14526,14681],"content":"After the package is successfully applied and signed off in the sandbox environment, open the Asset Library, and mark the package as <bpt id=\"p1\">**</bpt>Release Candidate<ept id=\"p1\">**</ept>.","source":"After the package is successfully applied and signed off in the sandbox environment, open the Asset Library, and mark the package as **Release Candidate**."},{"pos":[14685,14790],"content":"Open the <bpt id=\"p1\">**</bpt>Environment details<ept id=\"p1\">**</ept> view for the production environment where you want to apply the package.","source":"Open the **Environment details** view for the production environment where you want to apply the package."},{"pos":[14794,14857],"content":"Click <bpt id=\"p1\">**</bpt>Maintain<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Apply updates<ept id=\"p2\">**</ept> to apply the package.","source":"Click **Maintain** &gt; **Apply updates** to apply the package."},{"content":"Select the type of package to apply.","pos":[14861,14897]},{"pos":[14901,15053],"content":"Select the package to apply in your production environment, and then click <bpt id=\"p1\">**</bpt>Schedule<ept id=\"p1\">**</ept> to submit a request to the Service Engineering team to apply it.","source":"Select the package to apply in your production environment, and then click **Schedule** to submit a request to the Service Engineering team to apply it."},{"pos":[15059,15232],"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> The list of packages includes only the packages that have been successfully signed off in the sandbox environment, and that have been marked as release candidates.","source":"**Note:** The list of packages includes only the packages that have been successfully signed off in the sandbox environment, and that have been marked as release candidates."},{"content":"Specify the date and time to schedule package application for, click <bpt id=\"p1\">**</bpt>Submit<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept> to confirm.","pos":[15236,15350],"source":"Specify the date and time to schedule package application for, click **Submit**, and then click **OK** to confirm."},{"content":"Note that your environments will be down and unavailable to perform business while the package is being applied.","pos":[15351,15463]},{"content":"Refresh the page.","pos":[15468,15485]},{"content":"Two fields on the page indicate the status of the request.","pos":[15486,15544]},{"pos":[15552,15652],"content":"<bpt id=\"p1\">**</bpt>Request status<ept id=\"p1\">**</ept> – This field indicates the status of the request that you submitted to Microsoft.","source":"**Request status** – This field indicates the status of the request that you submitted to Microsoft."},{"pos":[15659,15721],"content":"<bpt id=\"p1\">**</bpt>Actionable by<ept id=\"p1\">**</ept> – This field indicates who must take action.","source":"**Actionable by** – This field indicates who must take action."},{"content":"Request status and Actionable by fields","pos":[15729,15768]},{"content":"The Service Engineering team either accepts or denies the request.","pos":[15816,15882]},{"content":"If the request is accepted, the Service Engineering team begins to update the environment.","pos":[15890,15980]},{"content":"Accepted request: Request status = Request accepted, Actionable by = Microsoft","pos":[15992,16070]},{"content":"If the request is denied, Microsoft informs the customer about the reason for denial and the action that the customer must take.","pos":[16120,16248]},{"content":"The customer can then reschedule the request, change the package, or cancel the request.","pos":[16249,16337]},{"content":"Denied request: Request status = Request denied, Actionable by = Customer/Partner","pos":[16349,16430]},{"pos":[16479,16568],"content":"At any time, the customer can use the <bpt id=\"p1\">**</bpt>Comments<ept id=\"p1\">**</ept> field to post comments to the request.","source":"At any time, the customer can use the **Comments** field to post comments to the request."},{"content":"Example of comments that are posted to a request","pos":[16580,16628]},{"content":"After the environment is serviced, you can monitor the status.","pos":[16677,16739]},{"content":"The <bpt id=\"p1\">**</bpt>Servicing status<ept id=\"p1\">**</ept> field indicates the status of package application.","pos":[16740,16815],"source":" The **Servicing status** field indicates the status of package application."},{"pos":[16821,16945],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">![</ph>Servicing status and Request status fields<ept id=\"p1\">](./media/applypackage_prod_11-1024x399.png)](./media/applypackage_prod_11.png)</ept>","source":"[![Servicing status and Request status fields](./media/applypackage_prod_11-1024x399.png)](./media/applypackage_prod_11.png)"},{"content":"Additionally, a progress indicator shows the number of steps that have been run, out of the total number of steps that are available.","pos":[16955,17088]},{"content":"Progress indicator","pos":[17100,17118]},{"pos":[17168,17198],"content":"Successful package application","linkify":"Successful package application","nodes":[{"content":"Successful package application","pos":[0,30]}]},{"pos":[17202,17415],"content":"After the deployment is successfully completed, the <bpt id=\"p1\">**</bpt>Servicing status<ept id=\"p1\">**</ept> field is set to <bpt id=\"p2\">**</bpt>Completed<ept id=\"p2\">**</ept>, but the <bpt id=\"p3\">**</bpt>Request status<ept id=\"p3\">**</ept> field is still set to <bpt id=\"p4\">**</bpt>In progress<ept id=\"p4\">**</ept>, because the request hasn't yet been closed.","source":"After the deployment is successfully completed, the **Servicing status** field is set to **Completed**, but the **Request status** field is still set to **In progress**, because the request hasn't yet been closed."},{"content":"Successful deployment: Servicing status = Completed, Request status = In progress","pos":[17423,17504]},{"pos":[17551,17688],"content":"After the Service Engineering team has finished applying the request, you must close the request by clicking <bpt id=\"p1\">**</bpt>Close servicing request<ept id=\"p1\">**</ept>.","source":"After the Service Engineering team has finished applying the request, you must close the request by clicking **Close servicing request**."},{"pos":[17691,17859],"content":"When you close a successful request, in the <bpt id=\"p1\">**</bpt>Edit work item details<ept id=\"p1\">**</ept> dialog box, set the <bpt id=\"p2\">**</bpt>Service request status<ept id=\"p2\">**</ept> field to <bpt id=\"p3\">**</bpt>Succeeded<ept id=\"p3\">**</ept>, and then click <bpt id=\"p4\">**</bpt>Submit<ept id=\"p4\">**</ept>.","source":"When you close a successful request, in the **Edit work item details** dialog box, set the **Service request status** field to **Succeeded**, and then click **Submit**."},{"pos":[17865,17897],"content":"Unsuccessful package application","linkify":"Unsuccessful package application","nodes":[{"content":"Unsuccessful package application","pos":[0,32]}]},{"content":"If package application isn't successfully completed, Microsoft will investigate the issue.","pos":[17901,17991]},{"content":"The <bpt id=\"p1\">**</bpt>Servicing status<ept id=\"p1\">**</ept> field will indicate that package application has failed.","pos":[17992,18073],"source":" The **Servicing status** field will indicate that package application has failed."},{"content":"Unsuccessful package deployment: Servicing status = Failed","pos":[18081,18139]},{"content":"When deployment fails, Microsoft can abort the package, revert the environment to a good state, and send the request back to the customer, so that the customer can validate the environment and close the request.","pos":[18177,18388]},{"content":"If there is an issue in the package, the customer must submit a new request that includes the new package.","pos":[18389,18495]},{"content":"Comment from Microsoft that changes were reverted, and that the customer must validate the environment","pos":[18503,18605]},{"pos":[18652,18787],"content":"When you close a failed request, in the <bpt id=\"p1\">**</bpt>Edit work item details<ept id=\"p1\">**</ept> dialog box, set the <bpt id=\"p2\">**</bpt>Service request status<ept id=\"p2\">**</ept> field to <bpt id=\"p3\">**</bpt>Aborted<ept id=\"p3\">**</ept>.","source":"When you close a failed request, in the **Edit work item details** dialog box, set the **Service request status** field to **Aborted**."},{"pos":[18792,18833],"content":"Deploying packages in Retail environments","linkify":"Deploying packages in Retail environments","nodes":[{"content":"Deploying packages in Retail environments","pos":[0,41]}]},{"content":"If you're using Microsoft Dynamics 365 for Retail components (such as Retail Modern POS), after you've applied a deployable package in your environment, you must also update your in-store components.","pos":[18835,19034]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Retail Modern POS installation and updates<ept id=\"p1\">](/dynamics365/unified-operations/retail/retail-modern-pos-device-activation)</ept>.","pos":[19035,19182],"source":" For more information, see [Retail Modern POS installation and updates](/dynamics365/unified-operations/retail/retail-modern-pos-device-activation)."},{"pos":[19187,19195],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[19197,19258],"content":"<bpt id=\"p1\">[</bpt>Install a deployable package<ept id=\"p1\">](install-deployable-package.md)</ept>","source":"[Install a deployable package](install-deployable-package.md)"}]}