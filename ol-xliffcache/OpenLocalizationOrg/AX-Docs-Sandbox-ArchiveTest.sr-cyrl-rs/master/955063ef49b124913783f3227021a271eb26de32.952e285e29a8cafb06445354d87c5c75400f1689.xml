{"content":"---\n# required metadata\n\ntitle: Process for upgrading a sandbox environment\ndescription: This topic describes the steps for deploying an upgrade to a non-production sandbox or stand-alone sandbox environment. \nauthor: MargoC\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \nms.reviewer: margoc\nms.search.scope: Operations, Platform, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 269234\nms.assetid: feb8ca24-e86d-4101-b77f-c04137e176d0\nms.search.region: Global\n# ms.search.industry: \nms.author: tabell\nms.search.validFrom: 2016-11-30\nms.dyn365.ops.version: Platform update 3\n\n---\n\n# Process for upgrading a sandbox environment\n\n[!include[banner](../includes/banner.md)]\n\n[!include[upgrade banner](../includes/upgrade-banner.md)]\n\nThis topic describes the steps for performing a data upgrade to a Tier 2 or higher sandbox environment.\n\nIn some environments the Microsoft Service Engineering Team (DSE) will execute the data upgrade for you, for more information see the end to end upgrade process here: [Overview of moving to the latest update of Microsoft Dynamics 365 for Finance and Operations](upgrade-latest-update.md#scenario-3-upgrade-to-the-most-current-application-update).\n\n## Prerequisites\nIf you have any customizations or ISV solutions you must have already completed [code upgrade](upgrade-latest-update.md#scenario-2-upgrade-your-custom-code) and have your upgraded deployable packages ready in your asset library in Lifecycle Services. We strongly recommend that you perform the data upgrade on a development environment before upgrading in a sandbox environment. It is much faster to make corrections and re-run the process in a development environment, so you can reduce the overall time to upgrade by working in a development environment first.\n\n## Export the database\nFollow the steps in this article to export the database to a bacpac file from the existing sandbox environment you wish to upgrade: [Copy a Finance and Operations database to restore later](../database/copy-operations-database.md).\n\n#### Additional steps for Management Reporter\n\nExport your report designs, known as building block groups, from the Report Designer. Transfer the exported file to a secure location so that you can use it later to reimport the report definitions. Detailed instructions for exporting: [Building block](https://msdn.microsoft.com/en-us/library/dn464326.aspx#Exportabuildingblockgroup). You can take this file and copy or upload it to secure location such that it may be imported into a different environment at another time. See [Upload the file to an Azure storage account, by using the AzCopy Command-Line Utility.](https://azure.microsoft.com/en-gb/documentation/articles/storage-use-azcopy/) **Note:** Microsoft doesn’t provide a storage account as part of your Finance and Operations agreement. You must either purchase a storage account or use a storage account from a separate Azure subscription. **Important:** Be aware of the behavior of the D drive on Azure Virtual Machines, do not keep your exported building block groups here permanently unless you are prepared to lose them. For details see: [Understanding the temporary drive on Windows Azure virtual machines (blog post)](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/).\n\n## Redeploy sandbox environment\nIn your Lifecycle Services implementation project:\n\n1.  Locate the sandbox environment that you wish to upgrade and delete it.\n    1.  Click Deallocate on the toolbar in the Environment page. After a few minutes the environment status will change to Deallocated\n    2.  Click Delete on the toolbar and type the environment name to confirm deletion. After a few minutes the environment will be deleted\n\n2.  In the main LCS Project page, in the Environments pane, the deleted environment will display the options to request a deployment – click and request the environment to be deployed with the new version and select your upgraded custom deployable packages from your asset library to be deployed to the environment.\n\n## Import the database\nFollow the steps in this article to import the database from a bacpac file into the newly redeployed sandbox environment: [Copy a Finance and Operations database to restore later](../database/copy-operations-database.md).\n\n## Run the data upgrade package\nExecute the data upgrade as described in this article: [Upgrade data in development, demo or sandbox environments.](upgrade-data-to-latest-update.md)\n\n## Update additional components\nThere may be additional components in use in your environment which require further steps to upgrade.\n\n#### Additional steps for Management Reporter\n\nReset the management reporter database by following the steps in this topic [Resetting the financial reporting data mart after restoring a database](../analytics/reset-financial-reporting-datamart-after-restore.md) and then reimport the building block groups you exported in an earlier step.\n\n## Limitations\nExisting document handling documents which are stored in Azure blob storage will be lost during this upgrade process. If you have custom code which utilises the X++ class FileUpload to place files in blob storage, these documents will also be lost.\n\n\n\n","nodes":[{"pos":[4,733],"embed":true,"restype":"x-metadata","content":"# required metadata\n\ntitle: Process for upgrading a sandbox environment\ndescription: This topic describes the steps for deploying an upgrade to a non-production sandbox or stand-alone sandbox environment. \nauthor: MargoC\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer, IT Pro\n# ms.devlang: \nms.reviewer: margoc\nms.search.scope: Operations, Platform, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 269234\nms.assetid: feb8ca24-e86d-4101-b77f-c04137e176d0\nms.search.region: Global\n# ms.search.industry: \nms.author: tabell\nms.search.validFrom: 2016-11-30\nms.dyn365.ops.version: Platform update 3\n","nodes":[{"content":"Process for upgrading a sandbox environment","nodes":[{"pos":[0,43],"content":"Process for upgrading a sandbox environment","nodes":[{"content":"Process for upgrading a sandbox environment","pos":[0,43]}]}],"path":["title"],"extradata":"MT"},{"content":"This topic describes the steps for deploying an upgrade to a non-production sandbox or stand-alone sandbox environment.","nodes":[{"pos":[0,119],"content":"This topic describes the steps for deploying an upgrade to a non-production sandbox or stand-alone sandbox environment.","nodes":[{"content":"This topic describes the steps for deploying an upgrade to a non-production sandbox or stand-alone sandbox environment.","pos":[0,119]}]}],"path":["description"],"extradata":"MT"}],"header":"# required metadata\n","yml":true},{"pos":[741,784],"content":"Process for upgrading a sandbox environment","linkify":"Process for upgrading a sandbox environment","nodes":[{"content":"Process for upgrading a sandbox environment","pos":[0,43]}]},{"content":"This topic describes the steps for performing a data upgrade to a Tier 2 or higher sandbox environment.","pos":[888,991]},{"pos":[993,1339],"content":"In some environments the Microsoft Service Engineering Team (DSE) will execute the data upgrade for you, for more information see the end to end upgrade process here: <bpt id=\"p1\">[</bpt>Overview of moving to the latest update of Microsoft Dynamics 365 for Finance and Operations<ept id=\"p1\">](upgrade-latest-update.md#scenario-3-upgrade-to-the-most-current-application-update)</ept>.","source":"In some environments the Microsoft Service Engineering Team (DSE) will execute the data upgrade for you, for more information see the end to end upgrade process here: [Overview of moving to the latest update of Microsoft Dynamics 365 for Finance and Operations](upgrade-latest-update.md#scenario-3-upgrade-to-the-most-current-application-update)."},{"pos":[1344,1357],"content":"Prerequisites","linkify":"Prerequisites","nodes":[{"content":"Prerequisites","pos":[0,13]}]},{"content":"If you have any customizations or ISV solutions you must have already completed <bpt id=\"p1\">[</bpt>code upgrade<ept id=\"p1\">](upgrade-latest-update.md#scenario-2-upgrade-your-custom-code)</ept> and have your upgraded deployable packages ready in your asset library in Lifecycle Services.","pos":[1358,1608],"source":"If you have any customizations or ISV solutions you must have already completed [code upgrade](upgrade-latest-update.md#scenario-2-upgrade-your-custom-code) and have your upgraded deployable packages ready in your asset library in Lifecycle Services."},{"content":"We strongly recommend that you perform the data upgrade on a development environment before upgrading in a sandbox environment.","pos":[1609,1736]},{"content":"It is much faster to make corrections and re-run the process in a development environment, so you can reduce the overall time to upgrade by working in a development environment first.","pos":[1737,1920]},{"pos":[1925,1944],"content":"Export the database","linkify":"Export the database","nodes":[{"content":"Export the database","pos":[0,19]}]},{"pos":[1945,2176],"content":"Follow the steps in this article to export the database to a bacpac file from the existing sandbox environment you wish to upgrade: <bpt id=\"p1\">[</bpt>Copy a Finance and Operations database to restore later<ept id=\"p1\">](../database/copy-operations-database.md)</ept>.","source":"Follow the steps in this article to export the database to a bacpac file from the existing sandbox environment you wish to upgrade: [Copy a Finance and Operations database to restore later](../database/copy-operations-database.md)."},{"pos":[2183,2223],"content":"Additional steps for Management Reporter","linkify":"Additional steps for Management Reporter","nodes":[{"content":"Additional steps for Management Reporter","pos":[0,40]}]},{"content":"Export your report designs, known as building block groups, from the Report Designer.","pos":[2225,2310]},{"content":"Transfer the exported file to a secure location so that you can use it later to reimport the report definitions.","pos":[2311,2423]},{"content":"Detailed instructions for exporting: <bpt id=\"p1\">[</bpt>Building block<ept id=\"p1\">](https://msdn.microsoft.com/en-us/library/dn464326.aspx#Exportabuildingblockgroup)</ept>.","pos":[2424,2560],"source":" Detailed instructions for exporting: [Building block](https://msdn.microsoft.com/en-us/library/dn464326.aspx#Exportabuildingblockgroup)."},{"content":"You can take this file and copy or upload it to secure location such that it may be imported into a different environment at another time.","pos":[2561,2699]},{"content":"See <bpt id=\"p1\">[</bpt>Upload the file to an Azure storage account, by using the AzCopy Command-Line Utility.<ept id=\"p1\">](https://azure.microsoft.com/en-gb/documentation/articles/storage-use-azcopy/)</ept>","pos":[2700,2870],"source":" See [Upload the file to an Azure storage account, by using the AzCopy Command-Line Utility.](https://azure.microsoft.com/en-gb/documentation/articles/storage-use-azcopy/)"},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> Microsoft doesn’t provide a storage account as part of your Finance and Operations agreement.","pos":[2871,2974],"source":"**Note:** Microsoft doesn’t provide a storage account as part of your Finance and Operations agreement."},{"content":"You must either purchase a storage account or use a storage account from a separate Azure subscription.","pos":[2975,3078]},{"content":"<bpt id=\"p1\">**</bpt>Important:<ept id=\"p1\">**</ept> Be aware of the behavior of the D drive on Azure Virtual Machines, do not keep your exported building block groups here permanently unless you are prepared to lose them.","pos":[3079,3263],"source":"**Important:** Be aware of the behavior of the D drive on Azure Virtual Machines, do not keep your exported building block groups here permanently unless you are prepared to lose them."},{"content":"For details see: <bpt id=\"p1\">[</bpt>Understanding the temporary drive on Windows Azure virtual machines (blog post)<ept id=\"p1\">](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/)</ept>.","pos":[3264,3482],"source":" For details see: [Understanding the temporary drive on Windows Azure virtual machines (blog post)](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/)."},{"pos":[3487,3515],"content":"Redeploy sandbox environment","linkify":"Redeploy sandbox environment","nodes":[{"content":"Redeploy sandbox environment","pos":[0,28]}]},{"content":"In your Lifecycle Services implementation project:","pos":[3516,3566]},{"content":"Locate the sandbox environment that you wish to upgrade and delete it.","pos":[3572,3642]},{"content":"Click Deallocate on the toolbar in the Environment page.","pos":[3651,3707]},{"content":"After a few minutes the environment status will change to Deallocated","pos":[3708,3777]},{"content":"Click Delete on the toolbar and type the environment name to confirm deletion.","pos":[3786,3864]},{"content":"After a few minutes the environment will be deleted","pos":[3865,3916]},{"content":"In the main LCS Project page, in the Environments pane, the deleted environment will display the options to request a deployment – click and request the environment to be deployed with the new version and select your upgraded custom deployable packages from your asset library to be deployed to the environment.","pos":[3922,4233]},{"pos":[4238,4257],"content":"Import the database","linkify":"Import the database","nodes":[{"content":"Import the database","pos":[0,19]}]},{"pos":[4258,4479],"content":"Follow the steps in this article to import the database from a bacpac file into the newly redeployed sandbox environment: <bpt id=\"p1\">[</bpt>Copy a Finance and Operations database to restore later<ept id=\"p1\">](../database/copy-operations-database.md)</ept>.","source":"Follow the steps in this article to import the database from a bacpac file into the newly redeployed sandbox environment: [Copy a Finance and Operations database to restore later](../database/copy-operations-database.md)."},{"pos":[4484,4512],"content":"Run the data upgrade package","linkify":"Run the data upgrade package","nodes":[{"content":"Run the data upgrade package","pos":[0,28]}]},{"pos":[4513,4662],"content":"Execute the data upgrade as described in this article: <bpt id=\"p1\">[</bpt>Upgrade data in development, demo or sandbox environments.<ept id=\"p1\">](upgrade-data-to-latest-update.md)</ept>","source":"Execute the data upgrade as described in this article: [Upgrade data in development, demo or sandbox environments.](upgrade-data-to-latest-update.md)"},{"pos":[4667,4695],"content":"Update additional components","linkify":"Update additional components","nodes":[{"content":"Update additional components","pos":[0,28]}]},{"content":"There may be additional components in use in your environment which require further steps to upgrade.","pos":[4696,4797]},{"pos":[4804,4844],"content":"Additional steps for Management Reporter","linkify":"Additional steps for Management Reporter","nodes":[{"content":"Additional steps for Management Reporter","pos":[0,40]}]},{"pos":[4846,5137],"content":"Reset the management reporter database by following the steps in this topic <bpt id=\"p1\">[</bpt>Resetting the financial reporting data mart after restoring a database<ept id=\"p1\">](../analytics/reset-financial-reporting-datamart-after-restore.md)</ept> and then reimport the building block groups you exported in an earlier step.","source":"Reset the management reporter database by following the steps in this topic [Resetting the financial reporting data mart after restoring a database](../analytics/reset-financial-reporting-datamart-after-restore.md) and then reimport the building block groups you exported in an earlier step."},{"pos":[5142,5153],"content":"Limitations","linkify":"Limitations","nodes":[{"content":"Limitations","pos":[0,11]}]},{"content":"Existing document handling documents which are stored in Azure blob storage will be lost during this upgrade process.","pos":[5154,5271]},{"content":"If you have custom code which utilises the X++ class FileUpload to place files in blob storage, these documents will also be lost.","pos":[5272,5402]}]}