{"content":"---\n# required metadata\n\ntitle: Check box support in tree controls\ndescription: This article is intended as a primer for using check box controls in the tree control. It's not a general 'how to' for using tree controls.\nauthor: RobinARH\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: robinr\nms.search.scope: AX 7.0.0, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 31501\nms.assetid: 57c0fa59-ef48-4913-9f92-407ff2566c72\nms.search.region: Global\n# ms.search.industry: \nms.author: tlefor\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n\n---\n\n# Check box support in tree controls\n\n[!include[banner](../includes/banner.md)]\n\n\nThis article is intended as a primer for using check box controls in the tree control. It's not a general “how to” for using tree controls.\n\nMicrosoft Dynamics AX 2012 includes several examples of tree controls that were enhanced so that they both show data in a tree hierarchy and let the user select one or more nodes by using check boxes. In Dynamics AX 2012, the tree control had no built-in support for check box controls. Instead, an image of a check box was added for each node in the tree control. The image state for each node was then toggled as the user clicked the check box. \n\n![TreeControl\\_LegacyCheckbox](./media/treecontrol_legacycheckbox.png) \n\nThe current version has greatly simplified the experience for the developer. Check box support is now built into the tree control. \n\n![TreeControl\\_AX7Checkbox](./media/treecontrol_ax7checkbox.png) \n\nYou no longer have to use images to include a check box, and you also don't have to explicitly set the state of the check box state when it's selected. The control doesn’t use images, and the check box state is managed in the way that you would expect for a tri-state check box. Examples of tri-state check boxes can be found in most installation scenarios. When tri-state check boxes are used, if the user selects a parent node, all children of that parent also become selected. The check box interaction is independent of the node's expand/collapse functionality. When the parent node is collapsed (no children are visible), a check mark on the parent node indicates that all children are also selected. However, if one child of a parent that has multiple children isn't selected, the appearance of the parent node changes. The check box no longer contains a check mark but is filled in. This state is considered a partial check. Therefore, a parent node has three states:\n\n-   Checked\n-   Unchecked\n-   Partial\n\nIf the user clicks the check box on a parent node that is in a partial state, the state of the parent and all its children changes to checked. (The parent node and all its child nodes are now selected.) **Parent node in a partial state** \n\n![TreeControl\\_PartialParent](./media/treecontrol_partialparent.png) \n\n**Parent node and all child nodes in a checked state after the parent node is selected**\n\n![TreeControl\\_Parent](./media/treecontrol_parent.png) \n\nIf the user clicks the check box on a parent node that is in a checked state, the state of the parent and all its children changes to unchecked. (The parent node and all its child nodes are now cleared.) **Parent node in a checked state** \n\n![TreeControl\\_Parent](./media/treecontrol_parent.png)\n\n**Parent node and all child nodes in an unchecked state after the parent node is cleared** \n\n![TreeControl\\_NoParent](./media/treecontrol_noparent1.png) \n\nIf the user clicks the check box on a parent node that is in an unchecked state, the state of the parent and all its children changes to checked. (The parent node and all its child nodes are now selected.) **Parent node in an unchecked state** \n\n![TreeControl\\_NoParent](./media/treecontrol_noparent1.png) \n\n**Parent node and all child nodes in a checked state after the parent node is selected** \n\n![TreeControl\\_Parent](./media/treecontrol_parent.png) \n\nA child node that has no children (in other words, a child node that isn't a parent itself) has only two states: checked and unchecked. A child node that is the only child in a checked state affects the state of its parent. If a child node is selected, the state of its parent changes to partial. **Note:** A single node in a tree also has a “selected” state to indicate that it's the current node. This state differs from the checked state.\n\n## Tree controls that contain check boxes in Dynamics AX 2012\nThe following example is from SysConfiguration.\n\n1.  The program checks for the **mouseDown** event.\n2.  When the **mouseDown** event is detected, the program determines whether the user clicked the node or the image.\n3.  If the user clicked the image, the program toggles the image state.\n\nNone of this code is required for the current version.\n\n    int mouseDown(int x, int y, int button, boolean ctrl, boolean shift)\n    {\n        int idx,f;\n        FormTreeItem        parentNode, node;\n        int                 parentMode;\n        boolean             enabled;\n        #FormTreeControl;\n        [idx,f] = this.hitTest(x,y);\n        parentNode  = this.getItem(this.getParent(idx));\n        node        = this.getItem(idx);\n        if (node)\n        {\n            if(parentNode)\n            {\n                if (element.enabled(parentNode.data()))\n                parentMode = true;\n            }\n            else\n                parentMode  = true;\n            if ((f & #FTCHT_ONITEMICON) && parentMode)\n            {\n                if (!node.overlayImage())\n                {\n                    enabled = (element.enabled(this.getItem(idx).data()) ? false : true);\n                    element.enabled(this.getItem(idx).data(), enabled);\n                    element.drawTree();\n                }\n                return 1;\n            }\n        }\n        return super(x, y, button, ctrl, shift);\n    }\n\nIn the current version, you still set the selected state for scenarios where the user is presented with preselected nodes. Additionally, the developer can still set the state explicitly when the FormTreeItem is created. However, instead of specifying the current image, the developer now sets the **stateChecked** property on the FormTreeItem. If developers must know when the state of a check box changes, they can override the **checkedStateChanged()** method.\n\n## Basic check box use for tree controls in the current version\nMake sure that the **Check Box** property on the modeled tree control is set to **Yes**. To explicitly set the state on a node, use the following code.\n\n    formTreeItem.stateChecked(FormTreeCheckedState::Checked);\n    formTreeControl.setItem(formTreeItem);\n\nTo interrogate a node for its current state, use the following code.\n\n    FormTreeItem formTreeItem = formTreeControl.getItem(formTreeControl.getSelection());\n    FormTreeCheckedState currentState;\n    if (formTreeItem != null)\n    {\n        currentState = formTreeItem.stateChecked();\n        switch (currentState)\n        {\n            case FormTreeCheckedState::Unchecked:\n                /* unchecked */\n                break;\n            case FormTreeCheckedState::Checked:\n                /*checked */\n                break;\n            case FormTreeCheckedState::Partial:\n                /* parent has children checked */\n                break;\n            default:\n                /* shouldn’t get here */\n                break;\n        }\n    }\n\nTo react to or track the checked state of a node (**idx** is the node index), use the following code.\n\n    public void checkedStateChanged(int _Idx, FormTreeCheckedState _newState)\n    {\n        super(_Idx, _newState);\n    }\n\n\n\n","nodes":[{"pos":[4,727],"embed":true,"restype":"x-metadata","content":"# required metadata\n\ntitle: Check box support in tree controls\ndescription: This article is intended as a primer for using check box controls in the tree control. It's not a general 'how to' for using tree controls.\nauthor: RobinARH\nmanager: AnnBe\nms.date: 06/20/2017\nms.topic: article\nms.prod: \nms.service: dynamics-ax-platform\nms.technology: \n\n# optional metadata\n\n# ms.search.form: \n# ROBOTS: \naudience: Developer\n# ms.devlang: \nms.reviewer: robinr\nms.search.scope: AX 7.0.0, Operations, UnifiedOperations\n# ms.tgt_pltfrm: \nms.custom: 31501\nms.assetid: 57c0fa59-ef48-4913-9f92-407ff2566c72\nms.search.region: Global\n# ms.search.industry: \nms.author: tlefor\nms.search.validFrom: 2016-02-28\nms.dyn365.ops.version: AX 7.0.0\n","nodes":[{"content":"Check box support in tree controls","nodes":[{"pos":[0,34],"content":"Check box support in tree controls","nodes":[{"content":"Check box support in tree controls","pos":[0,34]}]}],"path":["title"],"extradata":"MT"},{"content":"This article is intended as a primer for using check box controls in the tree control. It's not a general 'how to' for using tree controls.","nodes":[{"pos":[0,139],"content":"This article is intended as a primer for using check box controls in the tree control. It's not a general 'how to' for using tree controls.","nodes":[{"content":"This article is intended as a primer for using check box controls in the tree control. It's not a general 'how to' for using tree controls.","pos":[0,139],"nodes":[{"content":"This article is intended as a primer for using check box controls in the tree control.","pos":[0,86]},{"content":"It's not a general 'how to' for using tree controls.","pos":[87,139]}]}]}],"path":["description"],"extradata":"MT"}],"header":"# required metadata\n","yml":true},{"pos":[735,769],"content":"Check box support in tree controls","linkify":"Check box support in tree controls","nodes":[{"content":"Check box support in tree controls","pos":[0,34]}]},{"content":"This article is intended as a primer for using check box controls in the tree control.","pos":[815,901]},{"content":"It's not a general “how to” for using tree controls.","pos":[902,954]},{"content":"Microsoft Dynamics AX 2012 includes several examples of tree controls that were enhanced so that they both show data in a tree hierarchy and let the user select one or more nodes by using check boxes.","pos":[956,1156]},{"content":"In Dynamics AX 2012, the tree control had no built-in support for check box controls.","pos":[1157,1242]},{"content":"Instead, an image of a check box was added for each node in the tree control.","pos":[1243,1320]},{"content":"The image state for each node was then toggled as the user clicked the check box.","pos":[1321,1402]},{"content":"TreeControl<ph id=\"ph1\">\\_</ph>LegacyCheckbox","pos":[1407,1434],"source":"TreeControl\\_LegacyCheckbox"},{"content":"The current version has greatly simplified the experience for the developer.","pos":[1478,1554]},{"content":"Check box support is now built into the tree control.","pos":[1555,1608]},{"content":"TreeControl<ph id=\"ph1\">\\_</ph>AX7Checkbox","pos":[1613,1637],"source":"TreeControl\\_AX7Checkbox"},{"content":"You no longer have to use images to include a check box, and you also don't have to explicitly set the state of the check box state when it's selected.","pos":[1678,1829]},{"content":"The control doesn’t use images, and the check box state is managed in the way that you would expect for a tri-state check box.","pos":[1830,1956]},{"content":"Examples of tri-state check boxes can be found in most installation scenarios.","pos":[1957,2035]},{"content":"When tri-state check boxes are used, if the user selects a parent node, all children of that parent also become selected.","pos":[2036,2157]},{"content":"The check box interaction is independent of the node's expand/collapse functionality.","pos":[2158,2243]},{"content":"When the parent node is collapsed (no children are visible), a check mark on the parent node indicates that all children are also selected.","pos":[2244,2383]},{"content":"However, if one child of a parent that has multiple children isn't selected, the appearance of the parent node changes.","pos":[2384,2503]},{"content":"The check box no longer contains a check mark but is filled in.","pos":[2504,2567]},{"content":"This state is considered a partial check.","pos":[2568,2609]},{"content":"Therefore, a parent node has three states:","pos":[2610,2652]},{"content":"Checked","pos":[2658,2665]},{"content":"Unchecked","pos":[2670,2679]},{"content":"Partial","pos":[2684,2691]},{"content":"If the user clicks the check box on a parent node that is in a partial state, the state of the parent and all its children changes to checked.","pos":[2693,2835]},{"content":"(The parent node and all its child nodes are now selected.) <bpt id=\"p1\">**</bpt>Parent node in a partial state<ept id=\"p1\">**</ept>","pos":[2836,2930],"source":" (The parent node and all its child nodes are now selected.) **Parent node in a partial state**"},{"content":"TreeControl<ph id=\"ph1\">\\_</ph>PartialParent","pos":[2935,2961],"source":"TreeControl\\_PartialParent"},{"pos":[3004,3092],"content":"<bpt id=\"p1\">**</bpt>Parent node and all child nodes in a checked state after the parent node is selected<ept id=\"p1\">**</ept>","source":"**Parent node and all child nodes in a checked state after the parent node is selected**"},{"content":"TreeControl<ph id=\"ph1\">\\_</ph>Parent","pos":[3096,3115],"source":"TreeControl\\_Parent"},{"content":"If the user clicks the check box on a parent node that is in a checked state, the state of the parent and all its children changes to unchecked.","pos":[3151,3295]},{"content":"(The parent node and all its child nodes are now cleared.) <bpt id=\"p1\">**</bpt>Parent node in a checked state<ept id=\"p1\">**</ept>","pos":[3296,3389],"source":" (The parent node and all its child nodes are now cleared.) **Parent node in a checked state**"},{"content":"TreeControl<ph id=\"ph1\">\\_</ph>Parent","pos":[3394,3413],"source":"TreeControl\\_Parent"},{"pos":[3448,3538],"content":"<bpt id=\"p1\">**</bpt>Parent node and all child nodes in an unchecked state after the parent node is cleared<ept id=\"p1\">**</ept>","source":"**Parent node and all child nodes in an unchecked state after the parent node is cleared**"},{"content":"TreeControl<ph id=\"ph1\">\\_</ph>NoParent","pos":[3543,3564],"source":"TreeControl\\_NoParent"},{"content":"If the user clicks the check box on a parent node that is in an unchecked state, the state of the parent and all its children changes to checked.","pos":[3603,3748]},{"content":"(The parent node and all its child nodes are now selected.) <bpt id=\"p1\">**</bpt>Parent node in an unchecked state<ept id=\"p1\">**</ept>","pos":[3749,3846],"source":" (The parent node and all its child nodes are now selected.) **Parent node in an unchecked state**"},{"content":"TreeControl<ph id=\"ph1\">\\_</ph>NoParent","pos":[3851,3872],"source":"TreeControl\\_NoParent"},{"pos":[3911,3999],"content":"<bpt id=\"p1\">**</bpt>Parent node and all child nodes in a checked state after the parent node is selected<ept id=\"p1\">**</ept>","source":"**Parent node and all child nodes in a checked state after the parent node is selected**"},{"content":"TreeControl<ph id=\"ph1\">\\_</ph>Parent","pos":[4004,4023],"source":"TreeControl\\_Parent"},{"content":"A child node that has no children (in other words, a child node that isn't a parent itself) has only two states: checked and unchecked.","pos":[4059,4194]},{"content":"A child node that is the only child in a checked state affects the state of its parent.","pos":[4195,4282]},{"content":"If a child node is selected, the state of its parent changes to partial.","pos":[4283,4355]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> A single node in a tree also has a “selected” state to indicate that it's the current node.","pos":[4356,4457],"source":"**Note:** A single node in a tree also has a “selected” state to indicate that it's the current node."},{"content":"This state differs from the checked state.","pos":[4458,4500]},{"pos":[4505,4563],"content":"Tree controls that contain check boxes in Dynamics AX 2012","linkify":"Tree controls that contain check boxes in Dynamics AX 2012","nodes":[{"content":"Tree controls that contain check boxes in Dynamics AX 2012","pos":[0,58]}]},{"content":"The following example is from SysConfiguration.","pos":[4564,4611]},{"pos":[4617,4664],"content":"The program checks for the <bpt id=\"p1\">**</bpt>mouseDown<ept id=\"p1\">**</ept> event.","source":"The program checks for the **mouseDown** event."},{"pos":[4669,4781],"content":"When the <bpt id=\"p1\">**</bpt>mouseDown<ept id=\"p1\">**</ept> event is detected, the program determines whether the user clicked the node or the image.","source":"When the **mouseDown** event is detected, the program determines whether the user clicked the node or the image."},{"content":"If the user clicked the image, the program toggles the image state.","pos":[4786,4853]},{"content":"None of this code is required for the current version.","pos":[4855,4909]},{"content":"In the current version, you still set the selected state for scenarios where the user is presented with preselected nodes.","pos":[5975,6097]},{"content":"Additionally, the developer can still set the state explicitly when the FormTreeItem is created.","pos":[6098,6194]},{"content":"However, instead of specifying the current image, the developer now sets the <bpt id=\"p1\">**</bpt>stateChecked<ept id=\"p1\">**</ept> property on the FormTreeItem.","pos":[6195,6318],"source":" However, instead of specifying the current image, the developer now sets the **stateChecked** property on the FormTreeItem."},{"content":"If developers must know when the state of a check box changes, they can override the <bpt id=\"p1\">**</bpt>checkedStateChanged()<ept id=\"p1\">**</ept> method.","pos":[6319,6437],"source":" If developers must know when the state of a check box changes, they can override the **checkedStateChanged()** method."},{"pos":[6442,6502],"content":"Basic check box use for tree controls in the current version","linkify":"Basic check box use for tree controls in the current version","nodes":[{"content":"Basic check box use for tree controls in the current version","pos":[0,60]}]},{"content":"Make sure that the <bpt id=\"p1\">**</bpt>Check Box<ept id=\"p1\">**</ept> property on the modeled tree control is set to <bpt id=\"p2\">**</bpt>Yes<ept id=\"p2\">**</ept>.","pos":[6503,6591],"source":"Make sure that the **Check Box** property on the modeled tree control is set to **Yes**."},{"content":"To explicitly set the state on a node, use the following code.","pos":[6592,6654]},{"content":"To interrogate a node for its current state, use the following code.","pos":[6762,6830]},{"pos":[7516,7617],"content":"To react to or track the checked state of a node (<bpt id=\"p1\">**</bpt>idx<ept id=\"p1\">**</ept> is the node index), use the following code.","source":"To react to or track the checked state of a node (**idx** is the node index), use the following code."}]}